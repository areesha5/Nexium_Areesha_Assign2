!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="84262320-53ee-4aef-914e-87b8f5c99dc9",e._sentryDebugIdIdentifier="sentry-dbid-84262320-53ee-4aef-914e-87b8f5c99dc9")}catch(e){}}();"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4748],{6861:(e,t,s)=>{s.d(t,{I:()=>u});var a=s(80263),n=s(53239),r=s(67928),i=s(37263),l=s(82457),o=s(40691),d=s(75382),c=s(97337);let u=e=>{let{title:t,options:s=[],activeOptions:u=[],valueKey:m,labelKey:p,iconKey:h="icon",name:x="default",variant:g="rectangular",buttonType:f,disabled:y,labelClass:j,className:v,maxHeightClass:b="h-[205px]",clearButtonText:S="Clear",onSaveFilters:A}=e,[N,w]=(0,n.useState)(!1),[_,C]=(0,n.useState)([]),E=u.map(e=>{let t=s.find(t=>t[m]===e);return t&&t[p]?t[p]:""});return(0,n.useEffect)(()=>{!N&&u.length>0&&C(u)},[N,u]),(0,a.jsxs)(r.AM,{open:N,onOpenChange:w,"data-sentry-element":"Popover_Shadcn_","data-sentry-component":"FilterPopover","data-sentry-source-file":"FilterPopover.tsx",children:[(0,a.jsx)(r.Wv,{asChild:!0,"data-sentry-element":"PopoverTrigger_Shadcn_","data-sentry-source-file":"FilterPopover.tsx",children:(0,a.jsx)(i.$,{asChild:!0,disabled:y,type:null!=f?f:u.length>0?"default":"dashed",onClick:()=>w(!1),className:"rounded"===g?"rounded-full":"","data-sentry-element":"Button","data-sentry-source-file":"FilterPopover.tsx",children:(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{children:x}),u.length>0&&(0,a.jsx)("span",{className:"mr-1",children:":"}),u.length>=3?(0,a.jsxs)("span",{children:[E[0]," and ",u.length-1," others"]}):u.length>0?(0,a.jsx)("span",{children:E.join(", ")}):null]})})}),(0,a.jsxs)(r.hl,{className:(0,l.cn)("p-0 w-44",v),align:"start",portal:!0,"data-sentry-element":"PopoverContent_Shadcn_","data-sentry-source-file":"FilterPopover.tsx",children:[(0,a.jsx)("div",{className:"border-b border-overlay bg-surface-200 rounded-t pb-1 px-3",children:(0,a.jsx)("span",{className:"text-xs text-foreground-light",children:null!=t?t:"Select ".concat(x.toLowerCase())})}),(0,a.jsx)(o.FK,{className:s.length>7?b:"","data-sentry-element":"ScrollArea","data-sentry-source-file":"FilterPopover.tsx",children:(0,a.jsx)("div",{className:"p-3 flex flex-col gap-y-2",children:s.map(e=>{let t=e[m],s=h?e[h]:void 0;return(0,a.jsxs)("div",{className:"flex items-center gap-x-2",children:[(0,a.jsx)(d.S,{id:t,checked:_.includes(t),onCheckedChange:()=>{_.includes(t)?C(_.filter(e=>e!==t)):C(_.concat(t))}}),(0,a.jsxs)(c.J,{htmlFor:e[m],className:(0,l.cn)("flex items-center gap-x-2 text-xs",j),children:[s&&(0,a.jsx)("img",{src:s,alt:e[p],className:(0,l.cn)("w-4 h-4",e.iconClass)}),(0,a.jsx)("span",{children:e[p]})]})]},t)})})}),(0,a.jsxs)("div",{className:"flex items-center justify-end gap-2 border-t border-overlay bg-surface-200 py-2 px-3",children:[(0,a.jsx)(i.$,{size:"tiny",type:"default",onClick:()=>{A([]),C([]),w(!1)},"data-sentry-element":"Button","data-sentry-source-file":"FilterPopover.tsx",children:S}),(0,a.jsx)(i.$,{type:"primary",onClick:()=>{let e=s.map(e=>e[m]);A(_.sort((t,s)=>e.indexOf(t)-e.indexOf(s))),w(!1)},"data-sentry-element":"Button","data-sentry-source-file":"FilterPopover.tsx",children:"Save"})]})]})]})}},7031:(e,t,s)=>{s.d(t,{A:()=>i,h:()=>l});var a=s(80263),n=s(60045),r=s(880);let i=e=>{let{description:t,hasReadScope:s,hasWriteScope:n}=e;if(s||n){let e=[s?"Read":null,n?"Write":null].filter(Boolean).map(e=>(0,a.jsx)("span",{className:"font-semibold text-foreground",children:e},e)).reduce((e,t)=>(0,a.jsxs)(a.Fragment,{children:[e,(0,a.jsx)("span",{children:" and "}),t]}));return(0,a.jsxs)("div",{className:"first:border-t border-b flex flex-row space-x-1 text-sm text-foreground-light py-2 px-1",children:[(0,a.jsx)("div",{className:"pt-0.5",children:(0,a.jsx)(r.A,{stroke:"green",height:18,width:18,strokeWidth:1.5})}),(0,a.jsxs)("div",{children:[e," ",t]})]})}return null},l=e=>{let{icon:t,name:s,domain:r,scopes:l}=e;return(0,a.jsxs)("div",{className:"flex gap-y-4 flex-col","data-sentry-component":"AuthorizeRequesterDetails","data-sentry-source-file":"AuthorizeRequesterDetails.tsx",children:[(0,a.jsxs)("div",{className:"flex flex-row gap-x-4 items-center",children:[(0,a.jsx)("div",{className:"flex items-center",children:(0,a.jsx)("div",{className:"w-14 h-14 md:w-16 md:h-16 bg-center bg-no-repeat bg-cover flex items-center justify-center rounded-md border border-control",style:{backgroundImage:t?"url('".concat(t,"')"):"none"},children:!t&&(0,a.jsx)("p",{className:"text-foreground-light text-lg",children:s[0]})})}),(0,a.jsxs)("p",{className:"text-foreground",children:[s," (",r,") is requesting API access to an organization."]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{children:"Permissions"}),(0,a.jsxs)("p",{className:"text-sm text-foreground-light",children:["The following scopes will apply for the"," ",(0,a.jsx)("span",{className:"text-amber-900",children:"selected organization and all of its projects."})]}),(0,a.jsxs)("div",{className:"pt-2",children:[(0,a.jsx)(i,{description:"access to analytics logs.",hasReadScope:l.includes(n.gx.ANALYTICS_READ),hasWriteScope:l.includes(n.gx.ANALYTICS_WRITE),"data-sentry-element":"ScopeSection","data-sentry-source-file":"AuthorizeRequesterDetails.tsx"}),(0,a.jsx)(i,{description:"access to auth configurations and SSO providers.",hasReadScope:l.includes(n.gx.AUTH_READ),hasWriteScope:l.includes(n.gx.AUTH_WRITE),"data-sentry-element":"ScopeSection","data-sentry-source-file":"AuthorizeRequesterDetails.tsx"}),(0,a.jsx)(i,{description:"access to Postgres configurations, SQL snippets, SSL enforcement configurations and Typescript schema types.",hasReadScope:l.includes(n.gx.DATABASE_READ),hasWriteScope:l.includes(n.gx.DATABASE_WRITE),"data-sentry-element":"ScopeSection","data-sentry-source-file":"AuthorizeRequesterDetails.tsx"}),(0,a.jsx)(i,{description:"access to custom domains and vanity subdomains.",hasReadScope:l.includes(n.gx.DOMAINS_READ),hasWriteScope:l.includes(n.gx.DOMAINS_WRITE),"data-sentry-element":"ScopeSection","data-sentry-source-file":"AuthorizeRequesterDetails.tsx"}),(0,a.jsx)(i,{description:"access to edge functions.",hasReadScope:l.includes(n.gx.EDGE_FUNCTIONS_READ),hasWriteScope:l.includes(n.gx.EDGE_FUNCTIONS_WRITE),"data-sentry-element":"ScopeSection","data-sentry-source-file":"AuthorizeRequesterDetails.tsx"}),(0,a.jsx)(i,{description:"access to environments/branches.",hasReadScope:l.includes(n.gx.ENVIRONMENT_READ),hasWriteScope:l.includes(n.gx.ENVIRONMENT_WRITE),"data-sentry-element":"ScopeSection","data-sentry-source-file":"AuthorizeRequesterDetails.tsx"}),(0,a.jsx)(i,{description:"access to the organization and all its members.",hasReadScope:l.includes(n.gx.ORGANIZATIONS_READ),hasWriteScope:l.includes(n.gx.ORGANIZATIONS_WRITE),"data-sentry-element":"ScopeSection","data-sentry-source-file":"AuthorizeRequesterDetails.tsx"}),(0,a.jsx)(i,{description:"access to metadata, its upgrade status, network restrictions and network bans.",hasReadScope:l.includes(n.gx.PROJECTS_READ),hasWriteScope:l.includes(n.gx.PROJECTS_WRITE),"data-sentry-element":"ScopeSection","data-sentry-source-file":"AuthorizeRequesterDetails.tsx"}),(0,a.jsx)(i,{description:"access to PostgREST configurations.",hasReadScope:l.includes(n.gx.REST_READ),hasWriteScope:l.includes(n.gx.REST_WRITE),"data-sentry-element":"ScopeSection","data-sentry-source-file":"AuthorizeRequesterDetails.tsx"}),(0,a.jsx)(i,{description:"access to API keys, secrets and pgsodium configurations.",hasReadScope:l.includes(n.gx.SECRETS_READ),hasWriteScope:l.includes(n.gx.SECRETS_WRITE),"data-sentry-element":"ScopeSection","data-sentry-source-file":"AuthorizeRequesterDetails.tsx"}),(0,a.jsx)(i,{description:"access to storage buckets and files.",hasReadScope:l.includes(n.gx.STORAGE_READ),hasWriteScope:l.includes(n.gx.STORAGE_WRITE),"data-sentry-element":"ScopeSection","data-sentry-source-file":"AuthorizeRequesterDetails.tsx"})]})]})]})}},7356:(e,t,s)=>{s.d(t,{a:()=>r});var a=s(53239),n=s(3193);function r(){let e=(0,a.useRef)(!1);return(0,n.s)(()=>(e.current=!0,()=>{e.current=!1}),[]),e}},12523:(e,t,s)=>{s.d(t,{A:()=>o});var a=s(80263),n=s(53239),r=s(9377),i=s(48492);function l(e,t){if(!t.error)return delete e[t.key],e;if(t)return{...e,[t.key]:t.error};throw Error()}function o(e){let{validate:t,...s}=e,[o,d]=(0,n.useReducer)(l,null),c=(0,r.Wx)({validateOnBlur:!0,...s,validationSchema:s.validationSchema,initialValues:s.initialValues,onSubmit:s.onSubmit,validate:t||function(){return o}});return(0,a.jsx)("form",{id:s.id,name:s.name,onSubmit:c.handleSubmit,className:s.className,style:s.style,method:"POST","data-sentry-component":"Form","data-sentry-source-file":"Form.tsx",children:(0,a.jsx)(i.h,{values:c.values,errors:c.errors,formContextOnChange:c.handleChange,handleBlur:c.handleBlur,touched:c.touched,fieldLevelValidation:function(e,t){d({key:e,error:t})},"data-sentry-element":"FormContextProvider","data-sentry-source-file":"Form.tsx",children:s.children({errors:c.errors,touched:c.touched,isSubmitting:c.isSubmitting,isValidating:c.isValidating,submitCount:c.submitCount,initialValues:c.initialValues,values:c.values,handleReset:c.handleReset,resetForm:c.resetForm,setFieldValue:c.setFieldValue})})})}},24995:(e,t,s)=>{s.d(t,{j:()=>i});var a=s(80263),n=s(53239),r=s(82457);let i=(0,n.forwardRef)((e,t)=>{let{preTab:s,postTab:n,children:i,className:l,...o}=e;return(0,a.jsxs)("div",{ref:t,...o,className:(0,r.cn)("flex -space-x-px",l),children:[s&&(0,a.jsx)("div",{className:"border border-strong bg-surface-300 rounded-l-md px-3 flex items-center justify-center",children:(0,a.jsx)("span",{className:"text-foreground-lighter text-xs font-mono",children:s})}),(0,a.jsx)("div",{className:(0,r.cn)("flex-1",{"[&_input]:rounded-l-none [&_select]:rounded-l-none [&_textarea]:rounded-l-none":!!s,"[&_input]:rounded-r-none [&_select]:rounded-r-none [&_textarea]:rounded-r-none":!!n}),children:i}),n&&(0,a.jsx)("div",{className:"border border-strong bg-surface-300 rounded-r-md px-3 flex items-center justify-center",children:(0,a.jsx)("span",{className:"text-foreground-lighter text-xs font-mono",children:n})})]})})},31041:(e,t,s)=>{s.d(t,{Q:()=>l});var a=s(56947),n=s(48678),r=s(75681);async function i(e,t){let{slug:s}=e;if(!s)throw Error("slug is required");let[a,r]=await Promise.all([(0,n.Jt)("/platform/organizations/{slug}/members",{params:{path:{slug:s}},signal:t}),(0,n.Jt)("/platform/organizations/{slug}/members/invitations",{params:{path:{slug:s}},signal:t})]),{data:i,error:l}=a,{data:o,error:d}=r;return l&&(0,n.H4)(l),d&&(0,n.H4)(d),[...i,...o.invitations.map(e=>({...{invited_at:e.invited_at,invited_id:e.id,mfa_enabled:!1,username:e.invited_email.slice(0,1),primary_email:e.invited_email},role_ids:[e.role_id]}))]}let l=function(e){let{slug:t}=e,{enabled:s=!0,...n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,a.I)(r.O.members(t),e=>{let{signal:s}=e;return i({slug:t},s)},{enabled:s&&void 0!==t,...n})}},33425:(e,t,s)=>{s.d(t,{f:()=>d});var a=s(80263),n=s(53434),r=s.n(n),i=s(67843),l=s(96993),o=s(93057);let d=e=>{let{selectedLog:t,onClose:s}=e;return(0,a.jsxs)(l.Ay,{size:"large",header:'"'.concat(null==t?void 0:t.action.name,'" on ').concat(r()(null==t?void 0:t.occurred_at).format("DD MMM YYYY, HH:mm:ss")),visible:void 0!==t,onCancel:s,cancelText:"Close","data-sentry-element":"SidePanel","data-sentry-component":"LogDetailsPanel","data-sentry-source-file":"LogDetailsPanel.tsx",children:[(0,a.jsx)(i.y9,{header:(0,a.jsx)(i.sj,{children:"General"}),"data-sentry-element":"FormSection","data-sentry-source-file":"LogDetailsPanel.tsx",children:(0,a.jsx)(i.DE,{loading:!1,"data-sentry-element":"FormSectionContent","data-sentry-source-file":"LogDetailsPanel.tsx",children:(0,a.jsx)(o.A,{readOnly:!0,size:"small",label:"Occurred at",value:null==t?void 0:t.occurred_at,descriptionText:r()(null==t?void 0:t.occurred_at).format("DD MMM YYYY, HH:mm:ss (ZZ)"),"data-sentry-element":"Input","data-sentry-source-file":"LogDetailsPanel.tsx"})})}),(0,a.jsx)(l.Ay.Separator,{"data-sentry-element":"unknown","data-sentry-source-file":"LogDetailsPanel.tsx"}),(0,a.jsx)(i.y9,{header:(0,a.jsx)(i.sj,{children:"Actor"}),"data-sentry-element":"FormSection","data-sentry-source-file":"LogDetailsPanel.tsx",children:(0,a.jsxs)(i.DE,{loading:!1,"data-sentry-element":"FormSectionContent","data-sentry-source-file":"LogDetailsPanel.tsx",children:[(0,a.jsx)(o.A,{readOnly:!0,size:"small",label:"Actor ID",value:null==t?void 0:t.actor.id,"data-sentry-element":"Input","data-sentry-source-file":"LogDetailsPanel.tsx"}),(0,a.jsx)(o.A.TextArea,{readOnly:!0,size:"small",label:"Metadata",rows:5,className:"input-mono input-xs",value:JSON.stringify(null==t?void 0:t.actor.metadata,null,2),"data-sentry-element":"unknown","data-sentry-source-file":"LogDetailsPanel.tsx"})]})}),(0,a.jsx)(l.Ay.Separator,{"data-sentry-element":"unknown","data-sentry-source-file":"LogDetailsPanel.tsx"}),(0,a.jsx)(i.y9,{header:(0,a.jsx)(i.sj,{children:"Action"}),"data-sentry-element":"FormSection","data-sentry-source-file":"LogDetailsPanel.tsx",children:(0,a.jsxs)(i.DE,{loading:!1,"data-sentry-element":"FormSectionContent","data-sentry-source-file":"LogDetailsPanel.tsx",children:[(0,a.jsx)(o.A,{readOnly:!0,size:"small",label:"Name",value:null==t?void 0:t.action.name,"data-sentry-element":"Input","data-sentry-source-file":"LogDetailsPanel.tsx"}),(0,a.jsx)(o.A.TextArea,{readOnly:!0,size:"small",label:"Metadata",rows:5,className:"input-mono input-xs",value:JSON.stringify(null==t?void 0:t.action.metadata,null,2),"data-sentry-element":"unknown","data-sentry-source-file":"LogDetailsPanel.tsx"})]})}),(0,a.jsx)(l.Ay.Separator,{"data-sentry-element":"unknown","data-sentry-source-file":"LogDetailsPanel.tsx"}),(0,a.jsx)(i.y9,{header:(0,a.jsx)(i.sj,{children:"Target"}),"data-sentry-element":"FormSection","data-sentry-source-file":"LogDetailsPanel.tsx",children:(0,a.jsxs)(i.DE,{loading:!1,"data-sentry-element":"FormSectionContent","data-sentry-source-file":"LogDetailsPanel.tsx",children:[(0,a.jsx)(o.A,{readOnly:!0,size:"small",label:"Name",value:null==t?void 0:t.target.description,"data-sentry-element":"Input","data-sentry-source-file":"LogDetailsPanel.tsx"}),(0,a.jsx)(o.A.TextArea,{readOnly:!0,size:"small",label:"Metadata",rows:5,className:"input-mono input-xs",value:JSON.stringify(null==t?void 0:t.target.metadata,null,2),"data-sentry-element":"unknown","data-sentry-source-file":"LogDetailsPanel.tsx"})]})})]})}},36029:(e,t,s)=>{s.d(t,{Cb:()=>c,L3:()=>u,PJ:()=>m,wG:()=>d});var a=s(80263),n=s(97096),r=s(23149),i=s(41741),l=s(50004),o=s(65939);let d={API:{label:"All API usage",icon:e=>(0,a.jsx)(r.A,{size:16,className:e}),key:"api"},API_DATABASE:{label:"Database API",icon:e=>(0,a.jsx)(i.A,{size:16,className:e}),key:"api_database"},API_AUTH:{label:"Authentication",icon:e=>(0,a.jsx)(n.Nj,{size:16,className:e}),key:"api_auth"},API_STORAGE:{label:"Storage",icon:e=>(0,a.jsx)(n.wc,{size:16,className:e}),key:"api_storage"},API_REALTIME:{label:"Realtime",icon:e=>(0,a.jsx)(n.Se,{size:16,className:e}),key:"api_realtime"},INSTANCE:{label:"Instance health",icon:e=>(0,a.jsx)(l.A,{size:16,className:e}),key:"instance"},SUPAVISOR:{label:"Supavisor",icon:e=>(0,a.jsx)(o.A,{size:16,className:e}),key:"supavisor"}},c=[{key:"avg_cpu_usage",label:"Average CPU % Usage",provider:"infra-monitoring",category:d.INSTANCE},{key:"max_cpu_usage",label:"Max CPU % Usage",provider:"infra-monitoring",category:d.INSTANCE},{key:"disk_io_consumption",label:"Disk IO % Consumed",provider:"infra-monitoring",category:d.INSTANCE},{key:"disk_io_budget",label:"Disk IO % Remaining",provider:"infra-monitoring",category:d.INSTANCE},{key:"ram_usage",label:"Memory % Usage",provider:"infra-monitoring",category:d.INSTANCE},{key:"total_realtime_egress",label:"Realtime Connection Egress",provider:"daily-stats",category:d.API},{key:"total_realtime_requests",label:"Realtime Connection Requests",provider:"daily-stats",category:d.API_REALTIME},{key:"total_realtime_ingress",label:"Realtime Connection Ingress",provider:"daily-stats",category:d.API_REALTIME},{key:"total_rest_ingress",label:"API Ingress",provider:"daily-stats",category:d.API_DATABASE},{key:"total_rest_egress",label:"API Egress",provider:"daily-stats",category:d.API_DATABASE},{key:"total_rest_requests",label:"API Requests",provider:"daily-stats",category:d.API_DATABASE},{key:"total_rest_get_requests",label:"API GET Requests",provider:"daily-stats",category:d.API_DATABASE},{key:"total_rest_post_requests",label:"API POST Requests",provider:"daily-stats",category:d.API_DATABASE},{key:"total_rest_patch_requests",label:"API PATCH Requests",provider:"daily-stats",category:d.API_DATABASE},{key:"total_rest_delete_requests",label:"API DELETE Requests",provider:"daily-stats",category:d.API_DATABASE},{key:"total_rest_options_requests",label:"API OPTIONS Requests",provider:"daily-stats",category:d.API_DATABASE},{key:"total_auth_billing_period_mau",label:"Auth Monthly Active User",provider:"daily-stats",category:d.API_AUTH},{key:"total_auth_billing_period_sso_mau",label:"Auth Monthly Active SSO User",provider:"daily-stats",category:d.API_AUTH},{key:"total_auth_ingress",label:"Auth Ingress",provider:"daily-stats",category:d.API_AUTH},{key:"total_auth_egress",label:"Auth Egress",provider:"daily-stats",category:d.API_AUTH},{key:"total_auth_requests",label:"Auth Requests",provider:"daily-stats",category:d.API_AUTH},{key:"total_auth_get_requests",label:"Auth GET Requests",provider:"daily-stats",category:d.API_AUTH},{key:"total_auth_post_requests",label:"Auth POST Requests",provider:"daily-stats",category:d.API_AUTH},{key:"total_auth_patch_requests",label:"Auth PATCH Requests",provider:"daily-stats",category:d.API_AUTH},{key:"total_auth_options_requests",label:"Auth OPTIONS Requests",provider:"daily-stats",category:d.API_AUTH},{key:"total_storage_ingress",label:"Storage Ingress",provider:"daily-stats",category:d.API_STORAGE},{key:"total_storage_egress",label:"Storage Egress",provider:"daily-stats",category:d.API_STORAGE},{key:"total_storage_image_render_count",label:"Storage Image Transformations",provider:"daily-stats",category:d.API_STORAGE},{key:"total_storage_requests",label:"Storage Requests",provider:"daily-stats",category:d.API_STORAGE},{key:"total_storage_get_requests",label:"Storage GET Requests",provider:"daily-stats",category:d.API_STORAGE},{key:"total_storage_post_requests",label:"Storage POST Requests",provider:"daily-stats",category:d.API_STORAGE},{key:"total_storage_delete_requests",label:"Storage DELETE Requests",provider:"daily-stats",category:d.API_STORAGE},{key:"total_storage_options_requests",label:"Storage OPTIONS Requests",provider:"daily-stats",category:d.API_STORAGE},{key:"total_auth_delete_requests",label:"Auth DELETE Requests",provider:"daily-stats",category:d.API_AUTH},{key:"total_egress",label:"All Egress",provider:"daily-stats",category:d.API},{key:"total_get_requests",label:"All GET Requests",provider:"daily-stats",category:d.API},{key:"total_storage_patch_requests",label:"Storage PATCH Requests",provider:"daily-stats",category:d.API_STORAGE},{key:"total_requests",label:"All Requests",provider:"daily-stats",category:d.API},{key:"total_patch_requests",label:"All PATCH Requests",provider:"daily-stats",category:d.API},{key:"total_post_requests",label:"All POST Requests",provider:"daily-stats",category:d.API},{key:"total_ingress",label:"All Ingress",provider:"daily-stats",category:d.API},{key:"total_delete_requests",label:"All DELETE Requests",provider:"daily-stats",category:d.API},{key:"total_options_requests",label:"All OPTIONS Requests",provider:"daily-stats",category:d.API},{key:"total_supavisor_egress_bytes",label:"Shared Pooler Egress",provider:"daily-stats",category:d.SUPAVISOR}],u=[{key:"currentBillingCycle",label:"Current billing cycle",interval:"1d"},{key:"previousBillingCycle",label:"Previous billing cycle",interval:"1d"}],m=[{key:"7d",label:"Last 7 days",interval:"1d"},{key:"30d",label:"Last 30 days",interval:"1d"},{key:"startMonth",label:"This month",interval:"1d"}]},50004:(e,t,s)=>{s.d(t,{A:()=>a});let a=(0,s(84497).A)("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]])},57709:(e,t,s)=>{s.d(t,{A:()=>p,U:()=>m});var a=s(80263),n=s(53434),r=s.n(n),i=s(47330),l=s(53239),o=s(32211),d=s(42206),c=s(37263),u=s(82457);let m=e=>{var t;let{onChange:s,value:n,options:m,className:p,loading:h,currentBillingPeriodStart:x,currentBillingPeriodEnd:g,footer:f}=e,[y,j]=(0,l.useState)(n);(0,l.useEffect)(()=>{A(n)},[h]);let v=r()().startOf("month").format(o.DX),b=r()().add(1,"month").startOf("month").format(o.DX),S=r()().format(o.DX);function A(e){switch(j(e),e){case"currentBillingCycle":s({period_start:{date:r().unix(null!=x?x:0).format(o.DX),time_period:"1d"},period_end:{date:r().unix(null!=g?g:0).format(o.DX),time_period:"today"},interval:"1d"});break;case"previousBillingCycle":s({period_start:{date:r().unix(null!=x?x:0).subtract(1,"month").format(o.DX),time_period:"1d"},period_end:{date:r().unix(null!=x?x:0).format(o.DX),time_period:"today"},interval:"1d"});break;case"10m":s({period_start:{date:r()().subtract(10,"minutes").format(o.DX),time_period:"1d"},period_end:{date:S,time_period:"today"},interval:"1m"});break;case"30m":s({period_start:{date:r()().subtract(30,"minutes").format(o.DX),time_period:"1d"},period_end:{date:S,time_period:"today"},interval:"1m"});break;case"1d":s({period_start:{date:r()().subtract(24,"hour").format(o.DX),time_period:"1d"},period_end:{date:S,time_period:"today"},interval:"1h"});break;case"3h":s({period_start:{date:r()().subtract(3,"hour").format(o.DX),time_period:"3h"},period_end:{date:S,time_period:"today"},interval:"5m"});break;case"1h":s({period_start:{date:r()().subtract(1,"hour").format(o.DX),time_period:"1h"},period_end:{date:S,time_period:"today"},interval:"1m"});break;case"7d":s({period_start:{date:r()().subtract(7,"day").format(o.DX),time_period:"7d"},period_end:{date:S,time_period:"today"},interval:"1d"});break;case"30d":s({period_start:{date:r()().subtract(30,"day").format(o.DX),time_period:"30d"},period_end:{date:S,time_period:"today"},interval:"1d"});break;case"60d":s({period_start:{date:r()().subtract(60,"day").format(o.DX),time_period:"60d"},period_end:{date:S,time_period:"today"},interval:"3d"});break;case"startMonth":s({period_start:{date:v,time_period:"startMonth"},period_end:{date:b,time_period:"endMonth"},interval:"1d"});break;default:console.warn("Unknown period encountered: ".concat(e))}}return(0,a.jsxs)(d.rI,{"data-sentry-element":"DropdownMenu","data-sentry-component":"DateRangePicker","data-sentry-source-file":"DateRangePicker.tsx",children:[(0,a.jsx)(d.ty,{asChild:!0,"data-sentry-element":"DropdownMenuTrigger","data-sentry-source-file":"DateRangePicker.tsx",children:(0,a.jsx)(c.$,{type:"default",iconRight:(0,a.jsx)(i.A,{}),"data-sentry-element":"Button","data-sentry-source-file":"DateRangePicker.tsx",children:(0,a.jsx)("span",{children:y&&(null==(t=m.find(e=>e.key===y))?void 0:t.label)})})}),(0,a.jsxs)(d.SQ,{side:"bottom",align:"start",className:(0,u.cn)(!f&&"w-36",p),"data-sentry-element":"DropdownMenuContent","data-sentry-source-file":"DateRangePicker.tsx",children:[(0,a.jsx)(d.Hr,{value:y,onValueChange:e=>A(e),"data-sentry-element":"DropdownMenuRadioGroup","data-sentry-source-file":"DateRangePicker.tsx",children:m.map(e=>(0,a.jsx)(d.Ht,{value:e.key,children:e.label},e.key))}),!!f&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(d.mB,{}),f]})]})]})},p=m},60702:(e,t,s)=>{s.d(t,{O:()=>a});let a={rolesV2:e=>["organization-members",e,"roles-v2"],invitations:e=>["organization-members",e,"invitations"],invitation:(e,t)=>["organization-members",e,"invitations",t],token:(e,t)=>["organization-members",e,"token",t]}},64748:(e,t,s)=>{s.d(t,{je:()=>B,jj:()=>Q,Ii:()=>eR,I9:()=>e1,ZN:()=>tU,It:()=>sN,mr:()=>eH,_U:()=>ai});var a=s(80263),n=s(60045),r=s(25481),i=s(53434),l=s.n(i),o=s(24716),d=s(25964),c=s(46249),u=s(70883),m=s(32491),p=s.n(m),h=s(8758),x=s.n(h),g=s(53239),f=s(33425),y=s(24717),j=s(47308),v=s(80948),b=s(13933),S=s(44774),A=s(6861),N=s(98300),w=s(56259),_=s(85332),C=s(56947),E=s(48678),k=s(75681);async function T(e,t){let{slug:s,iso_timestamp_start:a,iso_timestamp_end:n}=e;if(!s)throw Error("slug is required");let{data:r,error:i}=await (0,E.Jt)("/platform/organizations/{slug}/audit",{params:{path:{slug:s},query:{iso_timestamp_start:a,iso_timestamp_end:n}},signal:t});return i&&(0,E.H4)(i),r}let D=function(e){let{enabled:t=!0,...s}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{slug:a,iso_timestamp_start:n,iso_timestamp_end:r}=e;return(0,C.I)(k.O.auditLogs(a,{date_start:n,date_end:r}),t=>{let{signal:s}=t;return T(e,s)},{enabled:t&&void 0!==a,...s})};var R=s(31041),O=s(49770),I=s(32912),P=s(19070),M=s(96773),L=s(58173),z=s(37263),F=s(84161),U=s(86677);let B=()=>{var e,t,s,i,m,h,C,E;let{slug:k}=(0,r.g)(),T=l()().utc().set("millisecond",0),[B,H]=(0,g.useState)(!0),[G,q]=(0,g.useState)({from:T.subtract(1,"day").toISOString(),to:T.toISOString()}),[Y,W]=(0,g.useState)(),[$,V]=(0,g.useState)({users:[],projects:[]}),Z=(0,P.SE)(n.aG.READ,"notifications"),{data:J}=(0,I.el)(),{data:X}=(0,O.Ad)(),{data:K}=(0,R.Q)({slug:k}),{data:Q}=(0,_.KQ)({slug:k}),{data:ee,error:et,isLoading:es,isSuccess:ea,isError:en,isRefetching:er,refetch:ei}=D({slug:k,iso_timestamp_start:G.from,iso_timestamp_end:G.to},{enabled:Z,retry:(e,t)=>!t.message.endsWith("upgrade to Team or Enterprise Plan to access audit logs."),retryOnMount:!1,refetchOnWindowFocus:!1}),el=(null!=K?K:[]).filter(e=>!e.invited_at),eo=[...null!=(s=null==Q?void 0:Q.org_scoped_roles)?s:[],...null!=(i=null==Q?void 0:Q.project_scoped_roles)?i:[]],ed=null!=(m=null==ee?void 0:ee.retention_period)?m:0,ec=null!=(h=null==ee?void 0:ee.result)?h:[],eu=null==ec||null==(t=ec.sort((e,t)=>B?Number(new Date(t.occurred_at))-Number(new Date(e.occurred_at)):Number(new Date(e.occurred_at))-Number(new Date(t.occurred_at))))||null==(e=t.filter(e=>$.users.length>0?$.users.includes(e.actor.id):e))?void 0:e.filter(e=>$.projects.length>0?$.projects.includes(e.target.metadata.project_ref||""):e),em=null==X?void 0:X.find(e=>e.slug===k),ep=l()().subtract(ed,"days"),eh=l()();return((0,g.useEffect)(()=>{let e=l()(G.from).diff(l()(G.to)),t=setInterval(()=>{let t=l()().utc().set("millisecond",0);q({from:t.add(e).toISOString(),to:t.toISOString()})},3e5);return()=>clearInterval(t)},[G.from,G.to]),Z)?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(y.Vw,{"data-sentry-element":"ScaffoldContainerLegacy","data-sentry-source-file":"AuditLogs.tsx",children:(0,a.jsxs)("div",{className:"space-y-4 flex flex-col",children:[es&&(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(w.A,{}),(0,a.jsx)(w.A,{className:"w-3/4"}),(0,a.jsx)(w.A,{className:"w-1/2"})]}),en?et.message.endsWith("upgrade to Team or Enterprise Plan to access audit logs.")?(0,a.jsxs)(M.Fc,{variant:"default",title:"Organization Audit Logs are not available on Free or Pro plans",children:[(0,a.jsx)(L.id,{}),(0,a.jsxs)("div",{className:"flex flex-col md:flex-row pt-1 gap-4",children:[(0,a.jsxs)("div",{className:"grow",children:[(0,a.jsx)(M.XL,{children:"Organization Audit Logs are not available on Free or Pro plans"}),(0,a.jsx)(M.TN,{className:"flex flex-row justify-between gap-3",children:(0,a.jsx)("p",{children:"Upgrade to Team or Enterprise to view up to 28 days of Audit Logs for your organization."})})]}),(0,a.jsx)("div",{className:"flex items-center",children:(0,a.jsx)(z.$,{type:"primary",asChild:!0,children:(0,a.jsx)(x(),{href:"/org/".concat(k,"/billing?panel=subscriptionPlan&source=auditLogs"),children:"Upgrade subscription"})})})]})]}):(0,a.jsx)(v.A,{error:et,subject:"Failed to retrieve audit logs"}):null,ea&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("p",{className:"text-xs prose",children:"Filter by"}),(0,a.jsx)(A.I,{name:"Users",options:el,labelKey:"username",valueKey:"gotrue_id",activeOptions:$.users,onSaveFilters:e=>V({...$,users:e})}),(0,a.jsx)(A.I,{name:"Projects",options:null!=(C=null==J?void 0:J.filter(e=>e.organization_id===(null==em?void 0:em.id)))?C:[],labelKey:"name",valueKey:"ref",activeOptions:$.projects,onSaveFilters:e=>V({...$,projects:e})}),(0,a.jsx)(S.l,{hideTime:!0,hideClear:!0,triggerButtonType:"dashed",triggerButtonTitle:"",from:G.from,to:G.to,minDate:ep.toDate(),maxDate:eh.toDate(),onChange:e=>{if(null!==e.from&&null!==e.to){let{from:t,to:s}=(0,U.U)(e);q({from:t,to:s})}},renderFooter:()=>(0,a.jsx)(F.Z,{showIcon:!1,type:"default",className:"w-auto mx-2 px-3 py-2",children:(0,a.jsxs)("div",{className:"text-xs text-foreground-light",children:["Your organization has a log retention period of"," ",(0,a.jsxs)("span",{className:"text-brand",children:[ed," day",ed>1?"s":""]}),". You may only view logs from"," ",l()().subtract(ed,"days").format("DD MMM YYYY")," as the earliest date."]})})}),ea&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"h-[20px] border-r border-strong !ml-4 !mr-2"}),(0,a.jsxs)("p",{className:"prose text-xs",children:["Viewing ",eu.length," logs in total"]})]})]}),(0,a.jsx)(z.$,{type:"default",disabled:es||er,icon:(0,a.jsx)(o.A,{className:er?"animate-spin":""}),onClick:()=>ei(),children:er?"Refreshing":"Refresh"})]}),0===ec.length?(0,a.jsx)("div",{className:"bg-surface-100 border rounded p-4 flex items-center justify-between",children:(0,a.jsx)("p",{className:"prose text-sm",children:"Your organization does not have any audit logs available yet"})}):ec.length>0&&0===eu.length?(0,a.jsx)("div",{className:"bg-surface-100 border rounded p-4 flex items-center justify-between",children:(0,a.jsx)("p",{className:"prose text-sm",children:"No audit logs found based on the filters applied"})}):(0,a.jsx)(j.A,{head:[(0,a.jsx)(j.A.th,{className:"py-2",children:"User"},"user"),(0,a.jsx)(j.A.th,{className:"py-2",children:"Action"},"action"),(0,a.jsx)(j.A.th,{className:"py-2",children:"Target"},"target"),(0,a.jsx)(j.A.th,{className:"py-2",children:(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("p",{children:"Date"}),(0,a.jsx)(b.G,{type:"text",className:"px-1",icon:B?(0,a.jsx)(d.A,{strokeWidth:1.5,size:14}):(0,a.jsx)(c.A,{strokeWidth:1.5,size:14}),onClick:()=>H(!B),tooltip:{content:{side:"bottom",text:B?"Sort latest first":"Sort earliest first"}}})]})},"date"),(0,a.jsx)(j.A.th,{className:"py-2"},"actions")],body:null!=(E=null==eu?void 0:eu.map(e=>{var t,s,n,r,i,o,d,c,m;let h=(null!=K?K:[]).find(t=>t.gotrue_id===e.actor.id),x=eo.find(e=>{var t;return(null==h||null==(t=h.role_ids)?void 0:t[0])===e.id}),g=null==J?void 0:J.find(t=>t.ref===e.target.metadata.project_ref),f=null==X?void 0:X.find(t=>t.slug===e.target.metadata.org_slug),y=(null==(t=e.action.metadata[0])?void 0:t.status)!==void 0,v=void 0===h?(0,a.jsx)("div",{className:"flex h-[30px] w-[30px] items-center justify-center border-2 rounded-full border-strong",children:(0,a.jsx)("p",{children:"?"})}):(null==h?void 0:h.invited_id)||(null==h?void 0:h.username)===(null==h?void 0:h.primary_email)?(0,a.jsx)("div",{className:"flex h-[30px] w-[30px] items-center justify-center border-2 rounded-full border-strong",children:(0,a.jsx)(u.A,{size:18,strokeWidth:2})}):(0,a.jsx)(p(),{alt:null==h?void 0:h.username,src:"https://github.com/".concat(null!=(s=null==h?void 0:h.username)?s:"",".png?size=80"),width:"30",height:"30",className:"border rounded-full"});return(0,a.jsxs)(j.A.tr,{onClick:()=>W(e),className:"cursor-pointer hover:!bg-alternative transition duration-100",children:[(0,a.jsx)(j.A.td,{children:(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsx)("div",{children:v}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-foreground-light",children:null!=(n=null==h?void 0:h.username)?n:"-"}),x&&(0,a.jsx)("p",{className:"mt-0.5 text-xs text-foreground-light",children:null==x?void 0:x.name})]})]})}),(0,a.jsx)(j.A.td,{className:"max-w-[250px]",children:(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[y&&(0,a.jsx)("p",{className:"bg-surface-200 rounded px-1 flex items-center justify-center text-xs font-mono border",children:e.action.metadata[0].status}),(0,a.jsx)("p",{className:"truncate",title:e.action.name,children:e.action.name})]})}),(0,a.jsxs)(j.A.td,{children:[(0,a.jsxs)("p",{className:"text-foreground-light max-w-[230px] truncate",title:null!=(i=null!=(r=null==g?void 0:g.name)?r:null==f?void 0:f.name)?i:"-",children:[(null==g?void 0:g.name)?"Project: ":(null==f?void 0:f.name)?"Organization: ":null,null!=(d=null!=(o=null==g?void 0:g.name)?o:null==f?void 0:f.name)?d:"Unknown"]}),(0,a.jsxs)("p",{className:"text-foreground-light text-xs mt-0.5 truncate",title:null!=(c=e.target.metadata.project_ref)?c:e.target.metadata.org_slug,children:[e.target.metadata.project_ref?"Ref: ":e.target.metadata.org_slug?"Slug: ":null,null!=(m=e.target.metadata.project_ref)?m:e.target.metadata.org_slug]})]}),(0,a.jsx)(j.A.td,{children:l()(e.occurred_at).format("DD MMM YYYY, HH:mm:ss")}),(0,a.jsx)(j.A.td,{align:"right",children:(0,a.jsx)(z.$,{type:"default",children:"View details"})})]},e.occurred_at)}))?E:[]})]})]})}),(0,a.jsx)(f.f,{selectedLog:Y,onClose:()=>W(void 0),"data-sentry-element":"LogDetailsPanel","data-sentry-source-file":"AuditLogs.tsx"})]}):(0,a.jsx)(y.Vw,{children:(0,a.jsx)(N.A,{resourceText:"view organization audit logs"})})};var H=s(90354);let G=()=>(0,a.jsxs)(y.gu,{"data-sentry-element":"ScaffoldSection","data-sentry-component":"DPA","data-sentry-source-file":"DPA.tsx",children:[(0,a.jsxs)(y.xp,{className:"sticky space-y-6 top-12","data-sentry-element":"ScaffoldSectionDetail","data-sentry-source-file":"DPA.tsx",children:[(0,a.jsx)("p",{className:"text-base m-0",children:"Data Processing Addendum (DPA)"}),(0,a.jsxs)("div",{className:"space-y-2 text-sm text-foreground-light m-0",children:[(0,a.jsx)("p",{children:"All organizations can access and use our DPA as part of their GDPR compliance. This is only to access the document. Please ignore this if you have sent the signed document to us."}),(0,a.jsxs)("p",{children:["Please review these details and add data specific to user processing where required. Sign and return the signed DPA document to"," ",(0,a.jsx)("a",{href:"mailto:privacy@supabase.com",target:"_blank",className:"text-brand hover:text-brand",children:"privacy@supabase.com"})," ","for the document to be considered executed."]})]})]}),(0,a.jsx)(y.Rf,{className:"flex items-center justify-center h-full","data-sentry-element":"ScaffoldSectionContent","data-sentry-source-file":"DPA.tsx",children:(0,a.jsx)(z.$,{asChild:!0,type:"default",iconRight:(0,a.jsx)(H.A,{}),"data-sentry-element":"Button","data-sentry-source-file":"DPA.tsx",children:(0,a.jsx)("a",{download:!0,target:"_blank",rel:"noreferrer noopener",href:"https://supabase.com/downloads/docs/Supabase+DPA+250314.pdf",children:"View DPA"})})})]}),q=()=>(0,a.jsxs)(y.gu,{"data-sentry-element":"ScaffoldSection","data-sentry-component":"TIA","data-sentry-source-file":"TIA.tsx",children:[(0,a.jsxs)(y.xp,{className:"sticky space-y-6 top-12","data-sentry-element":"ScaffoldSectionDetail","data-sentry-source-file":"TIA.tsx",children:[(0,a.jsx)("p",{className:"text-base m-0",children:"Transfer Impact Assessment (TIA)"}),(0,a.jsx)("div",{className:"space-y-2 text-sm text-foreground-light m-0",children:(0,a.jsx)("p",{children:"All organizations can access and use our TIA as part of their GDPR-compliant data transfer process."})})]}),(0,a.jsx)(y.Rf,{className:"flex items-center justify-center h-full","data-sentry-element":"ScaffoldSectionContent","data-sentry-source-file":"TIA.tsx",children:(0,a.jsx)("a",{href:"https://supabase.com/downloads/docs/Supabase+TIA+250314.pdf",target:"_blank",rel:"noreferrer noopener",download:!0,children:(0,a.jsx)(z.$,{type:"default",iconRight:(0,a.jsx)(H.A,{}),"data-sentry-element":"Button","data-sentry-source-file":"TIA.tsx",children:"View TIA"})})})]});var Y=s(432),W=s(73969);async function $(e,t){let{orgSlug:s,docType:a}=e;if(!s)throw Error("orgSlug is required");if("standard-security-questionnaire"===a){let{data:e,error:a}=await (0,E.Jt)("/platform/organizations/{slug}/documents/standard-security-questionnaire",{params:{path:{slug:s}},signal:t});return a&&(0,E.H4)(a),e}if("soc2-type-2-report"===a){let{data:e,error:a}=await (0,E.Jt)("/platform/organizations/{slug}/documents/soc2-type-2-report",{params:{path:{slug:s}},signal:t});if(a)throw a;return e}}var V=s(45628);let Z=()=>{let e=(0,V.a)(),t=null==e?void 0:e.slug,s=(0,P.SE)(n.aG.BILLING_READ,"stripe.subscriptions"),r=null==e?void 0:e.plan,i=async e=>{try{let t=await $({orgSlug:e,docType:"standard-security-questionnaire"});(null==t?void 0:t.fileUrl)&&window.open(t.fileUrl,"_blank")}catch(e){W.oR.error("Failed to download Security Questionnaire: ".concat(e.message))}};return(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)(y.gu,{"data-sentry-element":"ScaffoldSection","data-sentry-source-file":"SecurityQuestionnaire.tsx",children:[(0,a.jsxs)(y.xp,{className:"sticky space-y-6 top-12","data-sentry-element":"ScaffoldSectionDetail","data-sentry-source-file":"SecurityQuestionnaire.tsx",children:[(0,a.jsx)("p",{className:"text-base m-0",children:"Standard Security Questionnaire"}),(0,a.jsx)("div",{className:"space-y-2 text-sm text-foreground-light m-0",children:(0,a.jsx)("p",{children:"Organizations on Team Plan or above have access to our standard security questionnaire."})})]}),(0,a.jsx)(y.Rf,{"data-sentry-element":"ScaffoldSectionContent","data-sentry-source-file":"SecurityQuestionnaire.tsx",children:s?(0,a.jsx)(a.Fragment,{children:(0,a.jsx)("div",{className:"flex items-center justify-center h-full",children:(null==r?void 0:r.id)==="free"||(null==r?void 0:r.id)==="pro"?(0,a.jsx)(x(),{href:"/org/".concat(t,"/billing?panel=subscriptionPlan&source=securityQuestionnaire"),children:(0,a.jsx)(z.$,{type:"default",children:"Upgrade to Team"})}):(0,a.jsx)(z.$,{type:"default",icon:(0,a.jsx)(Y.A,{}),onClick:()=>{t&&i(t)},children:"Download Questionnaire"})})}):(0,a.jsx)(N.A,{resourceText:"access our security questionnaire"})})]})})};var J=s(54097);let X=()=>{let e=(0,V.a)(),t=null==e?void 0:e.slug,s=(0,P.SE)(n.aG.BILLING_READ,"stripe.subscriptions"),r=null==e?void 0:e.plan,[i,l]=(0,g.useState)(!1),o=async e=>{try{let t=await $({orgSlug:e,docType:"soc2-type-2-report"});(null==t?void 0:t.fileUrl)&&window.open(t.fileUrl,"_blank"),l(!1)}catch(e){W.oR.error("Failed to download SOC2 report: ".concat(e.message))}};return(0,a.jsxs)(y.gu,{"data-sentry-element":"ScaffoldSection","data-sentry-component":"SOC2","data-sentry-source-file":"SOC2.tsx",children:[(0,a.jsxs)(y.xp,{className:"sticky space-y-6 top-12","data-sentry-element":"ScaffoldSectionDetail","data-sentry-source-file":"SOC2.tsx",children:[(0,a.jsx)("p",{className:"text-base m-0",children:"SOC2 Type 2"}),(0,a.jsx)("div",{className:"space-y-2 text-sm text-foreground-light m-0",children:(0,a.jsx)("p",{children:"Organizations on Team Plan or above have access to our most recent SOC2 Type 2 report."})})]}),(0,a.jsxs)(y.Rf,{"data-sentry-element":"ScaffoldSectionContent","data-sentry-source-file":"SOC2.tsx",children:[s?(0,a.jsx)("div",{className:"flex items-center justify-center h-full",children:(null==r?void 0:r.id)==="free"||(null==r?void 0:r.id)==="pro"?(0,a.jsx)(x(),{href:"/org/".concat(t,"/billing?panel=subscriptionPlan&source=soc2"),children:(0,a.jsx)(z.$,{type:"default",children:"Upgrade to Team"})}):(0,a.jsx)(z.$,{type:"default",icon:(0,a.jsx)(Y.A,{}),onClick:()=>l(!0),children:"Download SOC2 Type 2 Report"})}):(0,a.jsx)(N.A,{resourceText:"access our SOC2 Type 2 report"}),(0,a.jsx)(J.A,{visible:i,size:"large",title:"Non-Disclosure Agreement to access Supabase's SOC2 Report",confirmLabel:"I agree",confirmLabelLoading:"Downloading",onCancel:()=>l(!1),onConfirm:()=>{t&&o(t)},"data-sentry-element":"ConfirmationModal","data-sentry-source-file":"SOC2.tsx",children:(0,a.jsxs)("ol",{className:"list-decimal list-inside text-sm text-foreground-light pl-30",children:[(0,a.jsx)("li",{children:"The information that you are about to access is confidential."}),(0,a.jsx)("li",{children:'Your access to our SOC 2 materials is governed by confidentiality obligations contained in the agreement between Supabase, Inc ("Supabase", "we", "our" or "us") and the Supabase customer that has authorized you to access our platform to obtain this information (our "Customer").'}),(0,a.jsx)("li",{children:"You must ensure that you treat the information in our SOC 2 materials in accordance with those confidentiality obligations, as communicated to you by the Customer."}),(0,a.jsxs)("li",{children:['By clicking "I agree" below or otherwise accessing our SOC 2 materials, you:',(0,a.jsxs)("ol",{className:"list-[lower-roman] list-inside pl-4",children:[(0,a.jsx)("li",{children:"acknowledge that you have read and understood this Confidentiality Notice;"}),(0,a.jsx)("li",{children:"confirm that you have been authorized by the Customer to access this information, and your use of our SOC 2 materials is subject to the confidentiality obligations owed by the Customer to us."})]})]}),(0,a.jsx)("li",{children:"This Confidentiality Notice does not substitute or supersede any agreement between us and the Customer, or any internal rules or policies that the Customer requires you to comply with in your access to and use of confidential information. However, your failure to comply with this Confidentiality Notice may be used to determine whether the Customer has complied with its confidentiality obligations to us."})]})})]})]})},K=()=>(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)(y.gu,{"data-sentry-element":"ScaffoldSection","data-sentry-source-file":"HIPAA.tsx",children:[(0,a.jsxs)(y.xp,{className:"sticky space-y-6 top-12","data-sentry-element":"ScaffoldSectionDetail","data-sentry-source-file":"HIPAA.tsx",children:[(0,a.jsx)("p",{className:"text-base m-0",children:"HIPAA"}),(0,a.jsxs)("div",{className:"space-y-2 text-sm text-foreground-light m-0",children:[(0,a.jsx)("p",{children:"This is only for HIPAA requests. Please ignore this if you already have HIPAA enabled."}),(0,a.jsx)("p",{children:"Organizations on the Team Plan or above are eligible for a paid HIPAA compliance add-on. You can submit a request here and we will get back to you on the pricing and process for your use case."}),(0,a.jsx)("p",{children:"Organizations on the Free or Pro Plan can also submit a request for HIPAA. Note that you are still required to upgrade to the Team Plan after your request is approved."})]})]}),(0,a.jsx)(y.Rf,{"data-sentry-element":"ScaffoldSectionContent","data-sentry-source-file":"HIPAA.tsx",children:(0,a.jsx)("div",{className:"flex items-center justify-center h-full",children:(0,a.jsx)("a",{href:"https://forms.supabase.com/hipaa2",target:"_blank",rel:"noreferrer noopener",children:(0,a.jsx)(z.$,{type:"default",iconRight:(0,a.jsx)(H.A,{}),"data-sentry-element":"Button","data-sentry-source-file":"HIPAA.tsx",children:"Request HIPAA"})})})})]})}),Q=()=>(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(y.eh,{id:"dpa","data-sentry-element":"ScaffoldContainer","data-sentry-source-file":"Documents.tsx",children:(0,a.jsx)(G,{"data-sentry-element":"DPA","data-sentry-source-file":"Documents.tsx"})}),(0,a.jsx)(y.cJ,{"data-sentry-element":"ScaffoldDivider","data-sentry-source-file":"Documents.tsx"}),(0,a.jsx)(y.eh,{id:"tia","data-sentry-element":"ScaffoldContainer","data-sentry-source-file":"Documents.tsx",children:(0,a.jsx)(q,{"data-sentry-element":"TIA","data-sentry-source-file":"Documents.tsx"})}),(0,a.jsx)(y.cJ,{"data-sentry-element":"ScaffoldDivider","data-sentry-source-file":"Documents.tsx"}),(0,a.jsx)(y.eh,{id:"soc2","data-sentry-element":"ScaffoldContainer","data-sentry-source-file":"Documents.tsx",children:(0,a.jsx)(X,{"data-sentry-element":"SOC2","data-sentry-source-file":"Documents.tsx"})}),(0,a.jsx)(y.cJ,{"data-sentry-element":"ScaffoldDivider","data-sentry-source-file":"Documents.tsx"}),(0,a.jsx)(y.eh,{id:"hipaa","data-sentry-element":"ScaffoldContainer","data-sentry-source-file":"Documents.tsx",children:(0,a.jsx)(K,{"data-sentry-element":"HIPAA","data-sentry-source-file":"Documents.tsx"})}),(0,a.jsx)(y.cJ,{"data-sentry-element":"ScaffoldDivider","data-sentry-source-file":"Documents.tsx"}),(0,a.jsx)(y.eh,{id:"security-questionnaire","data-sentry-element":"ScaffoldContainer","data-sentry-source-file":"Documents.tsx",children:(0,a.jsx)(Z,{"data-sentry-element":"SecurityQuestionnaire","data-sentry-source-file":"Documents.tsx"})}),(0,a.jsx)(y.cJ,{"data-sentry-element":"ScaffoldDivider","data-sentry-source-file":"Documents.tsx"}),(0,a.jsx)(y.eh,{"data-sentry-element":"ScaffoldContainer","data-sentry-source-file":"Documents.tsx",children:(0,a.jsx)(y.gu,{"data-sentry-element":"ScaffoldSection","data-sentry-source-file":"Documents.tsx",children:(0,a.jsxs)("p",{className:"sticky space-y-6 top-12 text-sm text-foreground-light m-0 whitespace-nowrap",children:[(0,a.jsx)(x(),{href:"/support/new",className:"hover:underline","data-sentry-element":"Link","data-sentry-source-file":"Documents.tsx",children:"Submit a support request"})," ","if you require additional documents for financial or tax reasons, such as a W-9 form."]})})})]}),ee=e=>{var t;let{organization:s}=e,{data:n}=(0,I.el)({});return(null!=(t=null==n?void 0:n.filter(e=>e.organization_id===(null==s?void 0:s.id)).length)?t:0)>0||(null==s?void 0:s.plan)===void 0||"free"===s.plan.id||"enterprise"===s.plan.id?null:(0,a.jsx)(F.Z,{type:"default",title:"Your organization is on the ".concat(s.plan.name," plan with no projects running"),description:(0,a.jsxs)("div",{className:"!max-w-full prose text-sm",children:["The monthly fees for the paid plan still apply. To cancel your subscription, head over to your"," ",(0,a.jsx)(x(),{href:"/org/".concat(null==s?void 0:s.slug,"/billing"),children:"organization billing settings"})]}),"data-sentry-element":"Admonition","data-sentry-component":"NoProjectsOnPaidOrgInfo","data-sentry-source-file":"NoProjectsOnPaidOrgInfo.tsx"})};var et=s(11789),es=s(57073),ea=s(87355),en=s(32144),er=s(80251),ei=s(56681);async function el(e){let{slug:t}=e,{data:s,error:a}=await (0,E.yH)("/platform/organizations/{slug}",{params:{path:{slug:t}}});return a&&(0,E.H4)(a),s}let eo=function(){let{onSuccess:e,onError:t,...s}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=(0,en.jE)();return(0,er.n)(e=>el(e),{async onSuccess(t,s,n){await Promise.all([a.invalidateQueries(k.O.list()),a.invalidateQueries(ei.Q.list())]),await (null==e?void 0:e(t,s,n))},async onError(e,s,a){void 0===t?W.oR.error("Failed to delete organization: ".concat(e.message)):t(e,s,a)},...s})};var ed=s(19214),ec=s(94277),eu=s(12523),em=s(93057);let ep=()=>{let e=(0,ea.useRouter)(),t=(0,V.a)(),{slug:s,name:i}=null!=t?t:{},[l,o]=(0,g.useState)(!1),[d,c]=(0,g.useState)(""),[u,m]=(0,ed.U)(r.rS.LAST_VISITED_ORGANIZATION,""),p=(0,P.SE)(n.aG.UPDATE,"organizations"),{mutate:h,isLoading:x}=eo({onSuccess:()=>{W.oR.success("Successfully deleted ".concat(i)),m(""),e.push("/organizations")}}),f=async e=>p?s?void h({slug:s}):console.error("Org slug is required"):W.oR.error("You do not have the required permissions to delete this organization");return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"mt-2",children:(0,a.jsx)(z.$,{loading:!s,onClick:()=>o(!0),type:"danger","data-sentry-element":"Button","data-sentry-source-file":"DeleteOrganizationButton.tsx",children:"Delete organization"})}),(0,a.jsx)(ec.A,{hideFooter:!0,size:"small",visible:l,onCancel:()=>o(!1),header:(0,a.jsxs)("div",{className:"flex items-baseline gap-2",children:[(0,a.jsx)("span",{children:"Delete organization"}),(0,a.jsx)("span",{className:"text-xs text-foreground-lighter",children:"Are you sure?"})]}),"data-sentry-element":"Modal","data-sentry-source-file":"DeleteOrganizationButton.tsx",children:(0,a.jsx)(eu.A,{validateOnBlur:!0,initialValues:{orgName:""},onSubmit:f,validate:e=>{let t={};return e.orgName||(t.orgName="Enter the name of the organization."),e.orgName.trim()!==(null==s?void 0:s.trim())&&(t.orgName="Value entered does not match the value above."),t},"data-sentry-element":"Form","data-sentry-source-file":"DeleteOrganizationButton.tsx",children:()=>(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(ec.A.Content,{children:(0,a.jsxs)("p",{className:"text-sm text-foreground-lighter",children:["This action ",(0,a.jsx)("span",{className:"text-foreground",children:"cannot"})," be undone. This will permanently delete the ",(0,a.jsx)("span",{className:"text-foreground",children:i})," ","organization and remove all of its projects."]})}),(0,a.jsx)(ec.A.Separator,{}),(0,a.jsx)(ec.A.Content,{children:(0,a.jsx)(em.A,{id:"orgName",label:(0,a.jsxs)("span",{children:["Please type ",(0,a.jsx)("span",{className:"font-bold",children:s})," to confirm"]}),onChange:e=>c(e.target.value),value:d,placeholder:"Enter the string above",className:"w-full"})}),(0,a.jsx)(ec.A.Separator,{}),(0,a.jsx)(ec.A.Content,{children:(0,a.jsx)(z.$,{block:!0,size:"small",type:"danger",htmlType:"submit",loading:x,disabled:x,children:"I understand, delete this organization"})})]})})})]})},eh=()=>{let e=(0,V.a)();return(0,a.jsxs)(y.gu,{isFullWidth:!0,"data-sentry-element":"ScaffoldSection","data-sentry-component":"OrganizationDeletePanel","data-sentry-source-file":"OrganizationDeletePanel.tsx",children:[(0,a.jsx)(y.sZ,{className:"mb-4","data-sentry-element":"ScaffoldSectionTitle","data-sentry-source-file":"OrganizationDeletePanel.tsx",children:"Danger Zone"}),(null==e?void 0:e.managed_by)!=="vercel-marketplace"?(0,a.jsx)(F.Z,{type:"destructive",title:"Deleting this organization will also remove its projects",description:"Make sure you have made a backup of your projects if you want to keep your data",children:(0,a.jsx)(ep,{})}):(0,a.jsx)(es.A,{partner:"vercel-marketplace",resource:"Organizations",cta:{installationId:null==e?void 0:e.partner_id,path:"/settings",message:"Delete organization in Vercel Marketplace"}})]})};var ex=s(75607),eg=s(21357),ef=s(65475),ey=s(67963),ej=s(35443),ev=s(30587);let eb=()=>{let e=(0,ef._P)("newOrgAiOptIn"),{form:t,onSubmit:s,isUpdating:r,currentOptInLevel:i}=(0,eg.G)(),l=(0,P.SE)(n.aG.UPDATE,"organizations");return(0,g.useEffect)(()=>{t.reset({aiOptInLevel:i})},[i,t]),(0,a.jsx)(ey.lV,{...t,"data-sentry-element":"Form_Shadcn_","data-sentry-component":"DataPrivacyForm","data-sentry-source-file":"DataPrivacyForm.tsx",children:(0,a.jsx)("form",{id:"org-privacy-form",onSubmit:t.handleSubmit(s),children:(0,a.jsxs)(ej.Zp,{"data-sentry-element":"Card","data-sentry-source-file":"DataPrivacyForm.tsx",children:[(0,a.jsx)(ej.Wu,{className:"pt-6","data-sentry-element":"CardContent","data-sentry-source-file":"DataPrivacyForm.tsx",children:(0,a.jsx)(ev.c,{control:t.control,disabled:!l||!e||r,layout:"flex-row-reverse",label:"Supabase Assistant Opt-in Level","data-sentry-element":"AIOptInLevelSelector","data-sentry-source-file":"DataPrivacyForm.tsx"})}),(0,a.jsx)(ej.wL,{className:"flex justify-end p-4 md:px-8","data-sentry-element":"CardFooter","data-sentry-source-file":"DataPrivacyForm.tsx",children:(0,a.jsx)(ex.I,{form:"org-privacy-form",isSubmitting:r,hasChanges:t.formState.isDirty,handleReset:()=>t.reset(),helper:l?void 0:"You need additional permissions to manage this organization's settings",disabled:!l,"data-sentry-element":"FormActions","data-sentry-source-file":"DataPrivacyForm.tsx"})})]})})})};var eS=s(32981),eA=s(87494),eN=s(39353),ew=s(83907),e_=s(14200),eC=s(93263),eE=s(24995),ek=s(87916);let eT=eN.Ik({name:eN.Yj().min(1,"Organization name is required")}),eD=()=>{var e,t,s;let{slug:i}=(0,r.g)(),l=(0,en.jE)(),o=(0,V.a)(),d=(0,P.SE)(n.aG.UPDATE,"organizations"),{mutate:c,isLoading:u}=(0,e_.N)(),m=(0,eA.mN)({resolver:(0,eS.u)(eT),defaultValues:{name:null!=(e=null==o?void 0:o.name)?e:""}}),p=async e=>d?i?void c({slug:i,name:e.name},{onSuccess:()=>{(0,O.Ul)(l),W.oR.success("Successfully updated organization name")},onError:e=>{W.oR.error("Failed to update organization name: ".concat(e.message))}}):console.error("Slug is required"):W.oR.error("You do not have the required permissions to update this organization");return(0,g.useEffect)(()=>{if(o&&!u){var e;m.reset({name:null!=(e=o.name)?e:""})}},[o,m,u]),(0,a.jsx)(ey.lV,{...m,"data-sentry-element":"Form_Shadcn_","data-sentry-component":"OrganizationDetailsForm","data-sentry-source-file":"OrganizationDetailsForm.tsx",children:(0,a.jsx)("form",{id:"org-details-form",onSubmit:m.handleSubmit(p),children:(0,a.jsxs)(ej.Zp,{"data-sentry-element":"Card","data-sentry-source-file":"OrganizationDetailsForm.tsx",children:[(0,a.jsx)(ej.Wu,{className:"pt-6","data-sentry-element":"CardContent","data-sentry-source-file":"OrganizationDetailsForm.tsx",children:(0,a.jsx)(ey.zB,{control:m.control,name:"name",render:e=>{let{field:t}=e;return(0,a.jsx)(ek.M,{label:"Organization name",layout:"flex-row-reverse",children:(0,a.jsx)(ey.MJ,{children:(0,a.jsx)(eC.p,{...t,className:"w-96 max-w-full",disabled:!d||u})})})},"data-sentry-element":"FormField_Shadcn_","data-sentry-source-file":"OrganizationDetailsForm.tsx"})}),(0,a.jsx)(ej.Wu,{"data-sentry-element":"CardContent","data-sentry-source-file":"OrganizationDetailsForm.tsx",children:(0,a.jsx)(ek.M,{label:"Organization slug",layout:"flex-row-reverse","data-sentry-element":"FormItemLayout","data-sentry-source-file":"OrganizationDetailsForm.tsx",children:(0,a.jsx)(eE.j,{postTab:(0,a.jsx)(ew.A,{type:"text",iconOnly:!0,text:null!=(t=null==o?void 0:o.slug)?t:""}),"data-sentry-element":"PrePostTab","data-sentry-source-file":"OrganizationDetailsForm.tsx",children:(0,a.jsx)(eC.p,{disabled:!0,className:"w-64 max-w-full",id:"slug",value:null!=(s=null==o?void 0:o.slug)?s:"","data-sentry-element":"Input","data-sentry-source-file":"OrganizationDetailsForm.tsx"})})})}),(0,a.jsx)(ej.wL,{className:"flex justify-end p-4 md:px-8","data-sentry-element":"CardFooter","data-sentry-source-file":"OrganizationDetailsForm.tsx",children:(0,a.jsx)(ex.I,{form:"org-details-form",isSubmitting:u,hasChanges:m.formState.isDirty,handleReset:()=>m.reset(),helper:d?void 0:"You need additional permissions to manage this organization's settings",disabled:!d,"data-sentry-element":"FormActions","data-sentry-source-file":"OrganizationDetailsForm.tsx"})})]})})})},eR=()=>{let e=(0,et.x)("organizations:delete"),t=(0,P.SE)(n.aG.UPDATE,"organizations");return(0,a.jsxs)(y.eh,{"data-sentry-element":"ScaffoldContainer","data-sentry-component":"GeneralSettings","data-sentry-source-file":"GeneralSettings.tsx",children:[(0,a.jsx)(ee,{"data-sentry-element":"NoProjectsOnPaidOrgInfo","data-sentry-source-file":"GeneralSettings.tsx"}),(0,a.jsxs)(y.gu,{isFullWidth:!0,"data-sentry-element":"ScaffoldSection","data-sentry-source-file":"GeneralSettings.tsx",children:[(0,a.jsx)(y.sZ,{className:"mb-4","data-sentry-element":"ScaffoldSectionTitle","data-sentry-source-file":"GeneralSettings.tsx",children:"Organization Details"}),(0,a.jsx)(eD,{"data-sentry-element":"OrganizationDetailsForm","data-sentry-source-file":"GeneralSettings.tsx"})]}),(0,a.jsxs)(y.gu,{isFullWidth:!0,"data-sentry-element":"ScaffoldSection","data-sentry-source-file":"GeneralSettings.tsx",children:[(0,a.jsx)(y.sZ,{className:"mb-4","data-sentry-element":"ScaffoldSectionTitle","data-sentry-source-file":"GeneralSettings.tsx",children:"Data Privacy"}),(0,a.jsx)(eb,{"data-sentry-element":"DataPrivacyForm","data-sentry-source-file":"GeneralSettings.tsx"})]}),e&&t&&(0,a.jsx)(eh,{})]})};var eO=s(26455);async function eI(e){let{slug:t,setEnforced:s}=e;if(!t)throw Error("Slug is required");let{data:a,error:n}=await (0,E.F6)("/platform/organizations/{slug}/members/mfa/enforcement",{params:{path:{slug:t}},body:{enforced:s}});return n&&(0,E.H4)(n),a}let eP=function(){let{onSuccess:e,onError:t,...s}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=(0,en.jE)();return(0,er.n)(e=>eI(e),{async onSuccess(t,s,n){let{slug:r}=s;a.setQueryData(k.O.mfa(r),t.enforced),await (null==e?void 0:e(t,s,n))},async onError(e,s,a){void 0===t?W.oR.error("Failed to update MFA enforcement: ".concat(e.message)):t(e,s,a)},...s})};async function eM(e,t){let{slug:s}=e;if(!s)throw Error("slug is required");let{data:a,error:n}=await (0,E.Jt)("/platform/organizations/{slug}/members/mfa/enforcement",{params:{path:{slug:s}},signal:t});return n&&(0,E.H4)(n),null==a?void 0:a.enforced}let eL=function(e){let{slug:t}=e,{enabled:s=!0,...a}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,C.I)(k.O.mfa(t),e=>{let{signal:s}=e;return eM({slug:t},s)},{enabled:s&&void 0!==t,...a})};var ez=s(27528),eF=s(85462),eU=s(64477);let eB=eN.z.object({enforceMfa:eN.z.boolean()}),eH=()=>{var e;let{slug:t}=(0,r.g)(),{profile:s}=(0,ez.xc)(),i=(0,V.a)(),{data:l}=(0,R.Q)({slug:t}),o=(0,P.SE)(n.aG.READ,"organizations"),d=(0,P.SE)(n.aG.UPDATE,"organizations"),c=(null==i?void 0:i.plan.id)!=="free",{data:u,error:m,isLoading:p,isError:h,isSuccess:f}=eL({slug:t},{enabled:o}),{mutate:j,isLoading:b}=eP({onError:e=>{W.oR.error("Failed to update MFA enforcement: ".concat(e.message)),void 0!==u&&S.reset({enforceMfa:u})},onSuccess:e=>{W.oR.success("Successfully updated organization MFA settings")}}),S=(0,eA.mN)({resolver:(0,eS.u)(eB),defaultValues:{enforceMfa:!1}});(0,g.useEffect)(()=>{void 0!==u&&S.reset({enforceMfa:u})},[u,S]);let A=(null==l||null==(e=l.find(e=>e.primary_email==(null==s?void 0:s.primary_email)))?void 0:e.mfa_enabled)||!1;return o?(0,a.jsxs)(y.Vw,{"data-sentry-element":"ScaffoldContainerLegacy","data-sentry-component":"SecuritySettings","data-sentry-source-file":"SecuritySettings.tsx",children:[!c&&(0,a.jsxs)(M.Fc,{variant:"default",title:"Organization MFA enforcement is not available on Free plan",children:[(0,a.jsx)(L.id,{}),(0,a.jsxs)("div",{className:"flex flex-col md:flex-row pt-1 gap-4",children:[(0,a.jsxs)("div",{className:"grow",children:[(0,a.jsx)(M.XL,{children:"Organization MFA enforcement is not available on Free plan"}),(0,a.jsx)(M.TN,{className:"flex flex-row justify-between gap-3",children:(0,a.jsx)("p",{children:"Upgrade to Pro or above to enforce MFA requirements for your organization."})})]}),(0,a.jsx)("div",{className:"flex items-center",children:(0,a.jsx)(z.$,{type:"primary",asChild:!0,children:(0,a.jsx)(x(),{href:"/org/".concat(t,"/billing?panel=subscriptionPlan&source=mfa"),children:"Upgrade subscription"})})})]})]}),(h||m)&&c&&(0,a.jsx)(v.A,{error:m,subject:"Failed to retrieve MFA enforcement status"}),p&&(0,a.jsx)(ej.Zp,{children:(0,a.jsx)(ej.Wu,{children:(0,a.jsx)(w.y,{})})}),f&&c&&(0,a.jsx)(ey.lV,{...S,children:(0,a.jsx)("form",{onSubmit:S.handleSubmit(e=>{t&&c&&j({slug:t,setEnforced:e.enforceMfa})}),children:(0,a.jsxs)(ej.Zp,{children:[(0,a.jsx)(ej.Wu,{children:(0,a.jsx)(ey.zB,{control:S.control,name:"enforceMfa",render:e=>{let{field:t}=e;return(0,a.jsx)(ek.M,{layout:"flex-row-reverse",label:"Require MFA to access organization",description:"Team members must have MFA enabled and a valid MFA session to access the organization and any projects.",children:(0,a.jsx)(ey.MJ,{children:(0,a.jsxs)(eF.m_,{children:[(0,a.jsx)(eF.k$,{asChild:!0,children:(0,a.jsx)("div",{children:(0,a.jsx)(eU.d,{checked:t.value,onCheckedChange:t.onChange,disabled:!c||!d||!A||b})})}),(!d||!A)&&(0,a.jsx)(eF.ZI,{side:"bottom",children:d?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(eO.g,{href:"/account/security",children:"Enable MFA"})," on your own account first"]}):"You don't have permission to update MFA settings"})]})})})}})}),(0,a.jsxs)(ej.wL,{className:"justify-end space-x-2",children:[S.formState.isDirty&&(0,a.jsx)(z.$,{type:"default",disabled:p||b,onClick:()=>S.reset({enforceMfa:!!c&&u}),children:"Cancel"}),(0,a.jsx)(z.$,{type:"primary",htmlType:"submit",disabled:!c||!d||b||p||!S.formState.isDirty,loading:b,children:"Save changes"})]})]})})})]}):(0,a.jsx)(y.Vw,{children:(0,a.jsx)(N.A,{resourceText:"view organization security settings"})})};var eG=s(65144),eq=s(63809),eY=s(92517),eW=s(75198),e$=s(15910),eV=s(20218),eZ=s(32211),eJ=s(82868),eX=s(36710),eK=s(62366),eQ=s(27488);let e0=e=>{let{title:t}=e;return(0,a.jsx)("img",{className:"border rounded-lg shadow w-full sm:w-48 mt-6 border-body",src:"".concat(eZ.o2,"/img/integrations/covers/").concat(t,"-cover.png"),alt:"".concat(t," cover"),"data-sentry-component":"IntegrationImageHandler","data-sentry-source-file":"IntegrationSettings.tsx"})},e1=()=>{let e=(0,V.a)(),t=(0,ea.useRouter)(),s=(0,P.SE)(n.aG.READ,"integrations.github_connections"),r=(0,P.SE)(n.aG.CREATE,"integrations.github_connections"),i=(0,P.SE)(n.aG.UPDATE,"integrations.github_connections"),{data:l}=(0,eW.m)(),{data:o}=(0,eV.O)({organizationId:null==e?void 0:e.id}),{mutate:d}=(0,e$.L)({onSuccess:()=>{W.oR.success("Successfully deleted Github connection")}}),c=(0,eX.bZ)(),u=(0,g.useCallback)(()=>{t.push("/project/_/settings/integrations")},[c]),m=(0,g.useCallback)(async t=>{if(!(null==e?void 0:e.id))return void W.oR.error("Organization not found");d({connectionId:t.id,organizationId:e.id})},[d,null==e?void 0:e.id]),p=l?"You are authorized with Supabase GitHub App. You can configure your GitHub App installations and repository access [here](".concat(eJ.CH,"). You can revoke your authorization [here](").concat(eJ.oC,")."):"";return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(y.Vw,{"data-sentry-element":"ScaffoldContainerLegacy","data-sentry-source-file":"IntegrationSettings.tsx",children:(0,a.jsx)(y.Dm,{"data-sentry-element":"ScaffoldTitle","data-sentry-source-file":"IntegrationSettings.tsx",children:"Integrations"})}),(0,a.jsx)(()=>(0,a.jsx)(y.eh,{"data-sentry-element":"ScaffoldContainer","data-sentry-component":"GitHubSection","data-sentry-source-file":"IntegrationSettings.tsx",children:(0,a.jsxs)(y.gu,{"data-sentry-element":"ScaffoldSection","data-sentry-source-file":"IntegrationSettings.tsx",children:[(0,a.jsxs)(y.xp,{title:"GitHub Connections","data-sentry-element":"ScaffoldSectionDetail","data-sentry-source-file":"IntegrationSettings.tsx",children:[(0,a.jsx)(eq.o,{content:"\nConnect any of your GitHub repositories to a project.\n","data-sentry-element":"Markdown","data-sentry-source-file":"IntegrationSettings.tsx"}),(0,a.jsx)(e0,{title:"github","data-sentry-element":"IntegrationImageHandler","data-sentry-source-file":"IntegrationSettings.tsx"})]}),(0,a.jsx)(y.Rf,{"data-sentry-element":"ScaffoldSectionContent","data-sentry-source-file":"IntegrationSettings.tsx",children:s?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(eq.o,{content:"\n\n### How will GitHub connections work?\n\nYou will be able to connect a GitHub repository to a Supabase project.\nThe GitHub app will watch for changes in your repository such as file changes, branch changes as well as pull request activity.\n"}),(0,a.jsx)("ul",{className:"flex flex-col gap-y-2",children:null==o?void 0:o.map(e=>{var t,s,n,r,l;return(0,a.jsx)(eK.S,{disabled:!i,connection:{id:String(e.id),added_by:{id:String(null==(t=e.user)?void 0:t.id),primary_email:null!=(r=null==(s=e.user)?void 0:s.primary_email)?r:"",username:null!=(l=null==(n=e.user)?void 0:n.username)?l:""},foreign_project_id:String(e.repository.id),supabase_project_ref:e.project.ref,organization_integration_id:"unused",inserted_at:e.inserted_at,updated_at:e.updated_at,metadata:{name:e.repository.name}},type:"GitHub",onDeleteConnection:m},e.id)})}),(0,a.jsx)(eG.MJ,{onClick:u,showNode:!1,disabled:!r,children:"Add new project connection"}),p&&(0,a.jsx)(eq.o,{extLinks:!0,content:p,className:"text-foreground-lighter"})]}):(0,a.jsx)(N.A,{resourceText:"view this organization's GitHub connections"})})]})}),{"data-sentry-element":"GitHubSection","data-sentry-source-file":"IntegrationSettings.tsx"}),(0,a.jsx)(y.cJ,{"data-sentry-element":"ScaffoldDivider","data-sentry-source-file":"IntegrationSettings.tsx"}),(0,a.jsx)(eY.A,{isProjectScoped:!1,"data-sentry-element":"VercelSection","data-sentry-source-file":"IntegrationSettings.tsx"}),(0,a.jsx)(eQ.A,{"data-sentry-element":"SidePanelVercelProjectLinker","data-sentry-source-file":"IntegrationSettings.tsx"})]})};s(6654);var e2=s(25344),e4=s(33202),e3=s.n(e4),e9=s(71275),e5=s(45982),e6=s(86165),e8=s(78131);let e7=e=>{let{visible:t,onHide:s}=e;return(0,a.jsxs)(ec.A,{hideFooter:!0,visible:t,size:"xlarge",header:(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("span",{children:"Spend Cap"}),(0,a.jsx)(e6.A,{href:"https://supabase.com/docs/guides/platform/cost-control#spend-cap"})]}),showCloseButton:!1,onCancel:()=>s(),"data-sentry-element":"Modal","data-sentry-component":"SpendCapModal","data-sentry-source-file":"SpendCapModal.tsx",children:[(0,a.jsx)(ec.A.Content,{"data-sentry-element":"unknown","data-sentry-source-file":"SpendCapModal.tsx",children:(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("p",{className:"text-sm",children:"Enabling the Spend Cap limits your usage to your plan's quota, which controls costs but can restrict your service. Disabling the spend cap removes these limits, but any extra usage beyond the plan's limit will be charged per usage."}),(0,a.jsx)("p",{className:"text-sm",children:"Launching additional projects or enabling project add-ons will incur additional monthly fees independent of your Spend Cap."}),(0,a.jsxs)(e8.XI,{"data-sentry-element":"Table","data-sentry-source-file":"SpendCapModal.tsx",children:[(0,a.jsx)(e8.A0,{className:"[&_th]:h-7","data-sentry-element":"TableHeader","data-sentry-source-file":"SpendCapModal.tsx",children:(0,a.jsxs)(e8.Hj,{"data-sentry-element":"TableRow","data-sentry-source-file":"SpendCapModal.tsx",children:[(0,a.jsx)(e8.nd,{className:"w-[50%]","data-sentry-element":"TableHead","data-sentry-source-file":"SpendCapModal.tsx",children:"Item"}),(0,a.jsx)(e8.nd,{className:"w-[25%]","data-sentry-element":"TableHead","data-sentry-source-file":"SpendCapModal.tsx",children:"Limit"}),(0,a.jsx)(e8.nd,{className:"w-[25%]","data-sentry-element":"TableHead","data-sentry-source-file":"SpendCapModal.tsx",children:"Rate"})]})}),(0,a.jsxs)(e8.BF,{className:"[&_td]:py-2","data-sentry-element":"TableBody","data-sentry-source-file":"SpendCapModal.tsx",children:[(0,a.jsxs)(e8.Hj,{"data-sentry-element":"TableRow","data-sentry-source-file":"SpendCapModal.tsx",children:[(0,a.jsx)(e8.nA,{"data-sentry-element":"TableCell","data-sentry-source-file":"SpendCapModal.tsx",children:"Disk Size"}),(0,a.jsx)(e8.nA,{"data-sentry-element":"TableCell","data-sentry-source-file":"SpendCapModal.tsx",children:"8 GB per project"}),(0,a.jsx)(e8.nA,{translate:"no","data-sentry-element":"TableCell","data-sentry-source-file":"SpendCapModal.tsx",children:"$0.125 per GB"})]}),(0,a.jsxs)(e8.Hj,{"data-sentry-element":"TableRow","data-sentry-source-file":"SpendCapModal.tsx",children:[(0,a.jsx)(e8.nA,{"data-sentry-element":"TableCell","data-sentry-source-file":"SpendCapModal.tsx",children:"Egress"}),(0,a.jsx)(e8.nA,{"data-sentry-element":"TableCell","data-sentry-source-file":"SpendCapModal.tsx",children:"250 GB"}),(0,a.jsx)(e8.nA,{translate:"no","data-sentry-element":"TableCell","data-sentry-source-file":"SpendCapModal.tsx",children:"$0.09 per GB"})]}),(0,a.jsxs)(e8.Hj,{"data-sentry-element":"TableRow","data-sentry-source-file":"SpendCapModal.tsx",children:[(0,a.jsx)(e8.nA,{"data-sentry-element":"TableCell","data-sentry-source-file":"SpendCapModal.tsx",children:"Auth MAUs"}),(0,a.jsx)(e8.nA,{"data-sentry-element":"TableCell","data-sentry-source-file":"SpendCapModal.tsx",children:"100,000"}),(0,a.jsx)(e8.nA,{translate:"no","data-sentry-element":"TableCell","data-sentry-source-file":"SpendCapModal.tsx",children:"$0.00325 per user"})]}),(0,a.jsxs)(e8.Hj,{"data-sentry-element":"TableRow","data-sentry-source-file":"SpendCapModal.tsx",children:[(0,a.jsx)(e8.nA,{"data-sentry-element":"TableCell","data-sentry-source-file":"SpendCapModal.tsx",children:"Auth Third-Party MAUs"}),(0,a.jsx)(e8.nA,{"data-sentry-element":"TableCell","data-sentry-source-file":"SpendCapModal.tsx",children:"100,000"}),(0,a.jsx)(e8.nA,{translate:"no","data-sentry-element":"TableCell","data-sentry-source-file":"SpendCapModal.tsx",children:"$0.00325 per user"})]}),(0,a.jsxs)(e8.Hj,{"data-sentry-element":"TableRow","data-sentry-source-file":"SpendCapModal.tsx",children:[(0,a.jsx)(e8.nA,{"data-sentry-element":"TableCell","data-sentry-source-file":"SpendCapModal.tsx",children:"Auth Single Sign-On MAUs"}),(0,a.jsx)(e8.nA,{"data-sentry-element":"TableCell","data-sentry-source-file":"SpendCapModal.tsx",children:"50"}),(0,a.jsx)(e8.nA,{translate:"no","data-sentry-element":"TableCell","data-sentry-source-file":"SpendCapModal.tsx",children:"$0.015 per user"})]}),(0,a.jsxs)(e8.Hj,{"data-sentry-element":"TableRow","data-sentry-source-file":"SpendCapModal.tsx",children:[(0,a.jsx)(e8.nA,{"data-sentry-element":"TableCell","data-sentry-source-file":"SpendCapModal.tsx",children:"Storage Size"}),(0,a.jsx)(e8.nA,{"data-sentry-element":"TableCell","data-sentry-source-file":"SpendCapModal.tsx",children:"100 GB"}),(0,a.jsx)(e8.nA,{translate:"no","data-sentry-element":"TableCell","data-sentry-source-file":"SpendCapModal.tsx",children:"$0.021 per GB"})]}),(0,a.jsxs)(e8.Hj,{"data-sentry-element":"TableRow","data-sentry-source-file":"SpendCapModal.tsx",children:[(0,a.jsx)(e8.nA,{"data-sentry-element":"TableCell","data-sentry-source-file":"SpendCapModal.tsx",children:"Storage Image Transformations"}),(0,a.jsx)(e8.nA,{"data-sentry-element":"TableCell","data-sentry-source-file":"SpendCapModal.tsx",children:"100 origin images"}),(0,a.jsx)(e8.nA,{translate:"no","data-sentry-element":"TableCell","data-sentry-source-file":"SpendCapModal.tsx",children:"$5 per 1000 images"})]}),(0,a.jsxs)(e8.Hj,{"data-sentry-element":"TableRow","data-sentry-source-file":"SpendCapModal.tsx",children:[(0,a.jsx)(e8.nA,{"data-sentry-element":"TableCell","data-sentry-source-file":"SpendCapModal.tsx",children:"Realtime Concurrent Peak Connections"}),(0,a.jsx)(e8.nA,{"data-sentry-element":"TableCell","data-sentry-source-file":"SpendCapModal.tsx",children:"500"}),(0,a.jsx)(e8.nA,{translate:"no","data-sentry-element":"TableCell","data-sentry-source-file":"SpendCapModal.tsx",children:"$10 per 1000"})]}),(0,a.jsxs)(e8.Hj,{"data-sentry-element":"TableRow","data-sentry-source-file":"SpendCapModal.tsx",children:[(0,a.jsx)(e8.nA,{"data-sentry-element":"TableCell","data-sentry-source-file":"SpendCapModal.tsx",children:"Realtime Messages"}),(0,a.jsx)(e8.nA,{"data-sentry-element":"TableCell","data-sentry-source-file":"SpendCapModal.tsx",children:"5 Million"}),(0,a.jsx)(e8.nA,{translate:"no","data-sentry-element":"TableCell","data-sentry-source-file":"SpendCapModal.tsx",children:"$2.50 per Million"})]}),(0,a.jsxs)(e8.Hj,{"data-sentry-element":"TableRow","data-sentry-source-file":"SpendCapModal.tsx",children:[(0,a.jsx)(e8.nA,{"data-sentry-element":"TableCell","data-sentry-source-file":"SpendCapModal.tsx",children:"Function Invocations"}),(0,a.jsx)(e8.nA,{"data-sentry-element":"TableCell","data-sentry-source-file":"SpendCapModal.tsx",children:"2 Million"}),(0,a.jsx)(e8.nA,{translate:"no","data-sentry-element":"TableCell","data-sentry-source-file":"SpendCapModal.tsx",children:"$2 per Million"})]})]})]})]})}),(0,a.jsx)(ec.A.Separator,{"data-sentry-element":"unknown","data-sentry-source-file":"SpendCapModal.tsx"}),(0,a.jsx)(ec.A.Content,{"data-sentry-element":"unknown","data-sentry-source-file":"SpendCapModal.tsx",children:(0,a.jsx)("div",{className:"flex items-center gap-2",children:(0,a.jsx)(z.$,{block:!0,type:"primary",onClick:()=>s(),"data-sentry-element":"Button","data-sentry-source-file":"SpendCapModal.tsx",children:"Understood"})})})]})};var te=s(41422);async function tt(e){let{name:t,kind:s,size:a,tier:n,payment_method:r,address:i,billing_name:l,tax_id:o}=e,{data:d,error:c}=await (0,E.bE)("/platform/organizations",{body:{name:t,kind:s,size:a,tier:n,payment_method:r,address:i,billing_name:l,tax_id:o}});return c&&(0,E.H4)(c),d}let ts=function(){let{onSuccess:e,onError:t,...s}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=(0,en.jE)();return(0,er.n)(e=>tt(e),{async onSuccess(t,s,n){!t||"pending_payment_intent_secret"in t||(a.setQueriesData({queryKey:k.O.list(),exact:!0},e=>e?[...e,(0,O.i0)(t)]:e),await a.invalidateQueries(ei.Q.list())),await (null==e?void 0:e(t,s,n))},async onError(e,s,a){void 0===t?W.oR.error("Failed to create organization: ".concat(e.message)):t(e,s,a)},...s})};var ta=s(97337),tn=s(96457),tr=s(13228),ti=s(69063),tl=s(95379),to=s(588),td=s(61160),tc=s(77593),tu=s(17279),tm=s(20620),tp=(e=>(e[e.Forwards=0]="Forwards",e[e.Backwards=1]="Backwards",e))(tp||{}),th=s(7356),tx=s(97492),tg=s(99570),tf=s(27726),ty=s(94240),tj=s(48588);function tv(e){if(!e)return new Set;if("function"==typeof e)return new Set(e());let t=new Set;for(let s of e.current)s.current instanceof HTMLElement&&t.add(s.current);return t}var tb=(e=>(e[e.None=1]="None",e[e.InitialFocus=2]="InitialFocus",e[e.TabLock=4]="TabLock",e[e.FocusLock=8]="FocusLock",e[e.RestoreFocus=16]="RestoreFocus",e[e.All=30]="All",e))(tb||{});let tS=Object.assign((0,tr.FX)(function(e,t){let s,a=(0,g.useRef)(null),n=(0,tl.P)(a,t),{initialFocus:r,containers:i,features:l=30,...o}=e;(0,ti.g)()||(l=1);let d=(0,tx.g)(a);!function(e,t){let s,a,{ownerDocument:n}=e,r=function(){let e=!(arguments.length>0)||void 0===arguments[0]||arguments[0],t=(0,g.useRef)(tA.slice());return(0,ty.F)((e,s)=>{let[a]=e,[n]=s;!0===n&&!1===a&&(0,tf._)(()=>{t.current.splice(0)}),!1===n&&!0===a&&(t.current=tA.slice())},[e,tA,t]),(0,tu._)(()=>{var e;return null!=(e=t.current.find(e=>null!=e&&e.isConnected))?e:null})}(t);(0,ty.F)(()=>{t||(null==n?void 0:n.activeElement)===(null==n?void 0:n.body)&&(0,td.pW)(r())},[t]),s=(0,tu._)(()=>{t&&(0,td.pW)(r())}),a=(0,g.useRef)(!1),(0,g.useEffect)(()=>(a.current=!1,()=>{a.current=!0,(0,tf._)(()=>{a.current&&s()})}),[s])}({ownerDocument:d},!!(16&l));let c=function(e,t){let{ownerDocument:s,container:a,initialFocus:n}=e,r=(0,g.useRef)(null),i=(0,th.a)();return(0,ty.F)(()=>{if(!t)return;let e=a.current;e&&(0,tf._)(()=>{if(!i.current)return;let t=null==s?void 0:s.activeElement;if(null!=n&&n.current){if((null==n?void 0:n.current)===t){r.current=t;return}}else if(e.contains(t)){r.current=t;return}null!=n&&n.current?(0,td.pW)(n.current):(0,td.CU)(e,td.BD.First)===td.Me.Error&&console.warn("There are no focusable elements inside the <FocusTrap />"),r.current=null==s?void 0:s.activeElement})},[t]),r}({ownerDocument:d,container:a,initialFocus:r},!!(2&l));!function(e,t){var s,a;let n,{ownerDocument:r,container:i,containers:l,previousActiveElement:o}=e,d=(0,th.a)();s=null==r?void 0:r.defaultView,a="focus",n=(0,tg.Y)(e=>{if(!t||!d.current)return;let s=tv(l);i.current instanceof HTMLElement&&s.add(i.current);let a=o.current;if(!a)return;let n=e.target;n&&n instanceof HTMLElement?tN(s,n)?(o.current=n,(0,td.pW)(n)):(e.preventDefault(),e.stopPropagation(),(0,td.pW)(a)):(0,td.pW)(o.current)}),(0,g.useEffect)(()=>{function e(e){n.current(e)}return(s=null!=s?s:window).addEventListener(a,e,!0),()=>s.removeEventListener(a,e,!0)},[s,a,!0])}({ownerDocument:d,container:a,containers:i,previousActiveElement:c},!!(8&l));let u=(s=(0,g.useRef)(0),(0,tm.M)("keydown",e=>{"Tab"===e.key&&(s.current=+!!e.shiftKey)},!0),s),m=(0,tu._)(e=>{let t=a.current;t&&(0,tc.Y)(u.current,{[tp.Forwards]:()=>{(0,td.CU)(t,td.BD.First,{skipElements:[e.relatedTarget]})},[tp.Backwards]:()=>{(0,td.CU)(t,td.BD.Last,{skipElements:[e.relatedTarget]})}})}),p=(0,tj.L)(),h=(0,g.useRef)(!1);return g.createElement(g.Fragment,null,!!(4&l)&&g.createElement(to.j,{as:"button",type:"button","data-headlessui-focus-guard":!0,onFocus:m,features:to.O.Focusable}),(0,tr.XX)({ourProps:{ref:n,onKeyDown(e){"Tab"==e.key&&(h.current=!0,p.requestAnimationFrame(()=>{h.current=!1}))},onBlur(e){let t=tv(i);a.current instanceof HTMLElement&&t.add(a.current);let s=e.relatedTarget;s instanceof HTMLElement&&"true"!==s.dataset.headlessuiFocusGuard&&(tN(t,s)||(h.current?(0,td.CU)(a.current,(0,tc.Y)(u.current,{[tp.Forwards]:()=>td.BD.Next,[tp.Backwards]:()=>td.BD.Previous})|td.BD.WrapAround,{relativeTo:e.target}):e.target instanceof HTMLElement&&(0,td.pW)(e.target)))}},theirProps:o,defaultTag:"div",name:"FocusTrap"}),!!(4&l)&&g.createElement(to.j,{as:"button",type:"button","data-headlessui-focus-guard":!0,onFocus:m,features:to.O.Focusable}))}),{features:tb}),tA=[];function tN(e,t){for(let s of e)if(s.contains(t))return!0;return!1}!function(e){function t(){"loading"!==document.readyState&&(e(),document.removeEventListener("DOMContentLoaded",t))}"undefined"!=typeof document&&(document.addEventListener("DOMContentLoaded",t),t())}(()=>{function e(e){e.target instanceof HTMLElement&&e.target!==document.body&&tA[0]!==e.target&&(tA.unshift(e.target),(tA=tA.filter(e=>null!=e&&e.isConnected)).splice(10))}window.addEventListener("click",e,{capture:!0}),window.addEventListener("mousedown",e,{capture:!0}),window.addEventListener("focus",e,{capture:!0}),document.body.addEventListener("click",e,{capture:!0}),document.body.addEventListener("mousedown",e,{capture:!0}),document.body.addEventListener("focus",e,{capture:!0})});var tw=s(18325),t_=s(73957),tC=s(82454),tE=s(16154);let tk=e=>{let{onCustomerDataChange:t}=e,[s,n]=(0,g.useState)(!1),r=()=>{n(!1)},{form:i,handleSubmit:l,handleReset:o,isDirty:d}=(0,tE.x)({onCustomerDataChange:t});return(0,a.jsxs)("div",{className:"flex items-center justify-between","data-sentry-component":"BillingCustomerDataNewOrgDialog","data-sentry-source-file":"BillingCustomerDataNewOrgDialog.tsx",children:[(0,a.jsx)("label",{className:"text-sm text-foreground-light",htmlFor:"billing-address-btn",children:(()=>{let{line1:e,city:t,state:s,country:a,billing_name:n}=i.getValues();return e?[n,e,t,s,a].filter(Boolean).join(", "):"Optionally add a billing address"})()}),(0,a.jsxs)(t_.lG,{open:s,onOpenChange:e=>{e?n(!0):r()},"data-sentry-element":"Dialog","data-sentry-source-file":"BillingCustomerDataNewOrgDialog.tsx",children:[(0,a.jsx)(t_.zM,{asChild:!0,"data-sentry-element":"DialogTrigger","data-sentry-source-file":"BillingCustomerDataNewOrgDialog.tsx",children:(0,a.jsx)(z.$,{id:"billing-address-btn",onClick:()=>n(!0),type:"text","aria-label":"Edit",size:"tiny",className:"w-8 h-8 p-0 text-foreground-light","data-sentry-element":"Button","data-sentry-source-file":"BillingCustomerDataNewOrgDialog.tsx",children:(0,a.jsx)(tw.A,{size:14,strokeWidth:1.5,"data-sentry-element":"Pencil","data-sentry-source-file":"BillingCustomerDataNewOrgDialog.tsx"})})}),(0,a.jsxs)(t_.Cf,{size:"large","data-sentry-element":"DialogContent","data-sentry-source-file":"BillingCustomerDataNewOrgDialog.tsx",children:[(0,a.jsx)(t_.c7,{"data-sentry-element":"DialogHeader","data-sentry-source-file":"BillingCustomerDataNewOrgDialog.tsx",children:(0,a.jsx)(t_.L3,{"data-sentry-element":"DialogTitle","data-sentry-source-file":"BillingCustomerDataNewOrgDialog.tsx",children:"Billing Address & Tax Id"})}),(0,a.jsx)(t_.pf,{"data-sentry-element":"DialogSectionSeparator","data-sentry-source-file":"BillingCustomerDataNewOrgDialog.tsx"}),(0,a.jsx)(tS,{"data-sentry-element":"FocusTrap","data-sentry-source-file":"BillingCustomerDataNewOrgDialog.tsx",children:(0,a.jsx)(ey.lV,{...i,"data-sentry-element":"Form","data-sentry-source-file":"BillingCustomerDataNewOrgDialog.tsx",children:(0,a.jsxs)("form",{id:"new-org-billing-data-form",onSubmit:e=>{e.preventDefault(),e.stopPropagation(),i.handleSubmit(l)(e),Object.keys(i.formState.errors).length||r()},children:[(0,a.jsx)(tC.M,{className:"p-5",form:i,"data-sentry-element":"BillingCustomerDataForm","data-sentry-source-file":"BillingCustomerDataNewOrgDialog.tsx"}),(0,a.jsx)(t_.Es,{className:"justify-end","data-sentry-element":"DialogFooter","data-sentry-source-file":"BillingCustomerDataNewOrgDialog.tsx",children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(z.$,{type:"default",onClick:()=>{o(),r()},"data-sentry-element":"Button","data-sentry-source-file":"BillingCustomerDataNewOrgDialog.tsx",children:"Cancel"}),(0,a.jsx)(z.$,{type:"primary",htmlType:"submit",disabled:!d,"data-sentry-element":"Button","data-sentry-source-file":"BillingCustomerDataNewOrgDialog.tsx",children:"Continue"})]})})]})})})]})]})]})};async function tT(e){let{payment_intent_id:t,name:s,kind:a,size:n}=e,{data:r,error:i}=await (0,E.bE)("/platform/organizations/confirm-subscription",{body:{payment_intent_id:t,name:s,kind:a,size:n}});return i&&(0,E.H4)(i),r}let tD=function(){let{onSuccess:e,onError:t,...s}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=(0,en.jE)();return(0,er.n)(e=>tT(e),{async onSuccess(t,s,n){a.setQueriesData({queryKey:k.O.list(),exact:!0},e=>e?[...e,(0,O.i0)(t)]:e),await a.invalidateQueries(ei.Q.list()),await (null==e?void 0:e(t,s,n))},async onError(e,s,a){void 0===t?W.oR.error(e.message,{dismissible:!0,duration:1e4}):t(e,s,a)},...s})};var tR=s(24781),tO=s(796),tI=s(36352),tP=s(14643),tM=s(79959);let tL={PERSONAL:"Personal",EDUCATIONAL:"Educational",STARTUP:"Startup",AGENCY:"Agency",COMPANY:"Company",UNDISCLOSED:"N/A"},tz={1:"1 - 10",10:"10 - 49",50:"50 - 99",100:"100 - 299",300:"More than 300"};eN.z.object({plan:eN.z.string().transform(e=>e.toUpperCase()).pipe(eN.z.enum(["FREE","PRO","TEAM","ENTERPRISE"])),name:eN.z.string().min(1),kind:eN.z.string().transform(e=>e.toUpperCase()).pipe(eN.z.enum(["PERSONAL","EDUCATIONAL","STARTUP","AGENCY","COMPANY","UNDISCLOSED"])),size:eN.z.enum(["1","10","50","100","300"]),spend_cap:eN.z.boolean()});let tF=(0,tR.c)(eZ.WS),tU=e=>{var t;let{onPaymentMethodReset:s,setupIntent:n,onPlanSelected:i}=e,l=(0,ea.useRouter)(),o=(0,ez.xc)(),{data:d,isSuccess:c}=(0,O.Ad)(),{data:u}=(0,I.el)(),{resolvedTheme:m}=(0,tO.D)(),[p]=(0,ed.U)(r.rS.LAST_VISITED_ORGANIZATION,""),h=(d||[]).filter(e=>"free"===e.plan.id),f=(0,g.useMemo)(()=>e3().groupBy(u||[],"organization_slug"),[u]),[y,j]=(0,g.useState)(!1),[v,b]=(0,g.useState)(null),S=(0,g.useMemo)(()=>({clientSecret:n?n.client_secret:"",appearance:(0,tP.D)(m),paymentMethodCreation:"manual"}),[n,m]),[A,N]=(0,g.useState)({plan:"FREE",name:"",kind:"PERSONAL",size:"1",spend_cap:!0}),[w]=(0,e5.ab)({returnTo:e5.tU.withDefault(""),auth_id:e5.tU.withDefault("")}),_=(e,t)=>{N(s=>({...s,[e]:t}))};(0,g.useEffect)(()=>{if(!l.isReady)return;let{name:e,kind:t,plan:s,size:a,spend_cap:n}=l.query;"string"==typeof e&&_("name",e),"string"==typeof t&&_("kind",t),"string"==typeof s&&(_("plan",s),i(s)),"string"==typeof a&&_("size",a),"string"==typeof n&&_("spend_cap","true"===n)},[l.isReady]),(0,g.useEffect)(()=>{if(!A.name&&(null==d?void 0:d.length)===0&&!o.isLoading){var e;_("name",(null==(e=o.profile)?void 0:e.username)?o.profile.username+"'s Org":"My Org")}},[c]);let[C,E]=(0,g.useState)(!1),[k,T]=(0,g.useState)(),[D,R]=(0,g.useState)(!1),[P,M]=(0,g.useState)(!1),[L,F]=(0,g.useState)(null),{mutate:U}=ts({onSuccess:async e=>{"pending_payment_intent_secret"in e&&e.pending_payment_intent_secret?F(e.pending_payment_intent_secret):q(e)},onError:e=>{W.oR.error(e.message,{duration:1e4}),X(),E(!1)}}),{mutate:B}=tD({onSuccess:e=>{e&&"slug"in e&&q({slug:e.slug})}}),G=async e=>{var t;F(""),(null==(t=e.paymentIntent)?void 0:t.status)==="succeeded"?await B({payment_intent_id:e.paymentIntent.id,name:A.name,kind:A.kind,size:A.size}):(W.oR.error("Could not confirm payment. Please try again or use a different card.",{duration:1e4}),X(),E(!1))},q=e=>{var t;let s=(null==(t=o.profile)?void 0:t.username)?o.profile.username+"'s Project":"My Project";w.returnTo&&w.auth_id?l.push("".concat(w.returnTo,"?auth_id=").concat(w.auth_id),void 0,{shallow:!1}):l.push("/new/".concat(e.slug,"?projectName=").concat(s))},Y=(0,g.useMemo)(()=>({clientSecret:L,appearance:(0,tP.D)(m)}),[L,m]);async function $(e){var t;let s="PRO"!==A.plan||A.spend_cap?A.plan:"PAYG";U({name:A.name,kind:A.kind,tier:"tier_"+s.toLowerCase(),..."COMPANY"==A.kind?{size:A.size}:{},payment_method:e,billing_name:"FREE"===s||null==v?void 0:v.billing_name,address:"FREE"===s||null==v?void 0:v.address,tax_id:"FREE"===s?void 0:null!=(t=null==v?void 0:v.tax_id)?t:void 0})}let V=(0,g.useRef)(null),Z=async()=>{if(E(!0),"FREE"===A.plan)await $();else if(k)$(k.id);else{var e;let t=await (null==(e=V.current)?void 0:e.createPaymentMethod());t?(T(t),$(t.id)):E(!1)}},X=()=>(T(void 0),s()),K=async e=>{if(e.preventDefault(),!function(e){return(e?e.trim():"").length>=1}(A.name))return W.oR.error("Organization name is empty");h.some(e=>{var t;return(null==(t=f[e.slug])?void 0:t.length)>0})&&"FREE"!==A.plan?j(!0):await Z()};return(0,a.jsxs)("form",{onSubmit:K,"data-sentry-component":"NewOrgForm","data-sentry-source-file":"NewOrgForm.tsx",children:[(0,a.jsxs)(te.A,{title:(0,a.jsx)("div",{children:(0,a.jsx)("h4",{children:"Create a new organization"})},"panel-title"),footer:(0,a.jsxs)("div",{className:"flex w-full items-center justify-between",children:[(0,a.jsx)(z.$,{type:"default",disabled:C||D,onClick:()=>{p?l.push("/org/".concat(p)):l.push("/organizations")},children:"Cancel"}),(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)("p",{className:"text-xs text-foreground-lighter",children:"You can rename your organization later"}),(0,a.jsx)(z.$,{htmlType:"submit",type:"primary",loading:C,disabled:C,children:"Create organization"})]})]},"panel-footer"),"data-sentry-element":"Panel","data-sentry-source-file":"NewOrgForm.tsx",children:[(0,a.jsxs)(te.A.Content,{"data-sentry-element":"unknown","data-sentry-source-file":"NewOrgForm.tsx",children:[(0,a.jsx)("p",{className:"text-sm",children:"This is your organization within Supabase."}),(0,a.jsx)("p",{className:"text-sm text-foreground-light",children:"For example, you can use the name of your company or department."})]}),(0,a.jsx)(te.A.Content,{className:"Form section-block--body has-inputs-centered","data-sentry-element":"unknown","data-sentry-source-file":"NewOrgForm.tsx",children:(0,a.jsxs)("div",{className:"grid grid-cols-3 w-full",children:[(0,a.jsx)("div",{children:(0,a.jsx)(ta.J,{htmlFor:"name","data-sentry-element":"Label_Shadcn_","data-sentry-source-file":"NewOrgForm.tsx",children:"Name"})}),(0,a.jsxs)("div",{className:"col-span-2",children:[(0,a.jsx)(eC.p,{id:"name",autoFocus:!0,type:"text",placeholder:"Organization name",value:A.name,onChange:e=>_("name",e.target.value),"data-sentry-element":"Input_Shadcn_","data-sentry-source-file":"NewOrgForm.tsx"}),(0,a.jsx)("div",{className:"mt-1",children:(0,a.jsx)(ta.J,{htmlFor:"name",className:"text-foreground-lighter leading-normal text-sm","data-sentry-element":"Label_Shadcn_","data-sentry-source-file":"NewOrgForm.tsx",children:"What's the name of your company or team?"})})]})]})}),(0,a.jsx)(te.A.Content,{className:"Form section-block--body has-inputs-centered","data-sentry-element":"unknown","data-sentry-source-file":"NewOrgForm.tsx",children:(0,a.jsxs)("div",{className:"grid grid-cols-3",children:[(0,a.jsx)("div",{children:(0,a.jsx)(ta.J,{htmlFor:"kind","data-sentry-element":"Label_Shadcn_","data-sentry-source-file":"NewOrgForm.tsx",children:"Type"})}),(0,a.jsxs)("div",{className:"col-span-2",children:[(0,a.jsxs)(tn.l6,{value:A.kind,onValueChange:e=>_("kind",e),"data-sentry-element":"Select_Shadcn_","data-sentry-source-file":"NewOrgForm.tsx",children:[(0,a.jsx)(tn.bq,{id:"kind",className:"w-full","data-sentry-element":"SelectTrigger_Shadcn_","data-sentry-source-file":"NewOrgForm.tsx",children:(0,a.jsx)(tn.yv,{"data-sentry-element":"SelectValue_Shadcn_","data-sentry-source-file":"NewOrgForm.tsx"})}),(0,a.jsx)(tn.gC,{"data-sentry-element":"SelectContent_Shadcn_","data-sentry-source-file":"NewOrgForm.tsx",children:Object.entries(tL).map(e=>{let[t,s]=e;return(0,a.jsx)(tn.eb,{value:t,children:s},t)})})]}),(0,a.jsx)("div",{className:"mt-1",children:(0,a.jsx)(ta.J,{htmlFor:"kind",className:"text-foreground-lighter leading-normal text-sm","data-sentry-element":"Label_Shadcn_","data-sentry-source-file":"NewOrgForm.tsx",children:"What would best describe your organization?"})})]})]})}),"COMPANY"==A.kind&&(0,a.jsx)(te.A.Content,{className:"Form section-block--body has-inputs-centered",children:(0,a.jsxs)("div",{className:"grid grid-cols-3",children:[(0,a.jsx)("div",{children:(0,a.jsx)(ta.J,{htmlFor:"size",children:"Company size"})}),(0,a.jsxs)("div",{className:"col-span-2",children:[(0,a.jsxs)(tn.l6,{value:A.size,onValueChange:e=>_("size",e),children:[(0,a.jsx)(tn.bq,{id:"size",className:"w-full",children:(0,a.jsx)(tn.yv,{})}),(0,a.jsx)(tn.gC,{children:Object.entries(tz).map(e=>{let[t,s]=e;return(0,a.jsx)(tn.eb,{value:t,children:s},t)})})]}),(0,a.jsx)("div",{className:"mt-2",children:(0,a.jsx)(ta.J,{htmlFor:"size",className:"text-foreground-lighter leading-normal text-sm",children:"How many people are in your company?"})})]})]})}),(0,a.jsx)(te.A.Content,{"data-sentry-element":"unknown","data-sentry-source-file":"NewOrgForm.tsx",children:(0,a.jsxs)("div",{className:"grid grid-cols-3",children:[(0,a.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,a.jsx)(ta.J,{htmlFor:"plan",className:" text-sm","data-sentry-element":"Label_Shadcn_","data-sentry-source-file":"NewOrgForm.tsx",children:"Plan"}),(0,a.jsxs)("a",{href:"https://supabase.com/pricing",target:"_blank",rel:"noreferrer noopener",className:"text-sm flex items-center gap-2 opacity-75 hover:opacity-100 transition",children:["Pricing",(0,a.jsx)(H.A,{size:16,strokeWidth:1.5,"data-sentry-element":"ExternalLink","data-sentry-source-file":"NewOrgForm.tsx"})]})]}),(0,a.jsxs)("div",{className:"col-span-2",children:[(0,a.jsxs)(tn.l6,{value:A.plan,onValueChange:e=>{_("plan",e),i(e)},"data-sentry-element":"Select_Shadcn_","data-sentry-source-file":"NewOrgForm.tsx",children:[(0,a.jsx)(tn.bq,{id:"plan",className:"w-full","data-sentry-element":"SelectTrigger_Shadcn_","data-sentry-source-file":"NewOrgForm.tsx",children:(0,a.jsx)(tn.yv,{"data-sentry-element":"SelectValue_Shadcn_","data-sentry-source-file":"NewOrgForm.tsx"})}),(0,a.jsx)(tn.gC,{"data-sentry-element":"SelectContent_Shadcn_","data-sentry-source-file":"NewOrgForm.tsx",children:Object.entries(eZ.ho).map(e=>{let[t,s]=e;return(0,a.jsx)(tn.eb,{value:t,translate:"no",children:s},t)})})]}),(0,a.jsx)("div",{className:"mt-1",children:(0,a.jsx)(ta.J,{htmlFor:"plan",className:"text-foreground-lighter leading-normal text-sm","data-sentry-element":"Label_Shadcn_","data-sentry-source-file":"NewOrgForm.tsx",children:"The Plan applies to your new organization."})})]})]})}),"PRO"===A.plan&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(te.A.Content,{className:"border-b border-panel-border-interior-light dark:border-panel-border-interior-dark",children:(0,a.jsxs)("div",{className:"grid grid-cols-3",children:[(0,a.jsxs)("div",{className:"col-span-1 flex space-x-2 text-sm",children:[(0,a.jsx)(ta.J,{htmlFor:"spend-cap",className:" leading-normal",children:"Spend Cap"}),(0,a.jsx)(e9.A,{size:16,strokeWidth:1.5,className:"transition opacity-50 cursor-pointer hover:opacity-100",onClick:()=>M(!0)})]}),(0,a.jsxs)("div",{className:"col-span-2 flex items-center space-x-2",children:[(0,a.jsx)(eU.d,{id:"spend-cap",checked:A.spend_cap,onCheckedChange:()=>_("spend_cap",!A.spend_cap)}),(0,a.jsx)(ta.J,{htmlFor:"spend-cap",children:A.spend_cap?"Usage is limited to the plan's quota.":"You pay for overages beyond the plan's quota."})]})]})}),(0,a.jsx)(e7,{visible:P,onHide:()=>M(!1)})]}),"FREE"!==A.plan&&(0,a.jsx)(te.A.Content,{className:"border-b border-panel-border-interior-light dark:border-panel-border-interior-dark",children:(0,a.jsxs)("div",{className:"grid grid-cols-3",children:[(0,a.jsx)("div",{className:"col-span-1 flex space-x-2 text-sm items-center",children:(0,a.jsx)(ta.J,{htmlFor:"spend-cap",className:" leading-normal",children:"Billing Address"})}),(0,a.jsx)("div",{className:"col-span-2",children:(0,a.jsx)(tk,{onCustomerDataChange:b})})]})}),n&&"FREE"!==A.plan&&(0,a.jsx)(te.A.Content,{children:(0,a.jsx)(e2.Elements,{stripe:tF,options:S,children:(0,a.jsx)(te.A.Content,{children:(0,a.jsx)(tM.S,{ref:V,email:null==(t=o.profile)?void 0:t.primary_email,readOnly:C||D})})})})]}),(0,a.jsxs)(J.A,{size:"large",loading:!1,visible:y,title:(0,a.jsx)(a.Fragment,{children:"Confirm organization creation"}),confirmLabel:"Create new organization",onCancel:()=>j(!1),onConfirm:async()=>{await Z(),j(!1)},variant:"warning","data-sentry-element":"ConfirmationModal","data-sentry-source-file":"NewOrgForm.tsx",children:[(0,a.jsxs)("p",{className:"text-sm text-foreground-light",children:["Supabase"," ",(0,a.jsx)(x(),{className:"underline",href:"/docs/guides/platform/billing-on-supabase",target:"_blank","data-sentry-element":"Link","data-sentry-source-file":"NewOrgForm.tsx",children:"bills per organization"}),". If you want to upgrade your existing projects, upgrade your existing organization instead."]}),(0,a.jsx)("ul",{className:"mt-4 space-y-6",children:h.filter(e=>{var t;return(null==(t=f[e.slug])?void 0:t.length)>0}).map(e=>{let t=f[e.slug].map(e=>e.name);return(0,a.jsxs)("li",{children:[(0,a.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,a.jsx)("span",{children:e.name}),(0,a.jsx)(z.$,{asChild:!0,type:"primary",size:"tiny",children:(0,a.jsx)(x(),{href:"/org/".concat(e.slug,"/billing?panel=subscriptionPlan"),children:"Change Plan"})})]}),(0,a.jsx)("div",{className:"text-foreground-light text-xs",children:t.length<=2?(0,a.jsx)("span",{children:t.join("and ")}):(0,a.jsxs)("div",{children:[t.slice(0,2).join(", ")," and"," ",(0,a.jsxs)(eF.m_,{children:[(0,a.jsx)(eF.k$,{asChild:!0,children:(0,a.jsxs)("span",{className:"underline decoration-dotted",children:[t.length-2," other"," ",(t.length,"project")]})}),(0,a.jsx)(eF.ZI,{children:(0,a.jsx)("ul",{className:"list-disc list-inside",children:t.slice(2).map(e=>(0,a.jsx)("li",{children:e}))})})]})]})})]},"org_".concat(e.slug))})})]}),tF&&L&&k&&(0,a.jsx)(e2.Elements,{stripe:tF,options:Y,children:(0,a.jsx)(tI.i,{paymentIntentSecret:L,onPaymentIntentConfirm:e=>G(e),onLoadingChange:e=>R(e),onError:e=>{W.oR.error(e.message,{duration:1e4}),E(!1),X()}})})]})};var tB=s(29260),tH=s(880),tG=s(58341),tq=s(56960);async function tY(e,t){let{slug:s}=e;if(!s)throw Error("Organization slug is required");let{data:a,error:n}=await (0,E.Jt)("/platform/organizations/{slug}/oauth/apps",{params:{path:{slug:s},query:{type:"published"}}});return n&&(0,E.H4)(n),a}let tW=function(e){let{slug:t}=e,{enabled:s=!0,...a}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,C.I)(tq.R.oauthApps(t),e=>{let{signal:s}=e;return tY({slug:t},s)},{enabled:s&&void 0!==t,...a})};var t$=s(82457),tV=s(98990),tZ=s(92456);let tJ=e=>{var t;let{app:s,onSelectRevoke:n}=e;return(0,a.jsxs)(j.A.tr,{"data-sentry-element":"unknown","data-sentry-component":"AuthorizedAppRow","data-sentry-source-file":"AuthorizedAppRow.tsx",children:[(0,a.jsx)(j.A.td,{"data-sentry-element":"unknown","data-sentry-source-file":"AuthorizedAppRow.tsx",children:(0,a.jsx)("div",{className:"w-[30px] h-[30px] rounded-full bg-no-repeat bg-cover bg-center border border-control flex items-center justify-center",style:{backgroundImage:s.icon?"url('".concat(s.icon,"')"):"none"},children:s.icon?"":"".concat(s.name[0])})}),(0,a.jsx)(j.A.td,{"data-sentry-element":"unknown","data-sentry-source-file":"AuthorizedAppRow.tsx",children:s.name}),(0,a.jsx)(j.A.td,{"data-sentry-element":"unknown","data-sentry-source-file":"AuthorizedAppRow.tsx",children:s.created_by}),(0,a.jsx)(j.A.td,{"data-sentry-element":"unknown","data-sentry-source-file":"AuthorizedAppRow.tsx",children:(0,a.jsxs)("div",{className:"flex items-center gap-x-2",children:[(0,a.jsx)("p",{className:"font-mono truncate",title:s.app_id,children:s.app_id}),(0,a.jsx)(ew.A,{iconOnly:!0,type:"default",text:s.app_id,className:"px-1","data-sentry-element":"CopyButton","data-sentry-source-file":"AuthorizedAppRow.tsx"})]})}),(0,a.jsx)(j.A.td,{"data-sentry-element":"unknown","data-sentry-source-file":"AuthorizedAppRow.tsx",children:(0,a.jsx)(tZ.T,{utcTimestamp:null!=(t=s.authorized_at)?t:"",labelFormat:"DD/MM/YYYY, HH:mm:ss",className:"text-sm","data-sentry-element":"TimestampInfo","data-sentry-source-file":"AuthorizedAppRow.tsx"})}),(0,a.jsx)(j.A.td,{align:"right","data-sentry-element":"unknown","data-sentry-source-file":"AuthorizedAppRow.tsx",children:(0,a.jsx)(z.$,{type:"default",icon:(0,a.jsx)(tV.A,{}),className:"px-1",onClick:()=>n(),"data-sentry-element":"Button","data-sentry-source-file":"AuthorizedAppRow.tsx"})})]})};var tX=s(71147);async function tK(e){let{id:t,slug:s}=e;if(!t)throw Error("OAuth app ID is required");if(!s)throw Error("Organization slug is required");let{data:a,error:n}=await (0,E.yH)("/platform/organizations/{slug}/oauth/apps/{id}",{params:{path:{slug:s,id:t}}});return n&&(0,E.H4)(n),a}let tQ=function(){let{onSuccess:e,onError:t,...s}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=(0,en.jE)();return(0,er.n)(e=>tK(e),{async onSuccess(t,s,n){let{slug:r}=s;await a.invalidateQueries(tq.R.oauthApps(r)),await (null==e?void 0:e(t,s,n))},async onError(e,s,a){void 0===t?W.oR.error("Failed to delete application: ".concat(e.message)):t(e,s,a)},...s})},t0=e=>{let{selectedApp:t,onClose:s}=e,{slug:n}=(0,r.g)(),{mutate:i,isLoading:l}=tQ({onSuccess:()=>{W.oR.success('Successfully deleted the app "'.concat(null==t?void 0:t.name,'"')),s()}}),o=async()=>n?(null==t?void 0:t.id)?void i({slug:n,id:null==t?void 0:t.id}):console.error("App ID is required"):console.error("Slug is required");return(0,a.jsxs)(ec.A,{size:"medium",alignFooter:"right",header:"Confirm to delete ".concat(null==t?void 0:t.name),visible:void 0!==t,loading:l,onCancel:s,onConfirm:o,"data-sentry-element":"Modal","data-sentry-component":"DeleteAppModal","data-sentry-source-file":"DeleteAppModal.tsx",children:[(0,a.jsx)(ec.A.Content,{"data-sentry-element":"unknown","data-sentry-source-file":"DeleteAppModal.tsx",children:(0,a.jsx)(F.Z,{type:"warning",title:"This action cannot be undone",description:"Deleting ".concat(null==t?void 0:t.name," will invalidate any access tokens from this application that\n          were authorized by users."),"data-sentry-element":"Admonition","data-sentry-source-file":"DeleteAppModal.tsx"})}),(0,a.jsx)(ec.A.Content,{"data-sentry-element":"unknown","data-sentry-source-file":"DeleteAppModal.tsx",children:(0,a.jsx)("ul",{className:"space-y-5",children:(0,a.jsxs)("li",{className:"flex gap-3 text-sm",children:[(0,a.jsx)(tX.A,{size:14,className:"flex-shrink-0","data-sentry-element":"Lock","data-sentry-source-file":"DeleteAppModal.tsx"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("strong",{children:"Before you remove this application, consider:"}),(0,a.jsx)("ul",{className:"space-y-2 mt-2",children:(0,a.jsx)("li",{className:"list-disc ml-4",children:"No users are currently using this application. It will no longer be available for use after deletion."})})]})]})})})]})};var t1=s(69416),t2=s(669),t4=s(42206);let t3=e=>{var t,s;let{app:r,onSelectEdit:i,onSelectDelete:l}=e,o=(0,P.SE)(n.aG.UPDATE,"approved_oauth_apps"),d=(0,P.SE)(n.aG.DELETE,"approved_oauth_apps");return(0,a.jsxs)(j.A.tr,{"data-sentry-element":"unknown","data-sentry-component":"OAuthAppRow","data-sentry-source-file":"OAuthAppRow.tsx",children:[(0,a.jsx)(j.A.td,{"data-sentry-element":"unknown","data-sentry-source-file":"OAuthAppRow.tsx",children:(0,a.jsx)("div",{className:"w-[30px] h-[30px] rounded-full bg-no-repeat bg-cover bg-center border border-control flex items-center justify-center",style:{backgroundImage:r.icon?"url('".concat(r.icon,"')"):"none"},children:r.icon?"":"".concat(r.name[0])})}),(0,a.jsx)(j.A.td,{"data-sentry-element":"unknown","data-sentry-source-file":"OAuthAppRow.tsx",children:(0,a.jsx)("p",{title:r.name,className:"truncate",children:r.name})}),(0,a.jsx)(j.A.td,{"data-sentry-element":"unknown","data-sentry-source-file":"OAuthAppRow.tsx",children:(0,a.jsxs)("div",{className:"flex items-center gap-x-2",children:[(0,a.jsx)("p",{className:"font-mono truncate",title:r.client_id,children:r.client_id}),(0,a.jsx)(ew.A,{type:"default",iconOnly:!0,text:null!=(t=r.client_id)?t:"",className:"px-1","data-sentry-element":"CopyButton","data-sentry-source-file":"OAuthAppRow.tsx"})]})}),(0,a.jsx)(j.A.td,{"data-sentry-element":"unknown","data-sentry-source-file":"OAuthAppRow.tsx",children:(0,a.jsx)(tZ.T,{utcTimestamp:null!=(s=r.created_at)?s:"",labelFormat:"DD/MM/YYYY, HH:mm:ss",className:"text-sm","data-sentry-element":"TimestampInfo","data-sentry-source-file":"OAuthAppRow.tsx"})}),(0,a.jsx)(j.A.td,{align:"right","data-sentry-element":"unknown","data-sentry-source-file":"OAuthAppRow.tsx",children:(0,a.jsxs)(t4.rI,{"data-sentry-element":"DropdownMenu","data-sentry-source-file":"OAuthAppRow.tsx",children:[(0,a.jsx)(t4.ty,{asChild:!0,"data-sentry-element":"DropdownMenuTrigger","data-sentry-source-file":"OAuthAppRow.tsx",children:(0,a.jsx)(z.$,{type:"default",icon:(0,a.jsx)(t1.A,{}),className:"px-1","data-sentry-element":"Button","data-sentry-source-file":"OAuthAppRow.tsx"})}),(0,a.jsxs)(t4.SQ,{align:"end",side:"bottom",className:"w-32","data-sentry-element":"DropdownMenuContent","data-sentry-source-file":"OAuthAppRow.tsx",children:[(0,a.jsxs)(eF.m_,{"data-sentry-element":"Tooltip","data-sentry-source-file":"OAuthAppRow.tsx",children:[(0,a.jsx)(eF.k$,{asChild:!0,"data-sentry-element":"TooltipTrigger","data-sentry-source-file":"OAuthAppRow.tsx",children:(0,a.jsxs)(t4._2,{disabled:!o,className:"space-x-2 !pointer-events-auto",onClick:()=>{o&&i()},"data-sentry-element":"DropdownMenuItem","data-sentry-source-file":"OAuthAppRow.tsx",children:[(0,a.jsx)(t2.A,{size:16,"data-sentry-element":"Edit","data-sentry-source-file":"OAuthAppRow.tsx"}),(0,a.jsx)("p",{children:"Edit app"})]},"edit")}),!o&&(0,a.jsx)(eF.ZI,{side:"left",children:"You need additional permissions to edit apps"})]}),(0,a.jsx)(t4.mB,{"data-sentry-element":"DropdownMenuSeparator","data-sentry-source-file":"OAuthAppRow.tsx"}),(0,a.jsxs)(eF.m_,{"data-sentry-element":"Tooltip","data-sentry-source-file":"OAuthAppRow.tsx",children:[(0,a.jsx)(eF.k$,{asChild:!0,"data-sentry-element":"TooltipTrigger","data-sentry-source-file":"OAuthAppRow.tsx",children:(0,a.jsxs)(t4._2,{disabled:!d,className:"space-x-2 !pointer-events-auto",onClick:()=>{d&&l()},"data-sentry-element":"DropdownMenuItem","data-sentry-source-file":"OAuthAppRow.tsx",children:[(0,a.jsx)(tV.A,{size:16,"data-sentry-element":"Trash","data-sentry-source-file":"OAuthAppRow.tsx"}),(0,a.jsx)("p",{children:"Delete app"})]},"delete")}),!d&&(0,a.jsx)(eF.ZI,{side:"left",children:"You need additional permissions to delete apps"})]})]})]})})]})};var t9=s(10053);async function t5(e){let{slug:t,name:s,website:a,icon:n,scopes:r,redirect_uris:i}=e,{data:l,error:o}=await (0,E.bE)("/platform/organizations/{slug}/oauth/apps",{params:{path:{slug:t}},body:{name:s,website:a,icon:n,scopes:r,redirect_uris:i}});return o&&(0,E.H4)(o),l}let t6=function(){let{onSuccess:e,onError:t,...s}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=(0,en.jE)();return(0,er.n)(e=>t5(e),{async onSuccess(t,s,n){let{slug:r}=s;await a.invalidateQueries(tq.R.oauthApps(r)),await (null==e?void 0:e(t,s,n))},async onError(e,s,a){void 0===t?W.oR.error("Failed to create OAuth application: ".concat(e.message)):t(e,s,a)},...s})};async function t8(e){let{id:t,slug:s,name:a,website:n,icon:r,scopes:i,redirect_uris:l}=e;if(!t)throw Error("OAuth app ID is required");if(!s)throw Error("Organization slug is required");if(!a)throw Error("OAuth app name is required");if(!n)throw Error("OAuth app URL is required");if(!l||0===l.length)throw Error("Redirect URIs are required");let{data:o,error:d}=await (0,E.yJ)("/platform/organizations/{slug}/oauth/apps/{id}",{params:{path:{id:t,slug:s}},body:{name:a,website:n,icon:r,scopes:i,redirect_uris:l}});if(d)throw(0,E.H4)(d);return o}let t7=function(){let{onSuccess:e,onError:t,...s}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=(0,en.jE)();return(0,er.n)(e=>t8(e),{async onSuccess(t,s,n){let{slug:r}=s;await a.invalidateQueries(tq.R.oauthApps(r)),await (null==e?void 0:e(t,s,n))},async onError(e,s,a){void 0===t?W.oR.error("Failed to update application: ".concat(e.message)):t(e,s,a)},...s})};var se=s(35416),st=s(82147);let ss=async function(e,t,s){let a=!(arguments.length>3)||void 0===arguments[3]||arguments[3],n=(0,st.UU)("https://obuldanrptloktxcffvn.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im9idWxkYW5ycHRsb2t0eGNmZnZuIiwicm9sZSI6ImFub24iLCJpYXQiOjE3MTg2MTQ2ODUsImV4cCI6MjAzNDE5MDY4NX0.NFt49g6DFkc1X5khCzN5p01iAVo2TMxlx88cY1V0E2M",{auth:{persistSession:!1,autoRefreshToken:!1,multiTab:!1,detectSessionInUrl:!1,localStorage:{getItem:e=>void 0,setItem:(e,t)=>{},removeItem:e=>{}}}}),{data:r,error:i}=await n.storage.from(e).upload(t,s,{cacheControl:"3600"});if(i)return void console.error("Failed to upload:",i);if(r&&a){let{data:t}=await n.storage.from(e).getPublicUrl(r.path);return null==t?void 0:t.publicUrl}};var sa=s(96993),sn=s(72470),sr=s(7031);let si={list:(e,t)=>["organizations",e,"oauth","apps",t,"client-secrets"]};async function sl(e){let{slug:t,appId:s}=e,{data:a,error:n}=await (0,E.bE)("/platform/organizations/{slug}/oauth/apps/{app_id}/client-secrets",{params:{path:{slug:t,app_id:s}}});return n&&(0,E.H4)(n),a}let so=function(){let{onSuccess:e,onError:t,...s}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=(0,en.jE)();return(0,er.n)(e=>sl(e),{async onSuccess(t,s,n){let{slug:r,appId:i}=s;await a.invalidateQueries(si.list(r,i)),await (null==e?void 0:e(t,s,n))},async onError(e,s,a){void 0===t?W.oR.error("Failed to create client secret: ".concat(e.message)):t(e,s,a)},...s})};async function sd(e,t){let{slug:s,appId:a}=e;if(!s)throw Error("slug is required");if(!a)throw Error("appId is required");let{data:n,error:r}=await (0,E.Jt)("/platform/organizations/{slug}/oauth/apps/{app_id}/client-secrets",{params:{path:{slug:s,app_id:a}},signal:t});return r&&(0,E.H4)(r),n}let sc=function(e){let{slug:t,appId:s}=e,{enabled:a=!0,...n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,C.I)(si.list(t,s),e=>{let{signal:a}=e;return sd({slug:t,appId:s},a)},{enabled:a&&void 0!==t&&void 0!==s,...n})};var su=s(70295);async function sm(e){let{slug:t,appId:s,secretId:a}=e,{error:n}=await (0,E.yH)("/platform/organizations/{slug}/oauth/apps/{app_id}/client-secrets/{secret_id}",{params:{path:{slug:t,app_id:s,secret_id:a}}});return n&&(0,E.H4)(n),!0}let sp=function(){let{onSuccess:e,onError:t,...s}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=(0,en.jE)();return(0,er.n)(e=>sm(e),{async onSuccess(t,s,n){let{slug:r,appId:i}=s;await a.invalidateQueries(si.list(r,i)),await (null==e?void 0:e(t,s,n))},async onError(e,s,a){void 0===t?W.oR.error("Failed to delete client secret: ".concat(e.message)):t(e,s,a)},...s})},sh=e=>{var t,s,i;let{secret:o,appId:d}=e,{slug:c}=(0,r.g)(),[u,m]=(0,g.useState)(!1),p=(0,P.SE)(n.aG.UPDATE,"oauth_apps"),{data:h}=sc({slug:c,appId:d}),x=1===(null!=(t=null==h?void 0:h.client_secrets)?t:[]).length,{data:f=[]}=(0,R.Q)({slug:c}),y=f.find(e=>e.gotrue_id===o.created_by),j=null!=(i=null!=(s=null==y?void 0:y.username)?s:null==y?void 0:y.primary_email)?i:o.created_by,{mutate:v,isLoading:S}=sp({onSuccess:()=>{W.oR.success("Successfully deleted client secret"),m(!1)}}),A=void 0!==o.client_secret;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:(0,t$.cn)("flex items-center justify-between p-4 border first:rounded-t last:rounded-b",A&&"bg-background-alternative"),children:[(0,a.jsxs)("div",{className:"flex flex-row gap-6 items-center",children:[(0,a.jsx)(su.A,{size:16,strokeWidth:2,"data-sentry-element":"Key","data-sentry-source-file":"SecretRow.tsx"}),(0,a.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,a.jsx)("div",{className:"flex items-center gap-2",children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[A&&(0,a.jsx)(tH.A,{size:14,className:"text-brand",strokeWidth:3}),(0,a.jsx)("p",{className:"font-mono text-sm",children:A?o.client_secret:"".concat(o.client_secret_alias).concat("*".repeat(36))}),A&&o.client_secret&&(0,a.jsx)(ew.A,{text:o.client_secret,type:"default",iconOnly:!0})]})}),(0,a.jsx)("div",{className:"flex flex-col gap-0",children:(0,a.jsxs)("p",{className:"text-sm text-foreground-lighter",children:["Added ",A?"now":l()(o.created_at).fromNow()," by ",j]})})]})]}),(0,a.jsx)("div",{className:"flex items-center gap-2",children:(0,a.jsx)(b.G,{type:"default",className:"w-7",icon:(0,a.jsx)(tV.A,{}),disabled:!d||!p||x,onClick:()=>m(!0),tooltip:{content:{className:"w-64 text-center",side:"bottom",text:p?x?"You must have at least one client secret for the OAuth application to function.":void 0:"You need additional permissions to delete client secrets"}},"data-sentry-element":"ButtonTooltip","data-sentry-source-file":"SecretRow.tsx"})})]}),(0,a.jsx)(J.A,{visible:u,variant:"destructive",title:"Confirm to delete client secret",confirmLabel:"Delete",confirmLabelLoading:"Deleting",loading:S,onCancel:()=>m(!1),onConfirm:()=>c?d?void v({slug:c,appId:d,secretId:o.id}):console.error("App ID is required"):console.error("Slug is required"),disabled:x,alert:{title:"This action cannot be undone",description:"The client secret will be permanently removed and cannot be recovered."},"data-sentry-element":"ConfirmationModal","data-sentry-source-file":"SecretRow.tsx",children:(0,a.jsx)("p",{className:"text-sm text-foreground-light",children:x?"The last client secret cannot be deleted. Please generate a new secret before deleting this one.":"Are you sure you want to delete this client secret?"})})]})},sx=e=>{var t;let{selectedApp:s}=e,{slug:i}=(0,r.g)(),[l,o]=(0,g.useState)(),d=(0,P.SE)(n.aG.UPDATE,"oauth_apps"),{id:c}=null!=s?s:{},{data:u}=sc({slug:i,appId:c}),m=null!=(t=null==u?void 0:u.client_secrets)?t:[],{mutate:p,isLoading:h}=so({onSuccess:e=>o(e)});return(0,a.jsxs)("div",{className:"flex flex-col gap-4","data-sentry-component":"OAuthSecrets","data-sentry-source-file":"OAuthSecrets.tsx",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex flex-col",children:[(0,a.jsx)("span",{className:"text-sm text-foreground",children:"Client secrets"}),(0,a.jsxs)("span",{className:"text-sm text-foreground-light",children:["For handling callbacks in the OAuth 2.0 flow. Learn more"," ",(0,a.jsx)(eO.g,{href:"https://supabase.com/docs/guides/integrations/build-a-supabase-integration#handling-the-callback","data-sentry-element":"InlineLink","data-sentry-source-file":"OAuthSecrets.tsx",children:"here"}),"."]})]}),d&&(0,a.jsx)(b.G,{type:"default",disabled:!c||m.length>=5,onClick:()=>i?c?void p({slug:i,appId:c}):console.error("App ID is required"):console.error("Slug is required"),loading:h,tooltip:{content:{side:"bottom",text:m.length>=5?"You can only have up to 5 client secrets":void 0}},children:"Generate new secret"})]}),l&&(0,a.jsxs)(M.Fc,{variant:"default",children:[(0,a.jsx)(L.mo,{}),(0,a.jsx)(M.XL,{children:"Make sure to copy your new client secret now. You won't be able to see it again."})]}),(0,a.jsx)("div",{className:"-space-y-px",children:m.sort((e,t)=>new Date(t.created_at).getTime()-new Date(e.created_at).getTime()).map(e=>{let t=(null==l?void 0:l.id)===e.id?{...e,client_secret:l.client_secret}:e;return(0,a.jsx)(sh,{secret:t,appId:c},e.id)})})]})};var sg=s(47330);let sf=e=>{let{children:t,scopeName:s,scopes:n,onChange:r}=e;return(0,a.jsx)(t4.hO,{checked:n.includes(s),onCheckedChange:e=>{e?r([...n,s]):r([...n.filter(e=>e!==s)])},"data-sentry-element":"DropdownMenuCheckboxItem","data-sentry-component":"ScopeDropdownCheckboxItem","data-sentry-source-file":"Scopes.tsx",children:t})},sy=e=>{let{title:t,description:s,readScopeName:n,writeScopeName:r,scopes:i,setScopes:l}=e,o="Access: No access";return i.includes(n)&&(o="Access: Read-only"),i.includes(r)&&(o="Access: Write-only"),i.includes(n)&&i.includes(r)&&(o="Access: Read and write"),(0,a.jsxs)("div",{className:"flex flex-row justify-between p-4 border first:rounded-t last:rounded-b","data-sentry-component":"Scope","data-sentry-source-file":"Scopes.tsx",children:[(0,a.jsxs)("div",{className:"flex flex-col",children:[(0,a.jsx)("span",{className:"text-foreground text-sm",children:t}),(0,a.jsx)("span",{className:"text-foreground-light text-xs",children:s})]}),(0,a.jsxs)(t4.rI,{"data-sentry-element":"DropdownMenu","data-sentry-source-file":"Scopes.tsx",children:[(0,a.jsx)(t4.ty,{asChild:!0,"data-sentry-element":"DropdownMenuTrigger","data-sentry-source-file":"Scopes.tsx",children:(0,a.jsx)(z.$,{type:"default",iconRight:(0,a.jsx)(sg.A,{}),"data-sentry-element":"Button","data-sentry-source-file":"Scopes.tsx",children:(0,a.jsx)("p",{children:o})})}),(0,a.jsxs)(t4.SQ,{align:"end",className:"w-40","data-sentry-element":"DropdownMenuContent","data-sentry-source-file":"Scopes.tsx",children:[(0,a.jsx)(t4.lp,{"data-sentry-element":"DropdownMenuLabel","data-sentry-source-file":"Scopes.tsx",children:"Select an access level"}),(0,a.jsx)(t4.mB,{"data-sentry-element":"DropdownMenuSeparator","data-sentry-source-file":"Scopes.tsx"}),(0,a.jsx)(sf,{scopeName:n,scopes:i,onChange:l,"data-sentry-element":"ScopeDropdownCheckboxItem","data-sentry-source-file":"Scopes.tsx",children:"Read"}),(0,a.jsx)(sf,{scopeName:r,scopes:i,onChange:l,"data-sentry-element":"ScopeDropdownCheckboxItem","data-sentry-source-file":"Scopes.tsx",children:"Write"})]})]})]},t)},sj=e=>{let{scopes:t,setScopes:s}=e;return(0,a.jsxs)("div",{className:"-space-y-px","data-sentry-component":"ScopesPanel","data-sentry-source-file":"Scopes.tsx",children:[(0,a.jsx)(sy,{title:"Analytics",description:"Analytics logs.",readScopeName:n.gx.ANALYTICS_READ,writeScopeName:n.gx.ANALYTICS_WRITE,scopes:t,setScopes:s,"data-sentry-element":"Scope","data-sentry-source-file":"Scopes.tsx"}),(0,a.jsx)(sy,{title:"Auth",description:"Auth configurations and SSO providers.",readScopeName:n.gx.AUTH_READ,writeScopeName:n.gx.AUTH_WRITE,scopes:t,setScopes:s,"data-sentry-element":"Scope","data-sentry-source-file":"Scopes.tsx"}),(0,a.jsx)(sy,{title:"Database",description:"Postgres configurations, SQL snippets, SSL enforcement configurations and Typescript schema types.",readScopeName:n.gx.DATABASE_READ,writeScopeName:n.gx.DATABASE_WRITE,scopes:t,setScopes:s,"data-sentry-element":"Scope","data-sentry-source-file":"Scopes.tsx"}),(0,a.jsx)(sy,{title:"Domains",description:"Custom domains and vanity subdomains.",readScopeName:n.gx.DOMAINS_READ,writeScopeName:n.gx.DOMAINS_WRITE,scopes:t,setScopes:s,"data-sentry-element":"Scope","data-sentry-source-file":"Scopes.tsx"}),(0,a.jsx)(sy,{title:"Edge Functions",description:"Edge functions.",readScopeName:n.gx.EDGE_FUNCTIONS_READ,writeScopeName:n.gx.EDGE_FUNCTIONS_WRITE,scopes:t,setScopes:s,"data-sentry-element":"Scope","data-sentry-source-file":"Scopes.tsx"}),(0,a.jsx)(sy,{title:"Environment",description:"Environments/branches.",readScopeName:n.gx.ENVIRONMENT_READ,writeScopeName:n.gx.ENVIRONMENT_WRITE,scopes:t,setScopes:s,"data-sentry-element":"Scope","data-sentry-source-file":"Scopes.tsx"}),(0,a.jsx)(sy,{title:"Organizations",description:"Organizations and all its members.",readScopeName:n.gx.ORGANIZATIONS_READ,writeScopeName:n.gx.ORGANIZATIONS_WRITE,scopes:t,setScopes:s,"data-sentry-element":"Scope","data-sentry-source-file":"Scopes.tsx"}),(0,a.jsx)(sy,{title:"Projects",description:"Metadata, upgrade status, network restrictions and network bans.",readScopeName:n.gx.PROJECTS_READ,writeScopeName:n.gx.PROJECTS_WRITE,scopes:t,setScopes:s,"data-sentry-element":"Scope","data-sentry-source-file":"Scopes.tsx"}),(0,a.jsx)(sy,{title:"REST",description:"PostgREST configurations.",readScopeName:n.gx.REST_READ,writeScopeName:n.gx.REST_WRITE,scopes:t,setScopes:s,"data-sentry-element":"Scope","data-sentry-source-file":"Scopes.tsx"}),(0,a.jsx)(sy,{title:"Secrets",description:"API keys, secrets and pgsodium configurations.",readScopeName:n.gx.SECRETS_READ,writeScopeName:n.gx.SECRETS_WRITE,scopes:t,setScopes:s,"data-sentry-element":"Scope","data-sentry-source-file":"Scopes.tsx"}),(0,a.jsx)(sy,{title:"Storage",description:"Storage buckets and files.",readScopeName:n.gx.STORAGE_READ,writeScopeName:n.gx.STORAGE_WRITE,scopes:t,setScopes:s,"data-sentry-element":"Scope","data-sentry-source-file":"Scopes.tsx"})]})},sv=e=>{let{visible:t,selectedApp:s,onClose:n,onCreateSuccess:i}=e,{slug:l}=(0,r.g)(),o=(0,g.useRef)(),{mutate:d}=t6({onSuccess:(e,t)=>{W.oR.success('Successfully created OAuth app "'.concat(t.name,'"!')),n(),i(e),m(!1)},onError:e=>{W.oR.error("Failed to create OAuth application: ".concat(e.message)),m(!1)}}),{mutate:c}=t7({onSuccess:(e,t)=>{W.oR.success('Successfully updated OAuth app "'.concat(t.name,'"!')),n(),m(!1)},onError:e=>{W.oR.error("Failed to update OAuth application: ".concat(e.message)),m(!1)}}),[u,m]=(0,g.useState)(!1),[p,h]=(0,g.useState)(!1),[x,f]=(0,g.useState)(),[y,j]=(0,g.useState)(),[v,b]=(0,g.useState)({}),[S,A]=(0,g.useState)([{id:(0,se.gZ)(),value:""}]),[N,w]=(0,g.useState)([]);(0,g.useEffect)(()=>{if(t)if(b({}),m(!1),f(void 0),void 0!==s){var e,a,n;A(null!=(a=null==(e=s.redirect_uris)?void 0:e.map(e=>({id:(0,se.gZ)(),value:e})))?a:[]),w(null!=(n=null==s?void 0:s.scopes)?n:[]),j(null===s.icon?void 0:s.icon)}else A([{id:(0,se.gZ)(),value:""}]),w([]),j(void 0)},[t,s]);let _=(e,t)=>{A(S.map(s=>s.id===e?{id:e,value:t}:s)),b({})},C=e=>{A(S.filter(t=>t.id!==e))},E=async e=>{e.persist();let[t]=e.target.files||e.dataTransfer.items;f(t),j(URL.createObjectURL(t)),e.target.value=""},k=async e=>{if(!l)return console.error("Slug is required");let t=S.filter(e=>e.value.length>0).map(e=>e.value);if(0===t.length)return void b({urls:"Please provide at least one URL"});b({}),m(!0);let{name:a,website:n}=e,r=void 0!==x?await ss("oauth-app-icons","".concat(l,"/").concat((0,se.gZ)(),".png"),x):y;void 0===s?d({slug:l,name:a,website:n,redirect_uris:t,scopes:N,icon:r}):c({id:s.id,slug:l,name:a,website:n,redirect_uris:t,scopes:N,icon:r})};return(0,a.jsx)(sa.Ay,{hideFooter:!0,size:"large",visible:t,header:void 0!==s?"Update OAuth application":"Publish a new OAuth application",onCancel:()=>n(),"data-sentry-element":"SidePanel","data-sentry-component":"PublishAppSidePanel","data-sentry-source-file":"index.tsx",children:(0,a.jsx)(eu.A,{validateOnBlur:!0,className:"h-full",initialValues:{name:"",website:""},validate:e=>{let t={};return e.name||(t.name="Please provide a name for your application"),e.website||(t.website="Please provide a URL for your site"),(0,se.U8)(e.website)||(t.website="Please provide a valid URL for your site"),t},onSubmit:k,"data-sentry-element":"Form","data-sentry-source-file":"index.tsx",children:e=>{let{resetForm:r,values:i}=e;return(0,g.useEffect)(()=>{if(t&&void 0!==s){let e={name:s.name,website:s.website};r({values:e,initialValues:e})}},[t,s]),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"h-full flex flex-col",children:[(0,a.jsxs)("div",{className:"flex-grow",children:[(0,a.jsx)(sa.Ay.Content,{children:(0,a.jsxs)("div",{className:"py-4 flex items-start justify-between gap-10",children:[(0,a.jsxs)("div",{className:"space-y-4 w-full",children:[(0,a.jsx)(em.A,{id:"name",label:"Application name",descriptionText:(null==s?void 0:s.id)&&"ID: ".concat(s.id)}),(0,a.jsx)(em.A,{id:"website",label:"Website URL",placeholder:"https://my-website.com"})]}),(0,a.jsxs)("div",{children:[void 0!==y?(0,a.jsx)("div",{className:(0,t$.cn)("shadow transition group relative","bg-center bg-cover bg-no-repeat","mt-4 mr-4 space-y-2 rounded-full h-[120px] w-[120px] flex flex-col items-center justify-center"),style:{backgroundImage:y?'url("'.concat(y,'")'):"none"},children:(0,a.jsx)("div",{className:"absolute bottom-1 right-1",children:(0,a.jsxs)(t4.rI,{children:[(0,a.jsx)(t4.ty,{asChild:!0,children:(0,a.jsx)(z.$,{type:"default",className:"px-1",children:(0,a.jsx)(t2.A,{})})}),(0,a.jsxs)(t4.SQ,{align:"end",side:"bottom",children:[(0,a.jsx)(t4._2,{onClick:()=>{o.current&&o.current.click()},children:(0,a.jsx)("p",{children:"Upload image"})},"upload"),(0,a.jsx)(t4._2,{onClick:()=>{f(void 0),j(void 0)},children:(0,a.jsx)("p",{children:"Remove image"})},"remove")]})]})})}):(0,a.jsxs)("div",{className:(0,t$.cn)("border border-strong transition opacity-75 hover:opacity-100","mt-4 mr-4 space-y-2 rounded-full h-[120px] w-[120px] flex flex-col items-center justify-center cursor-pointer"),onClick:()=>{o.current&&o.current.click()},children:[(0,a.jsx)(t9.A,{size:18,strokeWidth:1.5,className:"text-foreground"}),(0,a.jsx)("p",{className:"text-xs text-foreground-light",children:"Upload logo"})]}),(0,a.jsx)("input",{multiple:!0,type:"file",ref:o,className:"hidden",accept:"image/png, image/jpeg",onChange:E})]})]})}),(0,a.jsx)(sa.Ay.Separator,{}),(0,a.jsxs)(sa.Ay.Content,{className:"py-4",children:[(0,a.jsxs)("div",{className:"mb-2 flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-foreground text-sm",children:"Authorization callback URLs"}),(0,a.jsx)("p",{className:"text-sm text-foreground-light",children:"All URLs must use HTTPS, except for localhost"})]}),(0,a.jsx)(z.$,{type:"default",onClick:()=>A(S.concat({id:(0,se.gZ)(),value:""})),children:"Add URL"})]}),(0,a.jsxs)("div",{className:"space-y-2 pb-2",children:[S.map(e=>(0,a.jsx)(em.A,{value:e.value,onChange:t=>_(e.id,t.target.value),placeholder:"e.g https://my-website.com",actions:[S.length>1?(0,a.jsx)(z.$,{type:"default",onClick:()=>C(e.id),children:"Remove"},"remove-url"):null]},e.id)),v.urls&&(0,a.jsx)("p",{className:"text-red-900 text-sm",children:v.urls})]})]}),void 0!==s&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(sa.Ay.Separator,{}),(0,a.jsx)(sa.Ay.Content,{className:"py-4",children:(0,a.jsx)(sx,{selectedApp:s})})]}),(0,a.jsx)(sa.Ay.Separator,{}),(0,a.jsxs)("div",{className:"p-6 ",children:[(0,a.jsxs)("div",{className:"flex items-start justify-between space-x-4 pb-4",children:[(0,a.jsxs)("div",{className:"flex flex-col",children:[(0,a.jsx)("span",{className:"text-sm text-foreground",children:"Application permissions"}),(0,a.jsx)("span",{className:"text-sm text-foreground-light",children:"The application permissions are organized in scopes and will be presented to the user when adding an app to their organization and all of its projects."})]}),(0,a.jsx)(e6.A,{href:"https://supabase.com/docs/guides/platform/oauth-apps/oauth-scopes"})]}),(0,a.jsx)(sj,{scopes:N,setScopes:w})]})]}),(0,a.jsx)(sa.Ay.Separator,{}),(0,a.jsx)(sa.Ay.Content,{children:(0,a.jsxs)("div",{className:"pt-2 pb-3 flex items-center justify-between",children:[(0,a.jsx)(z.$,{type:"default",onClick:()=>h(!0),disabled:0===i.name.length||0===i.website.length,children:"Preview consent for users"}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(z.$,{type:"default",disabled:u,onClick:()=>n(),children:"Cancel"}),(0,a.jsx)(z.$,{htmlType:"submit",loading:u,disabled:u,children:"Confirm"})]})]})})]}),(0,a.jsxs)(ec.A,{hideFooter:!0,className:"!max-w-[600px]",visible:p,onCancel:()=>h(!1),children:[(0,a.jsx)(ec.A.Content,{children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("p",{children:["Authorize API access for ",i.name]}),(0,a.jsx)(sn.E,{variant:"brand",children:"Preview"})]})}),(0,a.jsx)(ec.A.Separator,{}),(0,a.jsxs)(ec.A.Content,{children:[(0,a.jsx)(sr.h,{icon:y||null,name:i.name,domain:i.website,scopes:N}),(0,a.jsxs)("div",{className:"pt-4 space-y-2",children:[(0,a.jsx)("p",{className:"prose text-sm",children:"Select an organization to grant API access to"}),(0,a.jsx)("div",{className:"border border-control text-foreground-light rounded px-4 py-2 text-sm bg-surface-200",children:"Organizations that you have access to will be listed here"})]})]}),(0,a.jsx)(ec.A.Separator,{}),(0,a.jsx)(ec.A.Content,{children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("p",{className:"prose text-xs",children:"This is what your users will see when authorizing with your app"}),(0,a.jsx)(z.$,{type:"default",onClick:()=>h(!1),children:"Close"})]})})]})]})}})})};async function sb(e){let{id:t,slug:s}=e;if(!t)throw Error("App ID is required");if(!s)throw Error("Organization slug is required");let{data:a,error:n}=await (0,E.bE)("/platform/organizations/{slug}/oauth/apps/{id}/revoke",{params:{path:{slug:s,id:t}}});return n&&(0,E.H4)(n),a}let sS=function(){let{onSuccess:e,onError:t,...s}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=(0,en.jE)();return(0,er.n)(e=>sb(e),{async onSuccess(t,s,n){let{slug:r}=s;await a.invalidateQueries(tq.R.authorizedApps(r)),await (null==e?void 0:e(t,s,n))},async onError(e,s,a){void 0===t?W.oR.error("Failed to revoke application: ".concat(e.message)):t(e,s,a)},...s})},sA=e=>{let{selectedApp:t,onClose:s}=e,{slug:n}=(0,r.g)(),{mutate:i,isLoading:l}=sS({onSuccess:()=>{W.oR.success('Successfully revoked the app "'.concat(null==t?void 0:t.name,'"')),s()}}),o=async()=>n?(null==t?void 0:t.id)?void i({slug:n,id:null==t?void 0:t.id}):console.error("App ID is required"):console.error("Slug is required");return(0,a.jsxs)(ec.A,{size:"medium",alignFooter:"right",header:"Confirm to revoke ".concat(null==t?void 0:t.name),visible:void 0!==t,loading:l,onCancel:s,onConfirm:o,"data-sentry-element":"Modal","data-sentry-component":"RevokeAppModal","data-sentry-source-file":"RevokeAppModal.tsx",children:[(0,a.jsx)(ec.A.Content,{"data-sentry-element":"unknown","data-sentry-source-file":"RevokeAppModal.tsx",children:(0,a.jsx)(F.Z,{type:"warning",title:"This action cannot be undone",description:"".concat(null==t?void 0:t.name," application will no longer have access to your organization's settings\n          and projects."),"data-sentry-element":"Admonition","data-sentry-source-file":"RevokeAppModal.tsx"})}),(0,a.jsx)(ec.A.Content,{"data-sentry-element":"unknown","data-sentry-source-file":"RevokeAppModal.tsx",children:(0,a.jsx)("ul",{className:"space-y-5",children:(0,a.jsxs)("li",{className:"flex gap-3 text-sm",children:[(0,a.jsx)(tX.A,{size:14,className:"flex-shrink-0","data-sentry-element":"Lock","data-sentry-source-file":"RevokeAppModal.tsx"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("strong",{children:"Before you remove this app, consider:"}),(0,a.jsx)("ul",{className:"space-y-2 mt-2",children:(0,a.jsx)("li",{className:"list-disc ml-4",children:"No users are currently using this application. The application will no longer have access to your organization after being revoked."})})]})]})})})]})},sN=()=>{var e,t,s,i;let{slug:l}=(0,r.g)(),[o,d]=(0,g.useState)(!1),[c,u]=(0,g.useState)(),[m,p]=(0,g.useState)(),[h,x]=(0,g.useState)(),[f,S]=(0,g.useState)(),A=(0,P.SE)(n.aG.READ,"approved_oauth_apps"),_=(0,P.SE)(n.aG.CREATE,"approved_oauth_apps"),{data:C,error:E,isLoading:k,isSuccess:T,isError:D}=tW({slug:l},{enabled:A}),R=null==C?void 0:C.sort((e,t)=>{var s,a;return Number(new Date(null!=(s=e.created_at)?s:""))-Number(new Date(null!=(a=t.created_at)?a:""))}),{data:O,isLoading:I,isSuccess:M,isError:L}=(0,tG.n)({slug:l}),F=null==O?void 0:O.sort((e,t)=>Number(new Date(e.authorized_at))-Number(new Date(t.authorized_at)));return A?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(y.Vw,{"data-sentry-element":"ScaffoldContainerLegacy","data-sentry-source-file":"OAuthApps.tsx",children:[(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex flex-col md:flex-row items-start md:items-center justify-between gap-2",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{children:"Published Apps"}),(0,a.jsx)("p",{className:"text-foreground-light text-sm",children:"Build integrations that extend Supabase's functionality"})]}),(0,a.jsx)(b.G,{disabled:!_,type:"primary",onClick:()=>d(!0),tooltip:{content:{side:"bottom",text:_?void 0:"You need additional permissions to create apps"}},"data-sentry-element":"ButtonTooltip","data-sentry-source-file":"OAuthApps.tsx",children:"Add application"})]}),k&&(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(w.A,{}),(0,a.jsx)(w.A,{className:"w-3/4"}),(0,a.jsx)(w.A,{className:"w-1/2"})]}),D&&(0,a.jsx)(v.A,{error:E,subject:"Failed to retrieve published OAuth apps"}),void 0!==c&&(0,a.jsxs)("div",{className:(0,t$.cn)("flex items-center justify-between p-4 px-6 border first:rounded-t last:rounded-b","bg-background-alternative","rounded"),children:[(0,a.jsx)("div",{className:"absolute top-4 right-4",children:(0,a.jsx)(z.$,{type:"text",icon:(0,a.jsx)(tB.A,{size:18}),className:"px-1",onClick:()=>u(void 0)})}),(0,a.jsxs)("div",{className:"w-full space-y-4",children:[(0,a.jsxs)("div",{className:"flex flex-col gap-0",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(tH.A,{size:14,className:"text-brand",strokeWidth:3}),(0,a.jsx)("p",{className:"text-sm",children:"You've created your new OAuth application."})]}),(0,a.jsx)("p",{className:"text-sm text-foreground-light",children:"Ensure that you store the client secret securely - you will not be able to see it again."})]}),(0,a.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("p",{className:"text-sm text-foreground-light",children:"Client ID"}),(0,a.jsx)("p",{className:"font-mono text-sm",children:c.client_id}),(0,a.jsx)(ew.A,{text:c.client_id,type:"default",iconOnly:!0})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("p",{className:"text-sm text-foreground-light",children:"Client Secret"}),(0,a.jsx)("p",{className:"font-mono text-sm",children:c.client_secret}),(0,a.jsx)(ew.A,{text:c.client_secret,type:"default",iconOnly:!0})]})]})]})]}),T&&(0,a.jsx)(a.Fragment,{children:(null!=(e=null==C?void 0:C.length)?e:0)===0?(0,a.jsx)("div",{className:"bg-surface-100 border rounded p-4 flex items-center justify-between mt-4",children:(0,a.jsx)("p",{className:"prose text-sm",children:"You do not have any published applications yet"})}):(0,a.jsx)(j.A,{head:[(0,a.jsx)(j.A.th,{className:"w-[30px]"},"icon"),(0,a.jsx)(j.A.th,{children:"Name"},"name"),(0,a.jsx)(j.A.th,{children:"Client ID"},"client-id"),(0,a.jsx)(j.A.th,{children:"Created at"},"created-at"),(0,a.jsx)(j.A.th,{},"delete-action")],body:null!=(t=null==R?void 0:R.map(e=>(0,a.jsx)(t3,{app:e,onSelectEdit:()=>{d(!0),p(e)},onSelectDelete:()=>x(e)},e.id)))?t:[]})})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{children:"Authorized Apps"}),(0,a.jsx)("p",{className:"text-foreground-light text-sm",children:"Applications that have access to your organization's settings and projects"}),(0,a.jsxs)("div",{className:"mt-4",children:[I&&(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(w.A,{}),(0,a.jsx)(w.A,{className:"w-3/4"}),(0,a.jsx)(w.A,{className:"w-1/2"})]}),L&&(0,a.jsx)(v.A,{subject:"Failed to retrieve authorized apps"}),M&&(0,a.jsx)(a.Fragment,{children:(null!=(s=O.length)?s:0)===0?(0,a.jsx)("div",{className:"bg-surface-100 border rounded p-4 flex items-center justify-between",children:(0,a.jsx)("p",{className:"prose text-sm",children:"You do not have any authorized applications yet"})}):(0,a.jsx)(j.A,{className:"mt-4",head:[(0,a.jsx)(j.A.th,{className:"w-[30px]"},"icon"),(0,a.jsx)(j.A.th,{children:"Name"},"name"),(0,a.jsx)(j.A.th,{children:"Created by"},"created-by"),(0,a.jsx)(j.A.th,{children:"App ID"},"app-id"),(0,a.jsx)(j.A.th,{children:"Authorized at"},"authorized-at"),(0,a.jsx)(j.A.th,{},"delete-action")],body:null!=(i=null==F?void 0:F.map(e=>(0,a.jsx)(tJ,{app:e,onSelectRevoke:()=>S(e)},e.id)))?i:[]})})]})]})]}),(0,a.jsx)(sv,{visible:o,selectedApp:m,onClose:()=>{p(void 0),d(!1)},onCreateSuccess:u,"data-sentry-element":"PublishAppSidePanel","data-sentry-source-file":"OAuthApps.tsx"}),(0,a.jsx)(t0,{selectedApp:h,onClose:()=>x(void 0),"data-sentry-element":"DeleteAppModal","data-sentry-source-file":"OAuthApps.tsx"}),(0,a.jsx)(sA,{selectedApp:f,onClose:()=>S(void 0),"data-sentry-element":"RevokeAppModal","data-sentry-source-file":"OAuthApps.tsx"})]}):(0,a.jsx)(y.Vw,{children:(0,a.jsx)(N.A,{resourceText:"view OAuth apps"})})};var sw=s(57709),s_=s(83142),sC=s(36029),sE=s(7029),sk=s(2792),sT=s(82078),sD=s(96729);let sR=e=>{let{title:t,description:s}=e;return(0,a.jsx)("div",{className:"mx-auto flex flex-col gap-10 py-14","data-sentry-component":"SectionHeader","data-sentry-source-file":"SectionHeader.tsx",children:(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-xl",children:t}),(0,a.jsx)("p",{className:"text-sm text-foreground-light",children:s})]})})};var sO=s(66790),sI=s(83207),sP=s(9335),sM=s(38494);let sL=e=>{let{section:t,includedInPlan:s,children:n}=e,{name:r,description:i,links:l}=t;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(y.eh,{"data-sentry-element":"ScaffoldContainer","data-sentry-source-file":"SectionContent.tsx",children:(0,a.jsx)("div",{className:"mx-auto flex flex-col gap-10 py-8 md:py-16",children:(0,a.jsxs)("div",{className:"grid grid-cols-12 gap-6",children:[(0,a.jsx)("div",{className:"col-span-12 lg:col-span-5",children:(0,a.jsxs)("div",{className:"sticky top-32 space-y-6",children:[(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("p",{className:"text-base capitalize",children:r}),!1===s&&(0,a.jsx)(sn.E,{children:"Not included"})]}),(0,a.jsx)("div",{className:"grid gap-4",children:i.split("\n").map((e,t)=>(0,a.jsx)("p",{className:"text-sm text-foreground-light pr-8",children:e},"desc-".concat(t)))})]}),l&&l.length>0&&(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("p",{className:"text-sm text-foreground mb-2",children:"More information"}),l.map(e=>(0,a.jsx)("div",{children:(0,a.jsx)(x(),{href:e.url,target:"_blank",rel:"noreferrer",children:(0,a.jsxs)("div",{className:"flex items-center space-x-2 opacity-50 hover:opacity-100 transition",children:[(0,a.jsx)("p",{className:"text-sm",children:e.name}),(0,a.jsx)(H.A,{size:16,strokeWidth:1.5})]})})},e.url))]})]})}),(0,a.jsx)("div",{className:"col-span-12 lg:col-span-7 space-y-6",children:n})]})})}),(0,a.jsx)(y.cJ,{"data-sentry-element":"ScaffoldDivider","data-sentry-source-file":"SectionContent.tsx"})]})},sz=(e,t,s)=>{var a;return t?(null==t||null==(a=t.plan)?void 0:a.id)==="pro"&&(null==t?void 0:t.usage_billing_enabled)===!1?"/org/".concat(e,"/billing#cost-control"):"/org/".concat(e,"/billing?panel=subscriptionPlan&source=usage").concat(s):"/org/".concat(e,"/billing")},sF=new Intl.NumberFormat("en-US",{notation:"compact",compactDisplay:"short"}),sU=(e,t)=>{if("string"==typeof e)return e;if("bytes"===t){let t=sG(e).replace(/\s/g,"");return"0bytes"===t?"0":t}return"gigabytes"===t?sF.format(e)+"GB":sF.format(e)},sB=(e,t)=>{if("string"==typeof e)return e;if("bytes"===t){let t=sq(e).replace(/\s/g,"");return"0bytes"===t?"0":t}return"gigabytes"===t?sF.format(e)+"GB":sF.format(e)},sH=["bytes","KB","MB","GB","TB","PB","EB","ZB","YB"],sG=e=>{if(0===e||void 0===e)return"0 bytes";let t=Math.floor(Math.log(e)/Math.log(1024)),s=sH[t],a=2;return["bytes","KB","MB"].includes(s)?a=0:["GB"].includes(s)&&(a=1),parseFloat((e/Math.pow(1024,t)).toFixed(a))+" "+s},sq=e=>{if(0===e||void 0===e)return"0 bytes";let t=Math.floor(Math.log(e)/Math.log(1024)),s=sH[t];return parseFloat((e/Math.pow(1024,t)).toFixed(3))+" "+s};var sY=s(82333);let sW=e=>{var t,s,n,r,i,l,o,d,c,u,m,p,h;let{slug:f,projectRef:y,attribute:j,usage:b,usageMeta:S,chartMeta:A,subscription:N,error:_,isLoading:C,isError:E,isSuccess:k,currentBillingCycleSelected:T}=e,D=sz(null!=f?f:"",N,j.key),R=(null!=(n=null==S?void 0:S.usage)?n:0)/(null!=(r=null==S?void 0:S.pricing_free_units)?r:0),O=(null!=(i=null==S?void 0:S.usage)?i:0)-(null!=(l=null==S?void 0:S.pricing_free_units)?l:0),I=null==N?void 0:N.usage_billing_enabled,P=I?"text-amber-900":"text-red-900",M=(0,g.useMemo)(()=>{var e,t;return null!=(t=null==(e=A[j.key])?void 0:e.data)?t:[]},[j.key,A]),L=void 0===y&&T&&!1===I&&R>=eZ.xx,F=(0,g.useMemo)(()=>{var e,t;return null!=(t=null==(e=j.attributes)?void 0:e.map(e=>M.some(t=>0!==Number(t[e.key]))).some(e=>!!e))&&t},[j.attributes,M]);return(0,a.jsx)("div",{id:j.anchor,className:"scroll-my-12","data-sentry-component":"AttributeUsage","data-sentry-source-file":"AttributeUsage.tsx",children:(0,a.jsxs)(sL,{section:j,"data-sentry-element":"SectionContent","data-sentry-source-file":"AttributeUsage.tsx",children:[C&&(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(w.A,{}),(0,a.jsx)(w.A,{className:"w-3/4"}),(0,a.jsx)(w.A,{className:"w-1/2"})]}),E&&(0,a.jsx)(v.A,{subject:"Failed to retrieve usage data",error:_}),k&&(0,a.jsx)(a.Fragment,{children:!S||(null==S?void 0:S.available_in_plan)?(0,a.jsxs)(a.Fragment,{children:[!y&&(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("div",{className:"flex items-center justify-between",children:(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsxs)("p",{className:"text-sm",children:[j.name," usage"]}),L&&(0,a.jsxs)(eF.m_,{children:[(0,a.jsx)(eF.k$,{asChild:!0,children:R>=1?(0,a.jsxs)("div",{className:"flex items-center space-x-2 min-w-[115px] cursor-help",children:[(0,a.jsx)(sI.A,{size:14,strokeWidth:2,className:P}),(0,a.jsx)("p",{className:"text-sm ".concat(P),children:"Exceeded limit"})]}):R>=eZ.xx&&(0,a.jsxs)("div",{className:"flex items-center space-x-2 min-w-[115px] cursor-help",children:[(0,a.jsx)(sI.A,{size:14,strokeWidth:2,className:"text-amber-900"}),(0,a.jsx)("p",{className:"text-sm text-amber-900",children:"Approaching limit"})]})}),(0,a.jsxs)(eF.ZI,{side:"bottom",children:[(0,a.jsx)("p",{children:"Exceeding your plans included usage will lead to restrictions to your project."}),(0,a.jsx)("p",{children:"Upgrade to a usage-based plan or disable the spend cap to avoid restrictions."})]})]})]})}),T&&S&&!S.unlimited&&(0,a.jsx)(sM.A,{type:"horizontal",barClass:(0,t$.cn)(R>=1?I?"bg-foreground-light":"bg-red-900":!1===I&&R>=eZ.xx?"bg-amber-900":"bg-foreground-light"),bgClass:"bg-surface-300",value:null!=(o=null==S?void 0:S.usage)?o:0,max:(null==S?void 0:S.pricing_free_units)||1}),(0,a.jsxs)("div",{children:[S&&(0,a.jsxs)("div",{className:"flex items-center justify-between border-b py-1",children:[(0,a.jsxs)("p",{className:"text-xs text-foreground-light",children:["Included in ",null==N||null==(t=N.plan)?void 0:t.name," Plan"]}),S.unlimited?(0,a.jsx)("p",{className:"text-xs",children:"Unlimited"}):(0,a.jsx)("p",{className:"text-xs",children:"bytes"===j.unit||"gigabytes"===j.unit?"".concat(null!=(d=S.pricing_free_units)?d:0," GB"):(null!=(c=S.pricing_free_units)?c:0).toLocaleString()})]}),T&&S&&(0,a.jsxs)("div",{className:"flex items-center justify-between py-1",children:[(0,a.jsxs)("p",{className:"text-xs text-foreground-light",children:[j.chartPrefix||"Used "," in period"]}),(0,a.jsx)("p",{className:"text-xs",children:"bytes"===j.unit||"gigabytes"===j.unit?"".concat((null!=(u=null==S?void 0:S.usage)?u:0).toFixed(2)," GB"):(null!=(m=null==S?void 0:S.usage)?m:0).toLocaleString()})]}),T&&(null!=(p=null==S?void 0:S.pricing_free_units)?p:0)>0&&(0,a.jsxs)("div",{className:"flex items-center justify-between border-t py-1",children:[(0,a.jsx)("p",{className:"text-xs text-foreground-light",children:"Overage in period"}),(0,a.jsx)("p",{className:"text-xs",children:(null!=(h=null==S?void 0:S.pricing_free_units)?h:0)===-1||O<0?"0".concat("bytes"===j.unit||"gigabytes"===j.unit?" GB":""):"bytes"===j.unit||"gigabytes"===j.unit?"".concat(O.toFixed(2)," GB"):O.toLocaleString()})]})]})]}),null==(s=j.additionalInfo)?void 0:s.call(j,b),(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsxs)("p",{className:"text-sm",children:[j.chartPrefix||""," ",j.name," ",j.chartSuffix||"per day"]}),j.chartDescription.split("\n").map((e,t)=>(0,a.jsx)("p",{className:"text-sm text-foreground-light",children:e},"para-".concat(t)))]}),A[j.key].isLoading?(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(w.A,{}),(0,a.jsx)(w.A,{className:"w-3/4"}),(0,a.jsx)(w.A,{className:"w-1/2"})]}):M.length>0&&F?(0,a.jsx)(sY.A,{name:"".concat(j.chartPrefix||"").concat(j.name),unit:j.unit,attributes:j.attributes,data:M,yLeftMargin:A[j.key].margin,yFormatter:e=>sU(e,j.unit),tooltipFormatter:e=>sB(e,j.unit)}):(0,a.jsx)(te.A,{children:(0,a.jsx)(te.A.Content,{children:(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center",children:[(0,a.jsx)(sP.A,{className:"text-foreground-light mb-2"}),(0,a.jsx)("p",{className:"text-sm",children:"No data in period"}),(0,a.jsx)("p",{className:"text-sm text-foreground-light",children:"May take up to 24 hours to show"})]})})})]}):(0,a.jsx)(te.A,{children:(0,a.jsx)(te.A.Content,{children:(0,a.jsxs)("div",{className:"flex w-full items-center flex-col justify-center space-y-2 md:flex-row md:justify-between",children:[(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)("p",{className:"text-sm",children:"Not included in plan"}),(0,a.jsx)("div",{children:(0,a.jsx)("p",{className:"text-sm text-foreground-light",children:"You need to be on a higher plan in order to use this feature."})})]}),(0,a.jsx)(z.$,{type:"primary",asChild:!0,children:(0,a.jsx)(x(),{href:D,children:"Upgrade plan"})})]})})})})]})})};var s$=s(70699);async function sV(e,t){let{orgSlug:s}=e;if(!s)throw Error("orgSlug is required");let{data:a,error:n}=await (0,E.Jt)("/platform/organizations/{slug}/projects",{params:{path:{slug:s}},signal:t});return n&&(0,E.H4)(n),a}let sZ=function(e){let{orgSlug:t}=e,{enabled:s=!0,...a}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,C.I)(s$.g.orgProjects(t),e=>{let{signal:s}=e;return sV({orgSlug:t},s)},{enabled:s&&void 0!==t,...a})};var sJ=s(79050),sX=s(34053);let sK=e=>{var t,s;let{slug:n,projectRef:r,attribute:i,subscription:l,usage:o,currentBillingCycleSelected:d}=e,{data:c,isError:u,isLoading:m,isSuccess:p,error:h}=sZ({orgSlug:n},{enabled:d}),f=(0,g.useMemo)(()=>c?c.projects.filter(e=>{let t=e.is_branch&&e.databases.some(e=>{var t;return(null!=(t=e.disk_volume_size_gb)?t:8)>8}),s=e.status!==eZ.BU.INACTIVE,a=e.databases.every(e=>"AWS"===e.cloud_provider);return(!e.is_branch||t)&&s&&a}).filter(e=>e.ref===r||!r):[],[c,r]),y=(0,g.useMemo)(()=>f.some(e=>e.databases.some(e=>"READ_REPLICA"===e.type||e.disk_volume_size_gb&&e.disk_volume_size_gb>8)),[f]),j=null==o?void 0:o.usages.find(e=>e.metric===sT.Lb.DISK_SIZE_GB_HOURS_GP3),b=null==o?void 0:o.usages.find(e=>e.metric===sT.Lb.DISK_SIZE_GB_HOURS_IO2);return(0,a.jsx)("div",{id:i.anchor,className:"scroll-my-12","data-sentry-component":"DiskUsage","data-sentry-source-file":"DiskUsage.tsx",children:(0,a.jsxs)(sL,{section:i,"data-sentry-element":"SectionContent","data-sentry-source-file":"DiskUsage.tsx",children:[m&&(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(w.A,{}),(0,a.jsx)(w.A,{className:"w-3/4"}),(0,a.jsx)(w.A,{className:"w-1/2"})]}),u&&(0,a.jsx)(v.A,{subject:"Failed to retrieve usage data",error:h}),p&&(0,a.jsxs)("div",{className:"space-y-4",children:[d&&(null==l?void 0:l.usage_billing_enabled)===!1&&y&&(0,a.jsxs)(M.Fc,{variant:"warning",children:[(0,a.jsx)(L.HV,{}),(0,a.jsx)(M.XL,{children:"Projects exceeding quota"}),(0,a.jsx)(M.TN,{children:"You have projects that are exceeding 8 GB of provisioned disk size, but do not allow any overages with the Spend Cap on. Reduce the disk size or disable the spend cap."})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"flex items-center justify-between",children:(0,a.jsx)("div",{className:"flex items-center space-x-4",children:(0,a.jsxs)("p",{className:"text-sm",children:[i.name," usage"]})})}),(0,a.jsxs)("div",{className:"flex items-center justify-between border-b py-1",children:[(0,a.jsxs)("p",{className:"text-xs text-foreground-light",children:["Included in ",null==l||null==(t=l.plan)?void 0:t.name," Plan"]}),(0,a.jsx)("p",{className:"text-xs",children:"8 GB GP3 disk per project"})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("p",{className:"text-xs text-foreground-light",children:"Overages in period"}),(0,a.jsxs)("p",{className:"text-xs",children:[(null!=(s=null==j?void 0:j.usage)?s:0).toLocaleString()," GP3 GB-Hrs",(null==b?void 0:b.usage)?" / ".concat(b.usage.toLocaleString()," IO2 GB-Hrs"):""]})]})]}),d?(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)("p",{className:"text-sm",children:"Current disk size per project"}),(0,a.jsx)("p",{className:"text-sm text-foreground-light",children:"Breakdown of disk per project. Head to your project's disk management section to see database size used."})]}),0===f.length&&(0,a.jsx)(te.A,{children:(0,a.jsx)(te.A.Content,{children:(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center",children:[(0,a.jsx)("p",{className:"text-sm",children:"No active projects"}),(0,a.jsx)("p",{className:"text-sm text-foreground-light",children:"You don't have any active projects in this organization."})]})})}),f.map((e,t)=>{let s=e.databases.filter(e=>"PRIMARY"===e.type).reduce((e,t)=>{var s;return e+(null!=(s=t.disk_volume_size_gb)?s:8)},0),n=e.databases.filter(e=>"PRIMARY"!==e.type),r=n.reduce((e,t)=>{var s;return e+(null!=(s=t.disk_volume_size_gb)?s:8)},0);return(0,a.jsxs)("div",{className:t!==f.length-1?"border-b pb-2":"",children:[(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-foreground-light flex items-center gap-2",children:e.name}),(0,a.jsx)(z.$,{asChild:!0,type:"default",size:"tiny",children:(0,a.jsx)(x(),{href:"/project/".concat(e.ref,"/settings/compute-and-disk"),children:"Manage Disk"})})]}),(0,a.jsx)("div",{className:"flex flex-col gap-2",children:(0,a.jsxs)("div",{className:"flex items-center h-6 gap-3",children:[(0,a.jsxs)("span",{className:"text-foreground-light text-sm font-mono flex items-center gap-2",children:[(0,a.jsx)("span",{className:"text-foreground font-semibold -mt-[2px]",children:(0,a.jsx)(sJ.Ay,{value:s+r,style:{lineHeight:.8},className:"font-mono"})})," ","GB Disk provisioned"]}),(0,a.jsxs)(sX.I,{side:"top",children:[(0,a.jsxs)("p",{children:[s," GB for Primary Database"]}),n.length>0&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("p",{children:[r," GB for ",n.length," Read"," ",1===n.length?"Replica":"Replicas"]}),(0,a.jsx)("p",{className:"mt-1",children:"Read replicas have their own disk and use 25% more disk to account for WAL files."})]})]})]})})]},"usage-project-".concat(e.ref))})]}):(0,a.jsx)(te.A,{children:(0,a.jsx)(te.A.Content,{children:(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center",children:[(0,a.jsx)("p",{className:"text-sm",children:"Data not available"}),(0,a.jsx)("p",{className:"text-sm text-foreground-light",children:"Switch to current billing cycle to see current disk size per project."})]})})})]})]})})},sQ=e=>{var t;let{attribute:s,subscription:n,usage:r,currentBillingCycleSelected:i}=e,l=(0,g.useMemo)(()=>null==r?void 0:r.usages.find(e=>e.metric===sT.Lb.DATABASE_SIZE),[r]),o=(0,g.useMemo)(()=>null==l?void 0:l.project_allocations.some(e=>e.usage>.5*1e9),[l]);return(0,a.jsx)("div",{id:s.anchor,className:"scroll-my-12","data-sentry-component":"DatabaseSizeUsage","data-sentry-source-file":"DatabaseSizeUsage.tsx",children:(0,a.jsx)(sL,{section:s,"data-sentry-element":"SectionContent","data-sentry-source-file":"DatabaseSizeUsage.tsx",children:(0,a.jsxs)("div",{className:"space-y-4",children:[i&&o&&(0,a.jsxs)(M.Fc,{variant:"warning",children:[(0,a.jsx)(L.HV,{}),(0,a.jsx)(M.XL,{children:"Projects exceeding quota"}),(0,a.jsx)(M.TN,{children:"You have projects that are exceeding 0.5 GB of database size. Reduce the database size or upgrade to a paid plan."})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"flex items-center justify-between",children:(0,a.jsx)("div",{className:"flex items-center space-x-4",children:(0,a.jsxs)("p",{className:"text-sm",children:[s.name," usage"]})})}),(0,a.jsxs)("div",{className:"flex items-center justify-between border-b py-1",children:[(0,a.jsxs)("p",{className:"text-xs text-foreground-light",children:["Included in ",null==n||null==(t=n.plan)?void 0:t.name," Plan"]}),(0,a.jsx)("p",{className:"text-xs",children:"0.5 GB per project"})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("p",{className:"text-xs text-foreground-light",children:"Max database size"}),(0,a.jsx)("p",{className:"text-xs",children:(null==l?void 0:l.usage)?(0,se.z3)(null==l?void 0:l.usage_original):"-"})]})]}),i?(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("div",{className:"space-y-1",children:(0,a.jsx)("p",{className:"text-sm",children:"Current database size per project"})}),(null==l?void 0:l.project_allocations.length)===0&&(0,a.jsx)(te.A,{children:(0,a.jsx)(te.A.Content,{children:(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center",children:[(0,a.jsx)("p",{className:"text-sm",children:"No active projects"}),(0,a.jsx)("p",{className:"text-sm text-foreground-light",children:"You don't have any active projects in this organization."})]})})}),null==l?void 0:l.project_allocations.map((e,t)=>(0,a.jsxs)("div",{className:t!==l.project_allocations.length-1?"border-b pb-2":"",children:[(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-foreground-light flex items-center gap-2",children:e.name}),(0,a.jsx)(z.$,{asChild:!0,type:"default",size:"tiny",children:(0,a.jsx)(x(),{href:"/project/".concat(e.ref,"/reports/database#database-size-report"),children:"Manage Database Size"})})]}),(0,a.jsx)("div",{className:"flex flex-col gap-2",children:(0,a.jsxs)("div",{className:"flex items-center h-6 gap-3",children:[(0,a.jsxs)("span",{className:"text-foreground-light text-sm font-mono flex items-center gap-2",children:[(0,a.jsx)("span",{className:"text-foreground font-semibold font-mono -mt-[2px]",children:(0,se.z3)(e.usage)})," ","Database Size"]}),(0,a.jsx)(sX.I,{side:"top",children:(0,a.jsxs)("p",{children:[(0,se.z3)(e.usage)," GB database size as reported by Postgres."]})})]})})]},"usage-project-".concat(e.ref)))]}):(0,a.jsx)(te.A,{children:(0,a.jsx)(te.A.Content,{children:(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center",children:[(0,a.jsx)("p",{className:"text-sm",children:"Data not available"}),(0,a.jsx)("p",{className:"text-sm text-foreground-light",children:"Switch to current billing cycle to see current database size per project."})]})})})]})})})},s0=e=>{let{orgSlug:t,projectRef:s,categoryKey:n,chartMeta:r,subscription:i,currentBillingCycleSelected:l}=e,{data:o,error:d,isLoading:c,isError:u,isSuccess:m}=(0,sD.n)({orgSlug:t}),p=(0,sO.rj)(i).find(e=>e.key===n);return p?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(y.eh,{"data-sentry-element":"ScaffoldContainer","data-sentry-source-file":"UsageSection.tsx",children:(0,a.jsx)(sR,{title:p.name,description:p.description,"data-sentry-element":"SectionHeader","data-sentry-source-file":"UsageSection.tsx"})}),(0,a.jsx)(y.cJ,{"data-sentry-element":"ScaffoldDivider","data-sentry-source-file":"UsageSection.tsx"}),p.attributes.map(e=>"diskSize"===e.key?(0,a.jsx)(sK,{slug:t,projectRef:s,attribute:e,subscription:i,currentBillingCycleSelected:l,usage:o},e.name):e.key===sT.Lb.DATABASE_SIZE?(0,a.jsx)(sQ,{slug:t,projectRef:s,attribute:e,subscription:i,currentBillingCycleSelected:l,usage:o},e.name):(0,a.jsx)(sW,{slug:t,projectRef:s,attribute:e,usage:o,usageMeta:null==o?void 0:o.usages.find(t=>t.metric===e.key),chartMeta:r,subscription:i,error:d,isLoading:c,isError:u,isSuccess:m,currentBillingCycleSelected:l},e.name))]}):null},s1=e=>{var t,s,n,r,i,l;let{orgSlug:o,projectRef:d,subscription:c,startDate:u,endDate:m,currentBillingCycleSelected:p}=e,{data:h,isLoading:x}=(0,sT.Ym)({orgSlug:o,projectRef:d,metric:sT.Lb.MONTHLY_ACTIVE_USERS,interval:"1d",startDate:u,endDate:m}),{data:g,isLoading:f}=(0,sT.Ym)({orgSlug:o,projectRef:d,metric:sT.Lb.MONTHLY_ACTIVE_SSO_USERS,interval:"1d",startDate:u,endDate:m}),{data:y,isLoading:j}=(0,sT.Ym)({orgSlug:o,projectRef:d,metric:sT.Lb.STORAGE_IMAGES_TRANSFORMED,interval:"1d",startDate:u,endDate:m}),{data:v,isLoading:b}=(0,sT.Ym)({orgSlug:o,projectRef:d,metric:sT.Lb.FUNCTION_INVOCATIONS,interval:"1d",startDate:u,endDate:m}),{data:S,isLoading:A}=(0,sT.Ym)({orgSlug:o,projectRef:d,metric:sT.Lb.REALTIME_MESSAGE_COUNT,interval:"1d",startDate:u,endDate:m}),{data:N,isLoading:w}=(0,sT.Ym)({orgSlug:o,projectRef:d,metric:sT.Lb.REALTIME_PEAK_CONNECTIONS,interval:"1d",startDate:u,endDate:m}),_={[sT.Lb.MONTHLY_ACTIVE_USERS]:{data:null!=(t=null==h?void 0:h.data)?t:[],margin:18,isLoading:x},[sT.Lb.MONTHLY_ACTIVE_SSO_USERS]:{data:null!=(s=null==g?void 0:g.data)?s:[],margin:20,isLoading:f},[sT.Lb.STORAGE_IMAGES_TRANSFORMED]:{data:null!=(n=null==y?void 0:y.data)?n:[],margin:0,isLoading:j},[sT.Lb.FUNCTION_INVOCATIONS]:{data:null!=(r=null==v?void 0:v.data)?r:[],margin:26,isLoading:b},[sT.Lb.REALTIME_MESSAGE_COUNT]:{data:null!=(i=null==S?void 0:S.data)?i:[],margin:38,isLoading:A},[sT.Lb.REALTIME_PEAK_CONNECTIONS]:{data:null!=(l=null==N?void 0:N.data)?l:[],margin:0,isLoading:w}};return(0,a.jsx)(s0,{orgSlug:o,projectRef:d,categoryKey:"activity",chartMeta:_,subscription:c,currentBillingCycleSelected:p,"data-sentry-element":"UsageSection","data-sentry-component":"Activity","data-sentry-source-file":"Activity.tsx"})},s2=e=>{var t;let{orgSlug:s,projectRef:n,subscription:r,startDate:i,endDate:l,currentBillingCycleSelected:o}=e,{data:d,isLoading:c}=(0,sT.Ym)({orgSlug:s,projectRef:n,metric:sT.Lb.EGRESS,interval:"1d",startDate:i,endDate:l}),u={[sT.Lb.EGRESS]:{data:null!=(t=null==d?void 0:d.data)?t:[],margin:16,isLoading:c}};return(0,a.jsx)(s0,{orgSlug:s,projectRef:n,categoryKey:"bandwidth",chartMeta:u,subscription:r,currentBillingCycleSelected:o,"data-sentry-element":"UsageSection","data-sentry-component":"Bandwidth","data-sentry-source-file":"Bandwidth.tsx"})};var s4=s(36314);async function s3(e,t){let{orgSlug:s,startDate:a,endDate:n,projectRef:r}=e;if(!s)throw Error("Org slug is required");if(!a)throw Error("Start date is required");if(!n)throw Error("End date is required");"/platform/organizations/{slug}/daily-stats/compute?&startDate=".concat(encodeURIComponent(a),"&endDate=").concat(encodeURIComponent(n));let{data:i,error:l}=await (0,E.Jt)("/platform/organizations/{slug}/daily-stats/compute",{params:{path:{slug:s},query:{projectRef:r,startDate:a,endDate:n}},signal:t});return l&&(0,E.H4)(l),i}let s9=function(e){let{orgSlug:t,startDate:s,endDate:a,projectRef:n,dateFormat:r="DD MMM"}=e,{enabled:i=!0,...o}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,C.I)(s4.P.orgDailyComputeStats(t,{startDate:s,endDate:a,projectRef:n}),e=>{let{signal:r}=e;return s3({orgSlug:t,startDate:s,endDate:a,projectRef:n},r)},{enabled:i&&void 0!==t&&void 0!==s&&void 0!==a,select:e=>({...e,data:e.data.map(e=>({...e,periodStartFormatted:l()(e.period_start).format(r)}))}),staleTime:36e5,...o})},s5=e=>{var t;let{orgSlug:s,projectRef:n,startDate:r,endDate:i}=e,l=Object.values(sT.Fg).map(e=>e.toLowerCase()),{data:o,isLoading:d,error:c,isSuccess:u}=s9({orgSlug:s,projectRef:n,startDate:r,endDate:i}),m=null!=(t=null==o?void 0:o.data)?t:[],p={[sT.Fg.COMPUTE_HOURS_BRANCH]:"blue",[sT.Fg.COMPUTE_HOURS_XS]:"white",[sT.Fg.COMPUTE_HOURS_SM]:"green",[sT.Fg.COMPUTE_HOURS_MD]:"dark-green",[sT.Fg.COMPUTE_HOURS_L]:"yellow",[sT.Fg.COMPUTE_HOURS_XL]:"dark-yellow",[sT.Fg.COMPUTE_HOURS_2XL]:"orange",[sT.Fg.COMPUTE_HOURS_4XL]:"dark-orange",[sT.Fg.COMPUTE_HOURS_8XL]:"red",[sT.Fg.COMPUTE_HOURS_12XL]:"dark-red",[sT.Fg.COMPUTE_HOURS_16XL]:"purple",[sT.Fg.COMPUTE_HOURS_24XL]:"purple",[sT.Fg.COMPUTE_HOURS_24XL_OPTIMIZED_CPU]:"purple",[sT.Fg.COMPUTE_HOURS_24XL_OPTIMIZED_MEMORY]:"purple",[sT.Fg.COMPUTE_HOURS_24XL_HIGH_MEMORY]:"purple",[sT.Fg.COMPUTE_HOURS_48XL]:"purple",[sT.Fg.COMPUTE_HOURS_48XL_OPTIMIZED_CPU]:"purple",[sT.Fg.COMPUTE_HOURS_48XL_OPTIMIZED_MEMORY]:"purple",[sT.Fg.COMPUTE_HOURS_48XL_HIGH_MEMORY]:"purple"},h=Object.keys(sT.Fg).map(e=>({key:e.toLowerCase(),color:p[e]||"white",name:(0,sT.pc)(e)})),x=(0,g.useMemo)(()=>l.filter(e=>m.some(t=>t[e])),[m]),f=(0,g.useMemo)(()=>x.length>0,[x]);return(0,a.jsx)("div",{id:"compute",className:"scroll-my-12","data-sentry-component":"Compute","data-sentry-source-file":"Compute.tsx",children:(0,a.jsxs)(sL,{section:{name:"Compute Hours",description:"Amount of hours your projects were active. Each project is a dedicated server and database.\nPaid plans come with $10 in Compute Credits to cover one project running on Micro Compute or parts of any compute add-on.\nBilling is based on the sum of Compute Hours used. Paused projects do not count towards usage.",links:[{name:"Compute Add-ons",url:"https://supabase.com/docs/guides/platform/compute-add-ons"},{name:"Usage-billing for Compute",url:"https://supabase.com/docs/guides/platform/manage-your-usage/compute"}]},"data-sentry-element":"SectionContent","data-sentry-source-file":"Compute.tsx",children:[d&&(0,a.jsx)(w.y,{}),null!=c&&(0,a.jsx)(v.A,{subject:"Failed to retrieve usage data",error:c}),u&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"space-y-1",children:[m.length>0&&(0,a.jsx)("div",{className:"flex items-center justify-between",children:(0,a.jsx)("div",{className:"flex items-center space-x-4",children:(0,a.jsx)("p",{className:"text-sm",children:"Compute Hours usage"})})}),x.map(e=>(0,a.jsxs)("div",{className:"flex items-center justify-between border-b last:border-b-0 py-1 last:py-0",children:[(0,a.jsxs)("p",{className:"text-sm text-foreground-light",children:[(0,a.jsx)("span",{className:"font-medium",children:(0,sT.pc)(e.toUpperCase())})," ","Compute Hours usage in period"]}),(0,a.jsxs)("p",{className:"text-sm",children:[m.reduce((t,s)=>{var a;return t+(null!=(a=s[e])?a:0)},0)," hours"]})]},e))]}),(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)("p",{className:"text-sm",children:"Compute Hours usage per day"}),(0,a.jsx)("p",{className:"text-sm text-foreground-light",children:"The data refreshes every hour."})]}),d?(0,a.jsx)(w.y,{}):m.length>0&&f?(0,a.jsx)(sY.A,{name:"Compute Hours usage",unit:"hours",attributes:h,data:m,yMin:24}):(0,a.jsx)(te.A,{children:(0,a.jsx)(te.A.Content,{children:(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center",children:[(0,a.jsx)(sP.A,{className:"text-foreground-light mb-2"}),(0,a.jsx)("p",{className:"text-sm",children:"No data in period"}),(0,a.jsx)("p",{className:"text-sm text-foreground-light",children:"May take up to one hour to show"})]})})})]})]})})},s6=e=>{var t,s;let{orgSlug:n,projectRef:r,startDate:i,endDate:l,subscription:o,currentBillingCycleSelected:d}=e,{data:c,isLoading:u}=(0,sT.Ym)({orgSlug:n,projectRef:r,metric:sT.Lb.DATABASE_SIZE,interval:"1d",startDate:i,endDate:l}),{data:m,isLoading:p}=(0,sT.Ym)({orgSlug:n,projectRef:r,metric:sT.Lb.STORAGE_SIZE,interval:"1d",startDate:i,endDate:l}),h={[sT.Lb.DATABASE_SIZE]:{isLoading:u,margin:14,data:null!=(t=null==c?void 0:c.data)?t:[]},[sT.Lb.STORAGE_SIZE]:{isLoading:p,margin:14,data:null!=(s=null==m?void 0:m.data)?s:[]}};return(0,a.jsx)(s0,{orgSlug:n,projectRef:r,categoryKey:"sizeCount",chartMeta:h,subscription:o,currentBillingCycleSelected:d,"data-sentry-element":"UsageSection","data-sentry-component":"SizeAndCounts","data-sentry-source-file":"SizeAndCounts.tsx"})},s8=[{key:sT.Lb.DATABASE_SIZE,name:"Database Size",units:"bytes",anchor:"dbSize",category:"Database",unitName:"GB",tip:"Database size refers to the actual amount of space used by all your database objects, as reported by Postgres. This measurement reflects your current database size at this moment. Free Plan projects are limited to 0.5 GB Database Size each and are monitored across the entire billing period."},{key:sT.Lb.EGRESS,name:"Egress",units:"bytes",anchor:"egress",category:"Database",unitName:"GB"},{key:sT.Lb.MONTHLY_ACTIVE_USERS,name:"Monthly Active Users",units:"absolute",anchor:"mau",category:"Authentication",unitName:"MAU"},{key:sT.Lb.MONTHLY_ACTIVE_SSO_USERS,name:"Monthly Active SSO Users",units:"absolute",anchor:"mauSso",category:"Authentication",unitName:"MAU"},{key:sT.Lb.MONTHLY_ACTIVE_THIRD_PARTY_USERS,name:"Monthly Active Third-Party Users",units:"absolute",category:"Authentication",unitName:"MAU"},{key:sT.Lb.STORAGE_SIZE,name:"Storage Size",units:"bytes",anchor:"storageSize",category:"Storage",unitName:"GB"},{key:sT.Lb.STORAGE_IMAGES_TRANSFORMED,name:"Storage Image Transformations",units:"absolute",anchor:"storageImageTransformations",category:"Storage"},{key:sT.Lb.REALTIME_PEAK_CONNECTIONS,name:"Realtime Concurrent Peak Connections",units:"absolute",anchor:"realtimePeakConnections",category:"Realtime"},{key:sT.Lb.REALTIME_MESSAGE_COUNT,name:"Realtime Messages",units:"absolute",anchor:"realtimeMessageCount",category:"Realtime"},{key:sT.Lb.FUNCTION_INVOCATIONS,name:"Edge Function Invocations",units:"absolute",anchor:"funcInvocations",category:"Edge Functions"},{key:sT.Lb.DISK_SIZE_GB_HOURS_GP3,name:"Disk Size",anchor:"diskSize",units:"absolute",unitName:"GB-Hrs",category:"Database",tip:"Each project gets provisioned with 8 GB of GP3 disk for free. When you get close to the disk size limit, we autoscale your disk by 1.5x. Each GB of provisioned disk size beyond 8 GB incurs a GB-Hr every hour. Each extra GB is billed at $0.125/month ($0.000171/GB-Hr), prorated down to the hour.",docLink:{title:"Read more",url:"https://supabase.com/docs/guides/platform/manage-your-usage/disk-size"}},{key:sT.Lb.DISK_SIZE_GB_HOURS_IO2,name:"Disk Size IO2",anchor:"diskSize",units:"absolute",unitName:"GB-Hrs",category:"Database"},{key:sT.Lb.DISK_IOPS_IO2,name:"Disk IOPS IO2",units:"absolute",unitName:"IOPS-Hrs",category:"Database"},{key:sT.Lb.DISK_IOPS_GP3,name:"Disk IOPS GP3",units:"absolute",unitName:"IOPS-Hrs",category:"Database"},{key:sT.Lb.DISK_THROUGHPUT_GP3,name:"Disk Throughput",units:"absolute",unitName:"IOPS-Hrs",category:"Database"},{key:sT.Lb.LOG_DRAIN_EVENTS,name:"Log Drain Events",units:"absolute",category:"Database"}];var s7=s(63212),ae=s(56529),at=s(57728);let as=e=>{var t;let{slug:s,metric:n,usage:r,subscription:i,relativeToSubscription:l}=e,o=r.usages.find(e=>e.metric===n.key),d=(0,g.useMemo)(()=>{var e,t,s,a;return o?l&&!1===o.available_in_plan?"Unavailable in plan":o.cost&&o.cost>0||!l||o.unlimited||0===o.pricing_free_units?"bytes"===n.units||"gigabytes"===n.units?"".concat(null!=(e=o.usage.toLocaleString())?e:0," GB"):o.usage.toLocaleString()+(n.unitName?" ".concat(n.unitName):""):"bytes"===n.units||"gigabytes"===n.units?"".concat(null!=(s=o.usage.toLocaleString())?s:0," / ").concat(null!=(a=o.pricing_free_units)?a:0," GB"):"".concat(o.usage.toLocaleString()," / ").concat(null==(t=o.pricing_free_units)?void 0:t.toLocaleString())+(n.unitName?" ".concat(n.unitName):""):""},[o,l,n]),c=(0,g.useMemo)(()=>o&&o.project_allocations?o.project_allocations.sort((e,t)=>t.usage-e.usage):[],[o]);if(!o)return null;let u=0===o.usage?0:o.usage/(null!=(t=o.pricing_free_units)?t:0),m=(null==i?void 0:i.usage_billing_enabled)===!0,p=!1==!!o.unlimited,h=p&&u>=.8,f=l&&p&&u>=1,y=(0,ae.mX)(o.metric),j=0===o.usage||0===o.pricing_free_units?"":u<.01?"(<1%)":"(".concat((+(100*u).toFixed(0)).toLocaleString(),"%)");return(0,a.jsxs)(s7.jc,{openDelay:50,closeDelay:200,"data-sentry-element":"HoverCard","data-sentry-component":"BillingMetric","data-sentry-source-file":"BillingMetric.tsx",children:[(0,a.jsx)(s7.d0,{asChild:!0,"data-sentry-element":"HoverCardTrigger","data-sentry-source-file":"BillingMetric.tsx",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)(x(),{href:"/org/".concat(s,"/usage#").concat(n.anchor),className:"block w-full group","data-sentry-element":"Link","data-sentry-source-file":"BillingMetric.tsx",children:[n.anchor?(0,a.jsxs)("div",{className:"group flex items-center gap-1",children:[(0,a.jsx)("p",{className:"text-sm text-foreground-light group-hover:text-foreground transition cursor-pointer",children:n.name}),o.available_in_plan&&(0,a.jsx)("span",{className:"transition inline-block group-hover:transform group-hover:translate-x-0.5",children:(0,a.jsx)(at.A,{strokeWidth:1.5,size:16,className:"transition"})})]}):(0,a.jsx)("p",{className:"text-xs text-foreground-light flex space-x-1",children:n.name}),(0,a.jsx)("span",{className:"text-sm",children:d}),"\xa0",l&&o.cost&&o.cost>0?(0,a.jsxs)("span",{className:"text-sm",translate:"no",children:["(",(0,se.vv)(o.cost),")"]}):o.available_in_plan&&!o.unlimited&&l?(0,a.jsx)("span",{className:"text-sm",children:j}):null]}),o.available_in_plan?(0,a.jsx)("div",{children:l&&!o.unlimited?(0,a.jsxs)("svg",{className:"h-8 w-8 -rotate-90 transform",children:[(0,a.jsx)("circle",{cx:15,cy:15,r:12,fill:"transparent",stroke:"currentColor",strokeWidth:4,className:"text-background-surface-300"}),(0,a.jsx)("circle",{cx:15,cy:15,r:12,fill:"transparent",stroke:"currentColor",strokeDasharray:75.398,strokeDashoffset:"calc(75.39822 - ".concat(u<1?100*u:100," / 100 * 75.39822)"),strokeWidth:4,className:m?"text-gray-dark-800":f?"text-red-900":h?"text-yellow-1000":"text-gray-dark-800"})]}):null}):(0,a.jsx)("div",{children:(0,a.jsx)(z.$,{type:"default",asChild:!0,children:(0,a.jsx)(x(),{href:"/org/".concat(s,"/billing?panel=subscriptionPlan&source=billingBreakdownUsage").concat(n.anchor),children:"Upgrade"})})})]})}),o.available_in_plan&&(0,a.jsx)(s7.Et,{side:"bottom",align:"center",className:"w-[500px]",animate:"slide-in",children:(0,a.jsxs)("div",{className:"text-sm",children:[(0,a.jsx)("p",{className:"font-medium",translate:"no",children:o.unit_price_desc}),n.tip&&(0,a.jsx)("div",{className:"my-2",children:(0,a.jsxs)("p",{className:"text-sm",children:[n.tip," ",n.docLink&&(0,a.jsx)(x(),{href:n.docLink.url,target:"_blank",className:"transition text-brand hover:text-brand-600 underline",children:n.docLink.title})]})}),!1===i.usage_billing_enabled&&l&&(h||f)&&(0,a.jsx)("div",{className:"my-2",children:(0,a.jsx)("p",{className:"text-sm",children:"Exceeding your plans included usage will lead to restrictions to your project. Upgrade to a usage-based plan or disable the spend cap to avoid restrictions."})}),c&&c.length>0&&(0,a.jsxs)("table",{className:"list-disc w-full",children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"text-left",children:"Project"}),(0,a.jsx)("th",{className:"text-right",children:"Usage"})]})}),(0,a.jsxs)("tbody",{children:[c.map(e=>(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{children:e.name}),(0,a.jsx)("td",{className:"text-right",children:(0,ae.pK)(o.metric,e)})]},"".concat(o.metric,"_").concat(e.ref))),(0,a.jsx)("tr",{})]}),(0,a.jsx)("tfoot",{children:(0,a.jsxs)("tr",{children:[(0,a.jsxs)("td",{className:"py-2 border-t text-left",children:["Total",y&&(0,a.jsxs)("span",{children:[" (",y,")"]})]}),(0,a.jsxs)("td",{className:"py-2 border-t text-right",children:[(0,ae.pK)(o.metric,{usage:o.usage_original})," "]})]})})]})]})})]})},aa=e=>{let{slug:t,metric:s,usage:n,relativeToSubscription:r}=e,i=n.usages.find(e=>e.metric===s.key),l=(0,g.useMemo)(()=>{var e,t,s,a,n;return(null==i?void 0:i.pricing_free_units)?"".concat(null!=(t=null==i||null==(e=i.usage)?void 0:e.toLocaleString())?t:0," / ").concat(null!=(s=null==i?void 0:i.pricing_free_units)?s:0," hours"):"".concat(null!=(n=null==i||null==(a=i.usage)?void 0:a.toLocaleString())?n:0," hours")},[i]),o=(0,g.useMemo)(()=>i&&i.project_allocations?i.project_allocations.sort((e,t)=>t.usage-e.usage):[],[i]);return(0,a.jsxs)(s7.jc,{openDelay:50,closeDelay:200,"data-sentry-element":"HoverCard","data-sentry-component":"ComputeMetric","data-sentry-source-file":"ComputeMetric.tsx",children:[(0,a.jsx)(s7.d0,{"data-sentry-element":"HoverCardTrigger","data-sentry-source-file":"ComputeMetric.tsx",children:(0,a.jsxs)("div",{children:[(0,a.jsx)(x(),{href:"/org/".concat(t,"/usage#").concat(s.anchor),"data-sentry-element":"Link","data-sentry-source-file":"ComputeMetric.tsx",children:(0,a.jsxs)("div",{className:"group flex items-center space-x-2",children:[(0,a.jsx)("p",{className:"text-sm text-foreground-light group-hover:text-foreground transition cursor-pointer",children:s.name}),(0,a.jsx)(at.A,{strokeWidth:1.5,size:16,className:"transition","data-sentry-element":"ChevronRight","data-sentry-source-file":"ComputeMetric.tsx"})]})}),(0,a.jsx)("span",{className:"text-sm",children:l}),"\xa0",r&&(null==i?void 0:i.cost)&&i.cost>0?(0,a.jsxs)("span",{className:"text-sm",translate:"no",children:["(",(0,se.vv)(null==i?void 0:i.cost),")"]}):null]})}),(0,a.jsx)(s7.Et,{side:"bottom",align:"center",className:"w-[500px]",animate:"slide-in","data-sentry-element":"HoverCardContent","data-sentry-source-file":"ComputeMetric.tsx",children:(0,a.jsxs)("div",{className:"text-sm text-foreground space-y-2",children:[(0,a.jsx)("p",{className:"font-medium",translate:"no",children:null==i?void 0:i.unit_price_desc}),(0,a.jsx)("div",{className:"my-2",children:(null==i?void 0:i.metric)===sT.Fg.COMPUTE_HOURS_BRANCH?(0,a.jsxs)("p",{className:"text-sm",children:["Each Preview branch is a separate environment with all Supabase services (Database, Auth, Storage, etc.)."," ",(0,a.jsx)(x(),{href:"https://supabase.com/docs/guides/platform/manage-your-usage/branching",target:"_blank",className:"transition text-brand hover:text-brand-600 underline",children:"Read more"})]}):(0,a.jsxs)("p",{className:"text-sm",children:["Every project is a dedicated server and database. For every hour your project is active, it incurs compute costs based on the compute size of your project. Paused projects do not incur compute costs."," ",(0,a.jsx)(x(),{href:"https://supabase.com/docs/guides/platform/manage-your-usage/compute",target:"_blank",className:"transition text-brand hover:text-brand-600 underline",children:"Read more"})]})}),i&&o.length>0&&(0,a.jsxs)("table",{className:"list-disc w-full",children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"text-left",children:"Project"}),(0,a.jsx)("th",{className:"text-right",children:"Usage"})]})}),(0,a.jsxs)("tbody",{children:[o.map(e=>(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{children:e.name}),(0,a.jsx)("td",{className:"text-right",children:(0,ae.pK)(i.metric,e)})]},"".concat(i.metric,"_").concat(e.ref))),(0,a.jsx)("tr",{})]}),(0,a.jsx)("tfoot",{children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{className:"py-2 border-t text-left",children:"Total (Hours)"}),(0,a.jsx)("td",{className:"py-2 border-t text-right",children:(0,ae.pK)(i.metric,{usage:i.usage_original})})]})})]})]})})]})},an=[sT.Lb.DISK_IOPS_IO2,sT.Lb.DISK_IOPS_GP3,sT.Lb.DISK_SIZE_GB_HOURS_GP3,sT.Lb.DISK_SIZE_GB_HOURS_IO2,sT.Lb.DISK_THROUGHPUT_GP3],ar=e=>{var t,s;let{orgSlug:n,projectRef:r,subscription:i,startDate:l,endDate:o,currentBillingCycleSelected:d}=e,c=null==i?void 0:i.usage_billing_enabled,{data:u,error:m,isLoading:p,isError:h,isSuccess:x}=(0,sD.n)({orgSlug:n,projectRef:r,start:!d&&l?new Date(l):void 0,end:!d&&o?new Date(o):void 0}),f=d&&!r,y=f&&!!(null==u?void 0:u.usages.find(e=>{var t;return!e.metric.startsWith("COMPUTE_")&&!e.unlimited&&e.usage>(null!=(t=null==e?void 0:e.pricing_free_units)?t:0)})),j=(0,g.useMemo)(()=>u?s8.filter(e=>u.usages.some(t=>t.metric===e.key)).filter(e=>{if(!an.includes(e.key))return!0;let t=u.usages.find(t=>t.metric===e.key);return t&&t.usage>0}).slice().sort((e,t)=>{var s,a,n,r;let i=u.usages.find(t=>t.metric===e.key),l="number"!=typeof i?(null!=(s=null==i?void 0:i.usage)?s:0)/(null!=(a=null==i?void 0:i.pricing_free_units)?a:0):0,o=u.usages.find(e=>e.metric===t.key),d="number"!=typeof o?(null!=(n=null==o?void 0:o.usage)?n:0)/(null!=(r=null==o?void 0:o.pricing_free_units)?r:0):0;return Number(null==o?void 0:o.available_in_plan)-Number(null==i?void 0:i.available_in_plan)||d-l}):[],[u]),b=((null==u?void 0:u.usages)||[]).filter(e=>e.metric.startsWith("COMPUTE")).map(e=>e.metric);return(0,a.jsx)("div",{id:"summary","data-sentry-component":"TotalUsage","data-sentry-source-file":"TotalUsage.tsx",children:(0,a.jsxs)(sL,{section:{name:"Usage Summary",description:c?"Your plan includes a limited amount of usage. If exceeded, you will be charged for the overages. It may take up to 1 hour to refresh.":"Your plan includes a limited amount of usage. If exceeded, you may experience restrictions, as you are currently not billed for overages. It may take up to 1 hour to refresh.",links:[{name:"How billing works",url:"https://supabase.com/docs/guides/platform/billing-on-supabase"},{name:"Supabase Plans",url:"https://supabase.com/pricing"}]},"data-sentry-element":"SectionContent","data-sentry-source-file":"TotalUsage.tsx",children:[p&&(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(w.A,{}),(0,a.jsx)(w.A,{className:"w-3/4"}),(0,a.jsx)(w.A,{className:"w-1/2"})]}),h&&(0,a.jsx)(v.A,{subject:"Failed to retrieve usage data",error:m}),x&&i&&(0,a.jsxs)("div",{children:[f&&(0,a.jsx)("p",{className:"text-sm",children:y?y&&(null==i||null==(t=i.plan)?void 0:t.id)==="free"?(0,a.jsxs)("span",{children:["You have exceeded your"," ",(0,a.jsx)("span",{className:"font-medium",children:null==i?void 0:i.plan.name})," Plan quota in this billing cycle. Upgrade your plan to continue using Supabase without restrictions."]}):y&&(null==i?void 0:i.usage_billing_enabled)===!1&&(null==i||null==(s=i.plan)?void 0:s.id)==="pro"?(0,a.jsxs)("span",{children:["You have exceeded your"," ",(0,a.jsx)("span",{className:"font-medium",children:null==i?void 0:i.plan.name})," Plan quota in this billing cycle. Disable your spend cap to continue using Supabase without restrictions."]}):y&&(null==i?void 0:i.usage_billing_enabled)===!0?(0,a.jsxs)("span",{children:["You have exceeded your"," ",(0,a.jsx)("span",{className:"font-medium",children:null==i?void 0:i.plan.name})," Plan quota in this billing cycle and will be charged for over-usage."]}):(0,a.jsxs)("span",{children:["You have not exceeded your"," ",(0,a.jsx)("span",{className:"font-medium",children:null==i?void 0:i.plan.name})," Plan quota in this billing cycle."]}):(0,a.jsxs)("span",{children:["You have not exceeded your"," ",(0,a.jsx)("span",{className:"font-medium",children:null==i?void 0:i.plan.name})," Plan quota in this billing cycle."]})}),(0,a.jsxs)("div",{className:"grid grid-cols-12 mt-3",children:[j.map((e,t)=>(0,a.jsx)("div",{className:(0,t$.cn)("col-span-12 md:col-span-6 space-y-4 py-4 border-overlay",t%2==0?"md:border-r md:pr-4":"md:pl-4","border-b"),children:(0,a.jsx)(as,{idx:t,slug:n,metric:e,usage:u,subscription:i,relativeToSubscription:f})},e.key)),b.map((e,t)=>(0,a.jsx)("div",{className:(0,t$.cn)("col-span-12 md:col-span-6 space-y-4 py-4 border-overlay",(t+j.length)%2==0?"md:border-r md:pr-4":"md:pl-4","border-b"),children:(0,a.jsx)(aa,{slug:n,metric:{key:e,name:(0,sT.pc)(e)+" Compute Hours",units:"hours",anchor:"compute",category:"Compute",unitName:"GB"},relativeToSubscription:f,usage:u})},e))]})]})]})})},ai=()=>{let{slug:e,projectRef:t}=(0,r.g)(),[s,i]=(0,g.useState)(),[o,d]=(0,g.useState)(),c=(0,P.SE)(n.aG.BILLING_READ,"stripe.subscriptions"),u=(0,V.a)(),{data:m,isSuccess:p}=(0,I.el)(),{data:h,error:f,isLoading:j,isError:b,isSuccess:S}=(0,s_.j5)({orgSlug:e}),A=null==m?void 0:m.filter(e=>e.organization_id===(null==u?void 0:u.id));(0,g.useEffect)(()=>{t&&p&&void 0!==A&&A.find(e=>e.ref===t)&&d(t)},[t,p]);let _=(0,g.useMemo)(()=>{var e;return l().unix(null!=(e=null==h?void 0:h.current_period_start)?e:0).utc()},[h]),C=(0,g.useMemo)(()=>{var e;return l().unix(null!=(e=null==h?void 0:h.current_period_end)?e:0).utc()},[h]),E=(0,g.useMemo)(()=>null==s||!s.period_start||null==s||!s.period_end||l()(s.period_start.date).isSame(_)&&l()(s.period_end.date).isSame(C),[s,_,C]),k=(0,g.useMemo)(()=>{var e,t;if(null==s||null==(e=s.period_start)?void 0:e.date)return new Date(null==s||null==(t=s.period_start)?void 0:t.date).toISOString().slice(0,-5)+"Z"},[s,h]),T=(0,g.useMemo)(()=>{var e,t;return(null==s||null==(e=s.period_end)?void 0:e.date)&&l()(s.period_end.date).isAfter(l()())?l()().endOf("day").toISOString().slice(0,-5)+"Z":(null==s||null==(t=s.period_end)?void 0:t.date)?new Date(s.period_end.date).toISOString().slice(0,-5)+"Z":void 0},[s,h]),D=o?null==A?void 0:A.find(e=>e.ref===o):void 0;return c?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(y.Vw,{"data-sentry-element":"ScaffoldContainerLegacy","data-sentry-source-file":"Usage.tsx",children:(0,a.jsx)(y.Dm,{"data-sentry-element":"ScaffoldTitle","data-sentry-source-file":"Usage.tsx",children:"Usage"})}),(0,a.jsx)("div",{className:"sticky top-0 border-b bg-studio z-[1] overflow-hidden ",children:(0,a.jsx)(y.eh,{className:"","data-sentry-element":"ScaffoldContainer","data-sentry-source-file":"Usage.tsx",children:(0,a.jsxs)("div",{className:"py-4 flex items-center space-x-4",children:[j&&(0,a.jsx)(w.A,{className:"w-[250px]"}),b&&(0,a.jsx)(v.A,{className:"w-full",subject:"Failed to retrieve usage data",error:f}),S&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(sw.A,{onChange:i,value:sC.L3[0].key,options:[...sC.L3,...sC.PJ],loading:j,currentBillingPeriodStart:null==h?void 0:h.current_period_start,currentBillingPeriodEnd:null==h?void 0:h.current_period_end}),(0,a.jsxs)(sE.A,{size:"tiny",name:"schema",className:"w-[180px]",value:o,onChange:e=>{"all-projects"===e?d(void 0):d(e)},children:[(0,a.jsx)(sE.A.Option,{id:"all-projects",label:"All projects",value:"all-projects",children:"All projects"},"all-projects"),null==A?void 0:A.map(e=>(0,a.jsx)(sE.A.Option,{id:e.ref,value:e.ref,label:e.name,children:e.name},e.ref))]}),(0,a.jsxs)("div",{className:"flex flex-col xl:flex-row xl:gap-3",children:[(0,a.jsxs)("p",{className:(0,t$.cn)("text-sm transition",j&&"opacity-50"),children:["Organization is on the ",h.plan.name," plan"]}),(0,a.jsxs)("p",{className:"text-sm text-foreground-light",children:[_.format("DD MMM YYYY")," -"," ",C.format("DD MMM YYYY")]})]})]})]})})}),o?(0,a.jsx)(y.eh,{className:"mt-5",children:(0,a.jsx)(F.Z,{type:"default",title:"Usage filtered by project",description:(0,a.jsxs)("div",{children:['You are currently viewing usage for the "',(null==D?void 0:D.name)||o,'" project. Supabase uses'," ",(0,a.jsx)(x(),{href:"/docs/guides/platform/billing-on-supabase#organization-based-billing",target:"_blank",children:"organization-level billing"})," ",'and quotas. For billing purposes, we sum up usage from all your projects. To view your usage quota, set the project filter above back to "All Projects".']})})}):(0,a.jsx)(y.eh,{id:"restriction",className:"mt-5",children:(0,a.jsx)(sk.R,{})}),(0,a.jsx)(ar,{orgSlug:e,projectRef:o,subscription:h,startDate:k,endDate:T,currentBillingCycleSelected:E,"data-sentry-element":"TotalUsage","data-sentry-source-file":"Usage.tsx"}),(null==h?void 0:h.plan.id)!=="free"&&(0,a.jsx)(s5,{orgSlug:e,projectRef:o,subscription:h,startDate:k,endDate:T}),(0,a.jsx)(s2,{orgSlug:e,projectRef:o,subscription:h,startDate:k,endDate:T,currentBillingCycleSelected:E,"data-sentry-element":"Bandwidth","data-sentry-source-file":"Usage.tsx"}),(0,a.jsx)(s6,{orgSlug:e,projectRef:o,subscription:h,startDate:k,endDate:T,currentBillingCycleSelected:E,"data-sentry-element":"SizeAndCounts","data-sentry-source-file":"Usage.tsx"}),(0,a.jsx)(s1,{orgSlug:e,projectRef:o,subscription:h,startDate:k,endDate:T,currentBillingCycleSelected:E,"data-sentry-element":"Activity","data-sentry-source-file":"Usage.tsx"})]}):(0,a.jsx)(y.Vw,{children:(0,a.jsx)(N.A,{resourceText:"view organization usage"})})}},66790:(e,t,s)=>{s.d(t,{hs:()=>l,rj:()=>o});var a=s(80263),n=s(9787),r=s(82078),i=s(84161);let l={white:{bar:"fill-foreground",marker:"bg-foreground"},green:{bar:"fill-green-800",marker:"bg-green-800"},"dark-green":{bar:"fill-green-1000",marker:"bg-green-1000"},blue:{bar:"fill-blue-900",marker:"bg-blue-900"},yellow:{bar:"fill-yellow-800",marker:"bg-yellow-800"},"dark-yellow":{bar:"fill-yellow-1000",marker:"bg-yellow-1000"},orange:{bar:"fill-orange-800",marker:"bg-orange-800"},"dark-orange":{bar:"fill-orange-1000",marker:"bg-orange-1100"},teal:{bar:"fill-teal-600",marker:"bg-teal-700"},red:{bar:"fill-red-800",marker:"bg-red-800"},"dark-red":{bar:"fill-red-1000",marker:"bg-red-1000"},purple:{bar:"fill-purple-900",marker:"bg-purple-900"}},o=e=>[{key:"bandwidth",name:"Bandwidth",description:"Amount of data transmitted over all network connections",attributes:[{anchor:"egress",key:r.Lb.EGRESS,attributes:[{key:r.K5.AUTH,name:"Auth Egress",color:"yellow"},{key:r.K5.DATABASE,name:"Database Egress",color:"green"},{key:r.K5.STORAGE,name:"Storage Egress",color:"blue"},{key:r.K5.REALTIME,name:"Realtime Egress",color:"orange"},{key:r.K5.FUNCTIONS,name:"Functions Egress",color:"purple"},{key:r.K5.SUPAVISOR,name:"Shared Pooler Egress",color:"red"},{key:r.K5.LOGDRAIN,name:"Logdrain Egress",color:"teal"}],name:"Total Egress",unit:"bytes",description:"Contains any outgoing traffic including Database, Storage, Realtime, Auth, API, Edge Functions, Pooler and Log Drains.\nBilling is based on the total sum of egress in GB throughout your billing period.",chartDescription:"The data refreshes every 24 hours."}]},{key:"sizeCount",name:"Database & Storage Size",description:"Amount of resources your project is consuming",attributes:[(null==e?void 0:e.plan.id)==="free"?{anchor:"dbSize",key:r.Lb.DATABASE_SIZE,attributes:[{key:r.Lb.DATABASE_SIZE.toLowerCase(),color:"white"}],name:"Database size",chartPrefix:"Average",unit:"bytes",description:"Database size refers to the actual amount of space used by all your database objects, as reported by Postgres.",links:[{name:"Documentation",url:"https://supabase.com/docs/guides/platform/database-size"}],chartDescription:"The data refreshes every 24 hours.",additionalInfo:t=>{var s,l,o,d;let c=null==t?void 0:t.usages.find(e=>e.metric===r.Lb.DATABASE_SIZE),u="number"!=typeof c?(null!=(l=null==c?void 0:c.usage)?l:0)/(null!=(o=null==c?void 0:c.pricing_free_units)?o:0):0,m=c&&(null!=(d=null==c?void 0:c.pricing_free_units)?d:0)>0,p=m&&u>=n.x,h=m&&u>=1,x=null==c?void 0:c.capped,g=(null==e||null==(s=e.plan)?void 0:s.name)==="Free";return(0,a.jsx)("div",{children:(p||h)&&x&&(0,a.jsx)(i.Z,{type:h?"danger":"warning",title:h?"Exceeding database size limit":"Nearing database size limit",children:(0,a.jsx)("div",{className:"flex w-full items-center flex-col justify-center space-y-2 md:flex-row md:justify-between",children:(0,a.jsxs)("div",{children:["When you reach your database size limit, your project can go into read-only mode."," ",g?"Please upgrade your Plan.":"Disable your spend cap to scale seamlessly, and pay for over-usage beyond your Plan's quota."]})})})})}}:{anchor:"diskSize",key:"diskSize",attributes:[],name:"Disk size",chartPrefix:"Average",unit:"bytes",description:"Each Supabase project comes with a dedicated disk. Each project gets 8 GB of disk for free. Billing is based on the provisioned disk size. Disk automatically scales up when you get close to it's size.\nEach hour your project is using more than 8 GB of GP3 disk, it incurs the overages in GB-Hrs, i.e. a 16 GB disk incurs 8 GB-Hrs every hour. Extra disk size costs $0.125/GB/month ($0.000171/GB-Hr).",links:[{name:"Documentation",url:"https://supabase.com/docs/guides/platform/manage-your-usage/disk-size"},{name:"Disk Management",url:"https://supabase.com/docs/guides/platform/database-size#disk-management"}],chartDescription:""},{anchor:"storageSize",key:r.Lb.STORAGE_SIZE,attributes:[{key:r.Lb.STORAGE_SIZE.toLowerCase(),color:"white"}],name:"Storage Size",chartPrefix:"Average",unit:"bytes",description:"Sum of all objects in your storage buckets.\nBilling is prorated down to the hour and will be displayed GB-Hrs.",chartDescription:"The data refreshes every 24 hours.",links:[{name:"Storage",url:"https://supabase.com/docs/guides/storage"}]}]},{key:"activity",name:"Activity",description:"Usage statistics that reflect the activity of your project",attributes:[{anchor:"mau",key:r.Lb.MONTHLY_ACTIVE_USERS,attributes:[{key:r.Lb.MONTHLY_ACTIVE_USERS.toLowerCase(),color:"white"}],name:"Monthly Active Users",chartPrefix:"Cumulative",chartSuffix:"in billing period",unit:"absolute",description:"Users who log in or refresh their token count towards MAU.\nBilling is based on the sum of distinct users requesting your API throughout the billing period. Resets every billing cycle.",chartDescription:"The data is refreshed over a period of 24 hours and resets at the beginning of every billing period.\nThe data points are relative to the beginning of your billing period and will reset with your billing period.",links:[{name:"Auth",url:"https://supabase.com/docs/guides/auth"}]},{anchor:"mauSso",key:r.Lb.MONTHLY_ACTIVE_SSO_USERS,attributes:[{key:r.Lb.MONTHLY_ACTIVE_SSO_USERS.toLowerCase(),color:"white"}],name:"Monthly Active SSO Users",chartPrefix:"Cumulative",chartSuffix:"in billing period",unit:"absolute",description:"SSO users who log in or refresh their token count towards SSO MAU.\nBilling is based on the sum of distinct Single Sign-On users requesting your API throughout the billing period. Resets every billing cycle.",chartDescription:"The data refreshes over a period of 24 hours and resets at the beginning of every billing period.\nThe data points are relative to the beginning of your billing period and will reset with your billing period.",links:[{name:"SSO with SAML 2.0",url:"https://supabase.com/docs/guides/auth/sso/auth-sso-saml"}]},{anchor:"storageImageTransformations",key:r.Lb.STORAGE_IMAGES_TRANSFORMED,attributes:[{key:r.Lb.STORAGE_IMAGES_TRANSFORMED.toLowerCase(),color:"white"}],name:"Storage Image Transformations",chartPrefix:"Cumulative",chartSuffix:"in billing period",unit:"absolute",description:"We count all images that were transformed in the billing period, ignoring any transformations.\nUsage example: You transform one image with four different size transformations and another image with just a single transformation. It counts as two, as only two images were transformed.\nBilling is based on the count of (origin) images that used transformations throughout the billing period. Resets every billing cycle.",chartDescription:"The data refreshes every 24 hours.\nThe data points are relative to the beginning of your billing period and will reset with your billing period.",links:[{name:"Documentation",url:"https://supabase.com/docs/guides/storage/image-transformations"}]},{anchor:"funcInvocations",key:r.Lb.FUNCTION_INVOCATIONS,attributes:[{key:r.Lb.FUNCTION_INVOCATIONS.toLowerCase(),color:"white"}],name:"Edge Function Invocations",unit:"absolute",description:"Every serverless function invocation independent of response status is counted.\nBilling is based on the sum of all invocations throughout your billing period.",chartDescription:"The data refreshes every 24 hours.",links:[{name:"Edge Functions",url:"https://supabase.com/docs/guides/functions"}]},{anchor:"realtimeMessageCount",key:r.Lb.REALTIME_MESSAGE_COUNT,attributes:[{key:r.Lb.REALTIME_MESSAGE_COUNT.toLowerCase(),color:"white"}],name:"Realtime Messages",unit:"absolute",description:"Count of messages going through Realtime. Includes database changes, broadcast and presence. \nUsage example: If you do a database change and 5 clients listen to that change via Realtime, that's 5 messages. If you broadcast a message and 4 clients listen to that, that's 5 messages (1 message sent, 4 received).\nBilling is based on the total amount of messages throughout your billing period.",chartDescription:"The data refreshes every 24 hours.",links:[{name:"Realtime Quotas",url:"https://supabase.com/docs/guides/realtime/quotas"}]},{anchor:"realtimePeakConnections",key:r.Lb.REALTIME_PEAK_CONNECTIONS,attributes:[{key:r.Lb.REALTIME_PEAK_CONNECTIONS.toLowerCase(),color:"white"}],name:"Realtime Concurrent Peak Connections",chartPrefix:"Max",unit:"absolute",description:"Total number of successful connections. Connections attempts are not counted towards usage.\nBilling is based on the maximum amount of concurrent peak connections throughout your billing period.",chartDescription:"The data refreshes every 24 hours.",links:[{name:"Realtime Quotas",url:"https://supabase.com/docs/guides/realtime/quotas"}]}]}]},70295:(e,t,s)=>{s.d(t,{A:()=>a});let a=(0,s(84497).A)("Key",[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]])},71147:(e,t,s)=>{s.d(t,{A:()=>a});let a=(0,s(84497).A)("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]])},79050:(e,t,s)=>{let a;s.d(t,{Ay:()=>e_});var n,r,i,l,o,d,c,u,m,p,h,x,g,f,y,j,v,b,S,A,N,w,_,C,E,k,T,D,R=s(53239);function O(e,t,s,a){if("a"===s&&!a)throw TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!a:!t.has(e))throw TypeError("Cannot read private member from an object whose class did not declare it");return"m"===s?a:"a"===s?a.call(e):a?a.value:t.get(e)}function I(e,t,s,a,n){if("m"===a)throw TypeError("Private method is not writable");if("a"===a&&!n)throw TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!n:!t.has(e))throw TypeError("Cannot write private member to an object whose class did not declare it");return"a"===a?n.call(e,s):n?n.value=s:t.set(e,s),s}let P="u">typeof window,M=(e,t,s)=>{let a=document.createElement(e),[n,r]=Array.isArray(t)?[void 0,t]:[t,s];return n&&Object.assign(a,n),null==r||r.forEach(e=>a.appendChild(e)),a},L=(e,t)=>{var s;return"left"===t?e.offsetLeft:((null==(s=e.offsetParent instanceof HTMLElement?e.offsetParent:null)?void 0:s.offsetWidth)??0)-e.offsetWidth-e.offsetLeft},z=e=>e.offsetWidth>0&&e.offsetHeight>0,F=String.raw,U=P&&"u">typeof CSS&&CSS.supports&&CSS.supports("animation-timing-function","linear(1,2)"),B=P&&"u">typeof CSS&&CSS.supports&&CSS.supports("line-height","mod(1,1)"),H=P&&matchMedia?matchMedia("(prefers-reduced-motion: reduce)"):null,G="--_number-flow-d-opacity",q="--_number-flow-d-width",Y="--_number-flow-dx",W="--_number-flow-d",$=(()=>{try{return CSS.registerProperty({name:G,syntax:"<number>",inherits:!1,initialValue:"0"}),CSS.registerProperty({name:Y,syntax:"<length>",inherits:!0,initialValue:"0px"}),CSS.registerProperty({name:q,syntax:"<number>",inherits:!1,initialValue:"0"}),CSS.registerProperty({name:W,syntax:"<number>",inherits:!0,initialValue:"0"}),!0}catch{return!1}})(),V="var(--number-flow-char-height, 1em)",Z="var(--number-flow-mask-height, 0.25em)",J=`calc(${Z} / 2)`,X="var(--number-flow-mask-width, 0.5em)",K=`calc(${X} / var(--scale-x))`,Q="#000 0, transparent 71%",ee="span",et=F`:host{display:inline-flex;align-items:baseline;direction:ltr;white-space:nowrap;position:relative;line-height:${V} !important;isolation:isolate;}::slotted(${ee}){position:absolute;left:0;top:0;color:transparent !important;will-change:unset !important;z-index:-5;}:host > .number,:host > .section{pointer-events:none;user-select:none;}.number,.number__inner{display:inline-flex;align-items:baseline;transform-origin:left top;}:host([data-will-change]) .number,:host([data-will-change]) .number__inner{will-change:transform;}.number{--scale-x:calc(1 + var(${q}) / var(--width));transform:translateX(var(${Y})) scaleX(var(--scale-x));margin:0 calc(-1 * ${X});position:relative;z-index:-1;overflow:clip;-webkit-mask-image:linear-gradient( to right,transparent 0,#000 ${K},#000 calc(100% - ${K}),transparent ),linear-gradient( to bottom,transparent 0,#000 ${Z},#000 calc(100% - ${Z}),transparent 100% ),radial-gradient(at bottom right,${Q}),radial-gradient(at bottom left,${Q}),radial-gradient(at top left,${Q}),radial-gradient(at top right,${Q});-webkit-mask-size:100% calc(100% - ${Z} * 2),calc(100% - ${K} * 2) 100%,${K} ${Z},${K} ${Z},${K} ${Z},${K} ${Z};-webkit-mask-position:center,center,top left,top right,bottom right,bottom left;-webkit-mask-repeat:no-repeat;}.number__inner{padding:0 ${X};transform:scaleX(calc(1 / var(--scale-x))) translateX(calc(-1 * var(${Y})));}.section{display:inline-flex;align-items:baseline;padding-bottom:${J};padding-top:${J};position:relative;isolation:isolate;}.section::after{content:'\200b';display:block;padding:${J} 0;}:host([data-will-change]) .section{will-change:transform;}.section--justify-left{transform-origin:center left;}.section--justify-right{transform-origin:center right;}.section__exiting{position:absolute !important;z-index:-1;}.digit{display:block;position:relative;--c:var(--current) + var(${W});}:host([data-will-change]) .digit,:host([data-will-change]) .digit__num{will-change:transform;}.digit__num{display:block;padding:${J} 0;--offset-raw:mod(10 + var(--n) - mod(var(--c),10),10);--offset:calc(var(--offset-raw) - 10 * round(down,var(--offset-raw) / 5,1));--y:clamp(-100%,var(--offset) * 100%,100%);transform:translateY(var(--y));}.digit__num:not(.is-current){position:absolute;top:0;left:50%;transform:translateX(-50%) translateY(var(--y));}.digit:not(.is-spinning) .digit__num:not(.is-current){display:none;}.symbol{display:inline-flex;align-items:baseline;position:relative;isolation:isolate;padding:${J} 0;}:host([data-will-change]) .symbol{will-change:transform;}.symbol__value{display:block;white-space:pre;}.symbol__exiting{position:absolute;z-index:-1;}.section--justify-left .symbol__exiting{left:0;}.section--justify-right .symbol__exiting{right:0;}.animate-presence{opacity:calc(1 + var(${G}));}`,es=P?HTMLElement:class{},ea=({formatted:e,willChange:t})=>`<${ee} style="font-kerning: none; display: inline-block; line-height: ${V}; padding: ${Z} 0;${t?"will-change: transform":""}">${e}</${ee}>`,en=(e,t)=>null!=e&&null==t?e:null==e&&null!=t?t:null!=e&&null!=t?Math.max(e,t):null,er=B&&U&&$;!function(e){e[e.UP=1]="UP",e[e.DOWN=-1]="DOWN",e[e.NONE=0]="NONE"}(T||(T={}));class ei extends es{constructor(){super(...arguments),this.transformTiming=this.constructor.defaultProps.transformTiming,this.spinTiming=this.constructor.defaultProps.spinTiming,this.opacityTiming=this.constructor.defaultProps.opacityTiming,this.respectMotionPreference=this.constructor.defaultProps.respectMotionPreference,this.trend=this.constructor.defaultProps.trend,this.continuous=this.constructor.defaultProps.continuous,n.set(this,this.constructor.defaultProps.animated),r.set(this,!1),i.set(this,void 0),l.set(this,void 0),o.set(this,void 0),d.set(this,void 0),c.set(this,void 0),u.set(this,O(this,n,"f")),m.set(this,void 0),this.manual=!1,p.set(this,void 0)}get animated(){return O(this,n,"f")}set animated(e){var t;this.animated!==e&&(I(this,n,e,"f"),null==(t=this.shadowRoot)||t.getAnimations().forEach(e=>e.finish()))}get created(){return O(this,r,"f")}get computedTrend(){return O(this,d,"f")}get startingPlace(){return O(this,c,"f")}get computedAnimated(){return O(this,u,"f")}set parts(e){if(null==e)return;let{pre:t,integer:s,fraction:p,post:h,value:x}=e;if(O(this,r,"f")){let a=O(this,m,"f");if(I(this,m,e,"f"),!0===this.trend?I(this,d,Math.sign(x-a.value),"f"):"increasing"===this.trend?I(this,d,T.UP,"f"):"decreasing"===this.trend?I(this,d,T.DOWN,"f"):I(this,d,T.NONE,"f"),I(this,c,void 0,"f"),O(this,d,"f")!==T.NONE&&this.continuous){let t=a.integer.concat(a.fraction).filter(e=>"integer"===e.type||"fraction"===e.type),s=e.integer.concat(e.fraction).filter(e=>"integer"===e.type||"fraction"===e.type),n=t.find(e=>!s.find(t=>t.place===e.place&&t.value===e.value)),r=s.find(e=>!t.find(t=>e.place===t.place&&e.value===t.value));I(this,c,en(null==n?void 0:n.place,null==r?void 0:r.place),"f")}I(this,u,er&&O(this,n,"f")&&(!this.respectMotionPreference||!(null!=H&&H.matches))&&z(this),"f"),this.manual||this.willUpdate(),O(this,i,"f").update(t),O(this,l,"f").update({integer:s,fraction:p}),O(this,o,"f").update(h),this.manual||this.didUpdate()}else{if(I(this,m,e,"f"),this.attachShadow({mode:"open"}),"u">typeof CSSStyleSheet&&this.shadowRoot.adoptedStyleSheets)a||(a=new CSSStyleSheet).replaceSync(et),this.shadowRoot.adoptedStyleSheets=[a];else{let e=document.createElement("style");e.textContent=et,this.shadowRoot.appendChild(e)}this.shadowRoot.appendChild(M("slot")),I(this,i,new ec(this,t,{inert:!0,ariaHidden:"true",justify:"right"}),"f"),this.shadowRoot.appendChild(O(this,i,"f").el),I(this,l,new el(this,s,p,{inert:!0,ariaHidden:"true"}),"f"),this.shadowRoot.appendChild(O(this,l,"f").el),I(this,o,new ec(this,h,{inert:!0,ariaHidden:"true",justify:"left"}),"f"),this.shadowRoot.appendChild(O(this,o,"f").el)}I(this,r,!0,"f")}willUpdate(){O(this,i,"f").willUpdate(),O(this,l,"f").willUpdate(),O(this,o,"f").willUpdate()}didUpdate(){if(!O(this,u,"f"))return;O(this,p,"f")?O(this,p,"f").abort():this.dispatchEvent(new Event("animationsstart")),O(this,i,"f").didUpdate(),O(this,l,"f").didUpdate(),O(this,o,"f").didUpdate();let e=new AbortController;Promise.all(this.shadowRoot.getAnimations().map(e=>e.finished)).then(()=>{e.signal.aborted||(this.dispatchEvent(new Event("animationsfinish")),I(this,p,void 0,"f"))}),I(this,p,e,"f")}}n=new WeakMap,r=new WeakMap,i=new WeakMap,l=new WeakMap,o=new WeakMap,d=new WeakMap,c=new WeakMap,u=new WeakMap,m=new WeakMap,p=new WeakMap,ei.defaultProps={transformTiming:{duration:900,easing:"linear(0,.005,.019,.039,.066,.096,.129,.165,.202,.24,.278,.316,.354,.39,.426,.461,.494,.526,.557,.586,.614,.64,.665,.689,.711,.731,.751,.769,.786,.802,.817,.831,.844,.856,.867,.877,.887,.896,.904,.912,.919,.925,.931,.937,.942,.947,.951,.955,.959,.962,.965,.968,.971,.973,.976,.978,.98,.981,.983,.984,.986,.987,.988,.989,.99,.991,.992,.992,.993,.994,.994,.995,.995,.996,.996,.9963,.9967,.9969,.9972,.9975,.9977,.9979,.9981,.9982,.9984,.9985,.9987,.9988,.9989,1)"},spinTiming:void 0,opacityTiming:{duration:450,easing:"ease-out"},animated:!0,trend:!0,continuous:!1,respectMotionPreference:!0};class el{constructor(e,t,s,{className:a,...n}={}){this.flow=e,h.set(this,void 0),x.set(this,void 0),g.set(this,void 0),f.set(this,void 0),y.set(this,void 0),I(this,x,new ed(e,t,{justify:"right"}),"f"),I(this,g,new ed(e,s,{justify:"left"}),"f"),I(this,h,M("span",{className:"number__inner"},[O(this,x,"f").el,O(this,g,"f").el]),"f"),this.el=M("span",{...n,className:`number ${a??""}`},[O(this,h,"f")])}willUpdate(){I(this,f,this.el.offsetWidth,"f"),I(this,y,this.el.getBoundingClientRect().left,"f"),O(this,x,"f").willUpdate(),O(this,g,"f").willUpdate()}update({integer:e,fraction:t}){O(this,x,"f").update(e),O(this,g,"f").update(t)}didUpdate(){let e=this.el.getBoundingClientRect();O(this,x,"f").didUpdate(),O(this,g,"f").didUpdate();let t=O(this,y,"f")-e.left,s=this.el.offsetWidth,a=O(this,f,"f")-s;this.el.style.setProperty("--width",String(s)),this.el.animate({[Y]:[`${t}px`,"0px"],[q]:[a,0]},{...this.flow.transformTiming,composite:"accumulate"})}}h=new WeakMap,x=new WeakMap,g=new WeakMap,f=new WeakMap,y=new WeakMap;class eo{constructor(e,t,{justify:s,className:a,...n},r){this.flow=e,this.children=new Map,this.onCharRemove=e=>()=>{this.children.delete(e)},j.set(this,void 0),this.justify=s;let i=t.map(e=>this.addChar(e).el);this.el=M("span",{...n,className:`section section--justify-${s} ${a??""}`},r?r(i):i)}addChar(e,{startDigitsAtZero:t=!1,...s}={}){let a="integer"===e.type||"fraction"===e.type?new ep(this,e.type,t?0:e.value,e.place,{...s,onRemove:this.onCharRemove(e.key)}):new eh(this,e.type,e.value,{...s,onRemove:this.onCharRemove(e.key)});return this.children.set(e.key,a),a}unpop(e){e.el.classList.remove("section__exiting"),e.el.style[this.justify]=""}pop(e){e.forEach(e=>{e.el.style[this.justify]=`${L(e.el,this.justify)}px`}),e.forEach(e=>{e.el.classList.add("section__exiting"),e.present=!1})}addNewAndUpdateExisting(e){let t=new Map,s=new Map,a="left"===this.justify,n=a?"prepend":"append";if(function(e,t,{reverse:s=!1}={}){let a=e.length;for(let n=s?a-1:0;s?n>=0:n<a;s?n--:n++)t(e[n],n)}(e,e=>{let a;this.children.has(e.key)?(a=this.children.get(e.key),s.set(e,a),this.unpop(a),a.present=!0):(a=this.addChar(e,{startDigitsAtZero:!0,animateIn:!0}),t.set(e,a)),this.el[n](a.el)},{reverse:a}),this.flow.computedAnimated){let e=this.el.getBoundingClientRect();t.forEach(t=>{t.willUpdate(e)})}t.forEach((e,t)=>{e.update(t.value)}),s.forEach((e,t)=>{e.update(t.value)})}willUpdate(){let e=this.el.getBoundingClientRect();I(this,j,e[this.justify],"f"),this.children.forEach(t=>t.willUpdate(e))}didUpdate(){let e=this.el.getBoundingClientRect();this.children.forEach(t=>t.didUpdate(e));let t=e[this.justify],s=O(this,j,"f")-t;this.el.animate({transform:[`translateX(${s}px)`,"none"]},{...this.flow.transformTiming,composite:"accumulate"})}}j=new WeakMap;class ed extends eo{update(e){let t=new Map;this.children.forEach((s,a)=>{e.find(e=>e.key===a)||t.set(a,s),this.unpop(s)}),this.addNewAndUpdateExisting(e),t.forEach(e=>{e instanceof ep&&e.update(0)}),this.pop(t)}}class ec extends eo{update(e){let t=new Map;this.children.forEach((s,a)=>{e.find(e=>e.key===a)||t.set(a,s)}),this.pop(t),this.addNewAndUpdateExisting(e)}}class eu{constructor(e,t,{onRemove:s,animateIn:a=!1}={}){this.flow=e,this.el=t,v.set(this,!0),b.set(this,void 0),S.set(this,()=>{var e;this.el.remove(),null==(e=O(this,b,"f"))||e.call(this)}),this.el.classList.add("animate-presence"),this.flow.computedAnimated&&a&&this.el.animate({[G]:[-.9999,0]},{...this.flow.opacityTiming,composite:"accumulate"}),I(this,b,s,"f")}get present(){return O(this,v,"f")}set present(e){if(O(this,v,"f")!==e){if(I(this,v,e,"f"),!this.flow.computedAnimated){e||O(this,S,"f").call(this);return}this.el.style.setProperty("--_number-flow-d-opacity",e?"0":"-.999"),this.el.animate({[G]:e?[-.9999,0]:[.999,0]},{...this.flow.opacityTiming,composite:"accumulate"}),e?this.flow.removeEventListener("animationsfinish",O(this,S,"f")):this.flow.addEventListener("animationsfinish",O(this,S,"f"),{once:!0})}}}v=new WeakMap,b=new WeakMap,S=new WeakMap;class em extends eu{constructor(e,t,s,a){super(e.flow,s,a),this.section=e,this.value=t,this.el=s}}class ep extends em{constructor(e,t,s,a,n){let r=Array.from({length:10}).map((e,t)=>{let a=M("span",{className:`digit__num${t===s?" is-current":""}`},[document.createTextNode(String(t))]);return a.style.setProperty("--n",String(t)),a}),i=M("span",{className:"digit"},r);i.style.setProperty("--current",String(s)),super(e,s,i,n),this.place=a,A.set(this,void 0),N.set(this,void 0),w.set(this,void 0),_.set(this,()=>{this.el.classList.remove("is-spinning")}),I(this,A,r,"f")}willUpdate(e){let t=this.el.getBoundingClientRect();I(this,N,this.value,"f");let s=t[this.section.justify]-e[this.section.justify],a=t.width/2;I(this,w,"left"===this.section.justify?s+a:s-a,"f")}update(e){var t,s;null==(t=O(this,A,"f")[this.value])||t.classList.remove("is-current"),this.el.style.setProperty("--current",String(e)),null==(s=O(this,A,"f")[e])||s.classList.add("is-current"),this.value=e}didUpdate(e){let t=this.el.getBoundingClientRect(),s=t[this.section.justify]-e[this.section.justify],a=t.width/2,n="left"===this.section.justify?s+a:s-a;this.el.animate({transform:[`translateX(${O(this,w,"f")-n}px)`,"none"]},{...this.flow.transformTiming,composite:"accumulate"});let r=this.diff;r&&(this.el.classList.add("is-spinning"),this.el.animate({[W]:[-r,0]},{...this.flow.spinTiming??this.flow.transformTiming,composite:"accumulate"}),this.flow.addEventListener("animationsfinish",O(this,_,"f"),{once:!0}))}get diff(){let e=this.flow.computedTrend,t=this.value-O(this,N,"f");return!t&&null!=this.flow.startingPlace&&this.flow.startingPlace>=this.place?10*e:(e||(e=Math.sign(t)),e===T.DOWN&&this.value>O(this,N,"f")?this.value-10-O(this,N,"f"):e===T.UP&&this.value<O(this,N,"f")?10-O(this,N,"f")+this.value:t)}}A=new WeakMap,N=new WeakMap,w=new WeakMap,_=new WeakMap;class eh extends em{constructor(e,t,s,a){let n=M("span",{className:"symbol__value",textContent:s});super(e,s,M("span",{className:"symbol"},[n]),a),this.type=t,C.set(this,new Map),E.set(this,void 0),k.set(this,e=>()=>{O(this,C,"f").delete(e)}),O(this,C,"f").set(s,new eu(this.flow,n,{onRemove:O(this,k,"f").call(this,s)}))}willUpdate(e){if("decimal"===this.type)return;let t=this.el.getBoundingClientRect();I(this,E,t[this.section.justify]-e[this.section.justify],"f")}update(e){if(this.value!==e){let t=O(this,C,"f").get(this.value);if(t.present=!1,t.el.classList.add("symbol__exiting"),O(this,C,"f").has(e)){let t=O(this,C,"f").get(e);t.present=!0,t.el.classList.remove("symbol__exiting")}else{let t=M("span",{className:"symbol__value",textContent:e});this.el.appendChild(t),O(this,C,"f").set(e,new eu(this.flow,t,{animateIn:!0,onRemove:O(this,k,"f").call(this,e)}))}}this.value=e}didUpdate(e){if("decimal"===this.type)return;let t=this.el.getBoundingClientRect()[this.section.justify]-e[this.section.justify];this.el.animate({transform:[`translateX(${O(this,E,"f")-t}px)`,"none"]},{...this.flow.transformTiming,composite:"accumulate"})}}C=new WeakMap,E=new WeakMap,k=new WeakMap;var ex=e=>{throw TypeError(e)},eg=(e,t,s)=>t.has(e)||ex("Cannot "+s),ef=(e,t,s)=>(eg(e,t,"read from private field"),s?s.call(e):t.get(e)),ey=(e,t,s)=>t.has(e)?ex("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,s),ej=(e,t,s,a)=>(eg(e,t,"write to private field"),a?a.call(e,s):t.set(e,s),s),ev=parseInt(R.version.match(/^(\d+)\./)?.[1])>=19,eb=class extends ei{attributeChangedCallback(e,t,s){this[e]=JSON.parse(s)}};eb.observedAttributes=ev?[]:["parts"],((e,t)=>{if(!(!P||customElements.get(e)===t))return customElements.define(e,t)})("number-flow-react",eb);var eS={},eA=ev?e=>e:JSON.stringify;function eN(e){let{transformTiming:t,spinTiming:s,opacityTiming:a,animated:n,respectMotionPreference:r,trend:i,continuous:l,...o}=e;return[{transformTiming:t,spinTiming:s,opacityTiming:a,animated:n,respectMotionPreference:r,trend:i,continuous:l},o]}var ew=class extends R.Component{constructor(e){super(e),ey(this,D),this.handleRef=this.handleRef.bind(this)}updateNonPartsProps(e){if(!ef(this,D))return;ef(this,D).manual=!this.props.isolate;let[t]=eN(this.props);Object.assign(ef(this,D),Object.fromEntries(Object.entries(t).filter(([e,t])=>null!=t))),e?.onAnimationsStart&&ef(this,D).removeEventListener("animationsstart",e.onAnimationsStart),this.props.onAnimationsStart&&ef(this,D).addEventListener("animationsstart",this.props.onAnimationsStart),e?.onAnimationsFinish&&ef(this,D).removeEventListener("animationsfinish",e.onAnimationsFinish),this.props.onAnimationsFinish&&ef(this,D).addEventListener("animationsfinish",this.props.onAnimationsFinish)}componentDidMount(){this.updateNonPartsProps(),ev&&ef(this,D)&&(ef(this,D).parts=this.props.parts)}getSnapshotBeforeUpdate(e){return this.updateNonPartsProps(e),!this.props.isolate&&!1!==this.props.animated&&e.parts!==this.props.parts&&(ef(this,D)?.willUpdate(),!0)}componentDidUpdate(e,t,s){s&&ef(this,D)?.didUpdate()}handleRef(e){this.props.innerRef&&(this.props.innerRef.current=e),ej(this,D,e)}render(){let[e,{innerRef:t,className:s,parts:a,willChange:n,isolate:r,...i}]=eN(this.props);return R.createElement("number-flow-react",{ref:this.handleRef,"data-will-change":n?"":void 0,class:s,...i,dangerouslySetInnerHTML:{__html:ea({formatted:a.formatted,willChange:n})},parts:eA(a)})}};D=new WeakMap;var e_=R.forwardRef(function({value:e,locales:t,format:s,...a},n){R.useImperativeHandle(n,()=>r.current,[]);let r=R.useRef(),i=R.useMemo(()=>t?JSON.stringify(t):"",[t]),l=R.useMemo(()=>s?JSON.stringify(s):"",[s]),o=R.useMemo(()=>(function(e,t){let s=t.formatToParts(e),a=[],n=[],r=[],i=[],l={},o=e=>{let t=null==l[e]?l[e]=0:++l[e];return`${e}:${t}`},d="",c=!1,u=!1;for(let e of s){d+=e.value;let t="minusSign"===e.type||"plusSign"===e.type?"sign":e.type;"integer"===t?(c=!0,n.push(...e.value.split("").map(e=>({type:t,value:parseInt(e)})))):"group"===t?n.push({type:t,value:e.value}):"decimal"===t?(u=!0,r.push({type:t,value:e.value,key:o(t)})):"fraction"===t?r.push(...e.value.split("").map(e=>({type:t,value:parseInt(e),key:o(t),place:-1-l[t]}))):(c||u?i:a).push({type:t,value:e.value,key:o(t)})}let m=[];for(let e=n.length-1;e>=0;e--){let t=n[e];m.unshift("integer"===t.type?{...t,key:o(t.type),place:l[t.type]}:{...t,key:o(t.type)})}return{pre:a,integer:m,fraction:r,post:i,formatted:d,value:"string"==typeof e?parseFloat(e):e}})(e,eS[`${i}:${l}`]??=new Intl.NumberFormat(t,s)),[e,i,l]);return R.createElement(ew,{...a,parts:o,innerRef:r})})},82333:(e,t,s)=>{s.d(t,{A:()=>j});var a=s(80263),n=s(53434),r=s.n(n),i=s(21709),l=s(15629),o=s(95995),d=s(14604),c=s(50431),u=s(38051),m=s(74960),p=s(50200),h=s(82457),x=s(66790);let g=e=>{let{name:t,unit:s,value:n,isAfterToday:r,tooltipFormatter:i}=e,l="percentage"===s?Number(n).toFixed(2):Number(n);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("p",{className:"text-xs text-foreground-light",children:t}),r?(0,a.jsx)("p",{className:"text-foreground-light text-lg",children:"No data yet"}):(0,a.jsx)("p",{className:"text-xl",children:void 0!==i?i(l):l})]})},f=e=>{var t;let{attribute:s,attributeMeta:n,sumValue:r,tooltipFormatter:i,unit:l}=e,o=Number(null!=(t=null==n?void 0:n.value)?t:0),d=(o/r*100).toFixed(1);return(0,a.jsxs)("div",{className:"flex items-center justify-between","data-sentry-component":"AttributeContent","data-sentry-source-file":"UsageChartTooltips.tsx",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2 w-[175px]",children:[(0,a.jsx)("div",{className:(0,h.cn)("w-3 h-3 rounded-full border",x.hs[s.color].marker)}),(0,a.jsxs)("p",{className:"text-xs prose",children:[s.name," (",d,"%):"," "]})]}),(0,a.jsx)("p",{className:"text-xs tabular-nums",children:void 0!==i?i(o):"".concat(o).concat("hours"===l?" H":"")})]},s.name)},y=e=>{let{attributes:t,values:s,isAfterToday:n,tooltipFormatter:r,unit:i}=e,l=s.reduce((e,t)=>e+Number(t.value),0);return(0,a.jsx)(a.Fragment,{children:n?(0,a.jsx)("p",{className:"text-foreground-light text-lg",children:"No data yet"}):(0,a.jsx)("div",{className:"space-y-1 pb-1",children:t.flatMap(e=>{var t;let n=s.find(t=>t.dataKey===e.key);return 0===Number(null!=(t=null==n?void 0:n.value)?t:0)?[]:(0,a.jsx)(f,{attribute:e,attributeMeta:n,sumValue:l,tooltipFormatter:r,unit:i},e.name)})})})},j=e=>{let{data:t,name:s,attributes:n,unit:f,yLimit:j,yLeftMargin:v=10,yFormatter:b,yMin:S,tooltipFormatter:A}=e,N=[null!=S?S:0,Math.max(null!=S?S:0,null!=j?j:0)];return(0,a.jsx)("div",{className:"w-full h-[200px]","data-sentry-component":"UsageBarChart","data-sentry-source-file":"UsageBarChart.tsx",children:(0,a.jsx)(i.u,{width:"100%",height:200,"data-sentry-element":"ResponsiveContainer","data-sentry-source-file":"UsageBarChart.tsx",children:(0,a.jsxs)(l.X,{data:t,margin:{top:0,right:0,left:v,bottom:0},"data-sentry-element":"ComposedChart","data-sentry-source-file":"UsageBarChart.tsx",children:[(0,a.jsx)(o.d,{vertical:!1,strokeDasharray:"3 3",className:"stroke-border-stronger","data-sentry-element":"CartesianGrid","data-sentry-source-file":"UsageBarChart.tsx"}),(0,a.jsx)(d.W,{dataKey:"periodStartFormatted","data-sentry-element":"XAxis","data-sentry-source-file":"UsageBarChart.tsx"}),(0,a.jsx)(c.h,{width:40,axisLine:!1,tickLine:{stroke:"none"},domain:N,tickFormatter:b,"data-sentry-element":"YAxis","data-sentry-source-file":"UsageBarChart.tsx"}),(0,a.jsx)(u.m,{content:e=>{let{active:t,payload:i}=e;if(!t||!i||!i.length)return null;{let e=r()(i[0].payload.period_start),t=e.startOf("day").isAfter(r()().startOf("day"));return(0,a.jsxs)("div",{className:(0,h.cn)("border bg-surface-100 rounded-md px-2 py-2",n.length>1&&!t?"w-[250px]":"w-[170px]"),children:[n.length>1?(0,a.jsx)(y,{attributes:n,values:i,isAfterToday:t,tooltipFormatter:A,unit:f}):(0,a.jsx)(g,{name:s,unit:f,value:i[0].value,tooltipFormatter:A,isAfterToday:t}),(0,a.jsx)("p",{className:"text-xs text-foreground-light mt-1",children:e.format("DD MMM YYYY")})]})}},"data-sentry-element":"Tooltip","data-sentry-source-file":"UsageBarChart.tsx"}),null==n?void 0:n.map(e=>(0,a.jsx)(m.y,{dataKey:e.key,stackId:"a",children:t.map(t=>(0,a.jsx)(p.f,{className:x.hs[e.color].bar},"".concat(t.period_start)))},e.key))]})})})}},85332:(e,t,s)=>{s.d(t,{KQ:()=>o});var a=s(56947),n=s(48678),r=s(60702);let i=["Owner","Administrator","Developer","Read-only"];async function l(e,t){let{slug:s}=e;if(!s)throw Error("slug is required");let{data:a,error:r}=await (0,n.Jt)("/platform/organizations/{slug}/roles",{params:{path:{slug:s}},signal:t});return r&&(0,n.H4)(r),a}let o=function(e){let{slug:t}=e,{enabled:s=!0,...n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,a.I)(r.O.rolesV2(t),e=>{let{signal:s}=e;return l({slug:t},s)},{enabled:s&&void 0!==t,select:e=>({...e,org_scoped_roles:e.org_scoped_roles.sort((e,t)=>i.indexOf(e.name)-i.indexOf(t.name))}),...n})}},86677:(e,t,s)=>{s.d(t,{U:()=>r});var a=s(53434),n=s.n(a);let r=e=>{let t=n()(),s=n()(e.from).hour(t.hour()).minute(t.minute()).second(t.second()),a=n()(e.to).hour(t.hour()).minute(t.minute()).second(t.second());return s.date()!==a.date()?{from:s.utc().toISOString(),to:a.utc().toISOString()}:s.date()===t.date()?{from:s.set("hour",0).set("minute",0).set("second",0).utc().toISOString(),to:a.utc().toISOString()}:{from:s.utc().toISOString(),to:a.set("hour",23).set("minute",59).set("second",59).utc().toISOString()}}},92456:(e,t,s)=>{s.d(t,{K:()=>g,T:()=>j});var a=s(80263),n=s(53239),r=s(37356),i=s(82457),l=s(85462),o=s(53434),d=s.n(o),c=s(27344),u=s.n(c),m=s(37361),p=s.n(m);d().extend(u()),d().extend(p());let h=e=>d().unix(Number(e)/1e3/1e3).toISOString(),x=e=>{let t=16===String(e).length;return!Number.isNaN(Number(e))&&t},g=e=>{let{utcTimestamp:t,format:s}=e,a=x(t)?h(t):t;return d().utc(a).local().format(s)},f=e=>{let{utcTimestamp:t,format:s}=e,a=x(t)?h(t):t;return d().utc(a).format(s)},y=e=>{let{utcTimestamp:t}=e,s=x(t)?h(t):t;return d().utc(s).fromNow()},j=e=>{let{utcTimestamp:t,className:s,displayAs:o="local",format:d="DD MMM  HH:mm:ss",labelFormat:c="DD MMM HH:mm:ss"}=e,u=g({utcTimestamp:t,format:d}),m=f({utcTimestamp:t,format:d}),p=y({utcTimestamp:t}),[h,x]=(0,n.useState)("start"),j=(0,n.useRef)(null),v=Intl.DateTimeFormat().resolvedOptions().timeZone;(0,n.useEffect)(()=>{let e=()=>{if(j.current){let e=j.current.getBoundingClientRect(),t=window.innerHeight;x(e.top<t/2?"start":"end")}};return e(),window.addEventListener("scroll",e),window.addEventListener("resize",e),()=>{window.removeEventListener("scroll",e),window.removeEventListener("resize",e)}},[]);let b=e=>{let{label:t,value:s}=e,[l,o]=(0,n.useState)(!1);return(0,a.jsxs)("div",{onPointerDown:e=>{e.stopPropagation()},onMouseDown:e=>{e.stopPropagation()},onClick:e=>{e.stopPropagation(),e.preventDefault(),(0,r.l)(s,()=>{o(!0),setTimeout(()=>{o(!1)},1e3)})},className:(0,i.cn)("relative cursor-pointer flex gap-y-2 gap-x-0.5 hover:bg-surface-100 px-2 py-1 group",{"bg-surface-100":l}),"data-sentry-component":"TooltipRow","data-sentry-source-file":"index.tsx",children:[(0,a.jsxs)("div",{className:"flex items-center gap-x-2 text-left truncate",children:[(0,a.jsx)("p",{children:t}),(0,a.jsx)("div",{className:"border-t w-full border-dashed"})]}),(0,a.jsxs)("div",{className:"relative flex items-center gap-x-2 flex-grow",children:[(0,a.jsx)("div",{className:"border-t w-full border-dashed z-10"}),l&&(0,a.jsx)("span",{className:"flex items-center justify-end w-full absolute inset-0 flex items-right text-brand-600 bg-surface-100",children:"Copied!"}),(0,a.jsx)("span",{className:"flex items-center gap-x-2 justify-end whitespace-nowrap",children:s})]})]})};return(0,a.jsxs)(l.m_,{"data-sentry-element":"Tooltip","data-sentry-component":"TimestampInfo","data-sentry-source-file":"index.tsx",children:[(0,a.jsx)(l.k$,{asChild:!0,ref:j,className:"text-xs ".concat(s," border-b border-transparent hover:border-dashed hover:border-foreground-light"),"data-sentry-element":"TooltipTrigger","data-sentry-source-file":"index.tsx",children:(0,a.jsx)("span",{children:"local"===o?g({utcTimestamp:t,format:c}):f({utcTimestamp:t,format:c})})}),(0,a.jsxs)(l.ZI,{align:h,side:"right",className:"font-mono p-0 py-1 min-w-80","data-sentry-element":"TooltipContent","data-sentry-source-file":"index.tsx",children:[(0,a.jsx)(b,{label:"UTC",value:m,"data-sentry-element":"TooltipRow","data-sentry-source-file":"index.tsx"}),(0,a.jsx)(b,{label:v,value:u,"data-sentry-element":"TooltipRow","data-sentry-source-file":"index.tsx"}),(0,a.jsx)(b,{label:"Relative",value:p,"data-sentry-element":"TooltipRow","data-sentry-source-file":"index.tsx"}),(0,a.jsx)(b,{label:"Timestamp",value:String(t),"data-sentry-element":"TooltipRow","data-sentry-source-file":"index.tsx"})]})]})}}}]);