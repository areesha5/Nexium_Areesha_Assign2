!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="087defe3-9683-4556-9b70-48cf953f6e83",e._sentryDebugIdIdentifier="sentry-dbid-087defe3-9683-4556-9b70-48cf953f6e83")}catch(e){}}(),(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2473,4598,6841],{5825:(e,t,s)=>{"use strict";s.d(t,{Dt:()=>o});var n=s(56947),a=s(18232),r=s(67394);let l=()=>"show max_connections";async function i(e,t){let{projectRef:s,connectionString:n}=e,r=l(),{result:i}=await (0,a.E)({projectRef:s,connectionString:n,sql:r,queryKey:["max-connections"]},t);return{maxConnections:parseInt(i[0].max_connections)}}let o=function(e){let{projectRef:t,connectionString:s}=e,{enabled:a=!0,...l}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,n.I)(r.c.maxConnections(t),e=>{let{signal:n}=e;return i({projectRef:t,connectionString:s},n)},{enabled:a&&void 0!==t,...l})}},6017:(e,t,s)=>{"use strict";s.d(t,{A:()=>c});var n=s(80263),a=s(53239),r=s(12185),l=s(64491),i=s(50526),o=s(5548),d=s(48492);let c=function(e){let{defaultValue:t,descriptionText:s,error:c,icon:u,inputRef:m,label:x,afterLabel:f,beforeLabel:p,labelOptional:h,layout:y,value:g,actions:j,size:v="medium",validation:b,id:w="",name:N="",...C}=e,S=(0,o.A)("inputNumber"),{formContextOnChange:k,values:A,errors:P,handleBlur:z,touched:R,fieldLevelValidation:_}=(0,d.x)();A&&!g&&(g=A[w||N]),c||(P&&!c&&(c=P[w||N]),c=R&&R[w||N]?c:void 0),(0,a.useEffect)(()=>{b&&_(w,b(g))},[]);let M=[S.base];return c&&M.push(S.variants.error),c||M.push(S.variants.standard),u&&M.push(S.with_icon),v&&M.push(S.size[v]),C.disabled&&M.push(S.disabled),(0,n.jsx)("div",{className:C.className,"data-sentry-component":"InputNumber","data-sentry-source-file":"InputNumber.tsx",children:(0,n.jsx)(r.H,{label:x,afterLabel:f,beforeLabel:p,labelOptional:h,layout:y,id:w,error:c,descriptionText:s,style:C.style,size:v,"data-sentry-element":"FormLayout","data-sentry-source-file":"InputNumber.tsx",children:(0,n.jsxs)("div",{className:S.container,children:[(0,n.jsx)("input",{"data-size":v,id:w,name:N,onChange:function(e){C.onChange&&C.onChange(e),k&&k(e),b&&_(w,b(e.target.value))},onBlur:function(e){z&&z(e),C.onBlur&&C.onBlur(e)},type:"number",ref:m,value:g,className:M.join(" "),...C}),u&&(0,n.jsx)(i.A,{size:v,icon:u}),c||j?(0,n.jsxs)("div",{className:S.actions_container,children:[c&&(0,n.jsx)(l.A,{size:v}),j&&j]}):null]})})})}},12523:(e,t,s)=>{"use strict";s.d(t,{A:()=>o});var n=s(80263),a=s(53239),r=s(9377),l=s(48492);function i(e,t){if(!t.error)return delete e[t.key],e;if(t)return{...e,[t.key]:t.error};throw Error()}function o(e){let{validate:t,...s}=e,[o,d]=(0,a.useReducer)(i,null),c=(0,r.Wx)({validateOnBlur:!0,...s,validationSchema:s.validationSchema,initialValues:s.initialValues,onSubmit:s.onSubmit,validate:t||function(){return o}});return(0,n.jsx)("form",{id:s.id,name:s.name,onSubmit:c.handleSubmit,className:s.className,style:s.style,method:"POST","data-sentry-component":"Form","data-sentry-source-file":"Form.tsx",children:(0,n.jsx)(l.h,{values:c.values,errors:c.errors,formContextOnChange:c.handleChange,handleBlur:c.handleBlur,touched:c.touched,fieldLevelValidation:function(e,t){d({key:e,error:t})},"data-sentry-element":"FormContextProvider","data-sentry-source-file":"Form.tsx",children:s.children({errors:c.errors,touched:c.touched,isSubmitting:c.isSubmitting,isValidating:c.isValidating,submitCount:c.submitCount,initialValues:c.initialValues,values:c.values,handleReset:c.handleReset,resetForm:c.resetForm,setFieldValue:c.setFieldValue})})})}},17835:(e,t,s)=>{"use strict";s.d(t,{A:()=>p});var n=s(80263),a=s(87355),r=s(53239),l=s(25481),i=s(45205),o=s(11789),d=s(45628),c=s(97008),u=s(92226),m=s(32211),x=s(72865),f=s(42125);let p=(0,u.r)(e=>{let{title:t,children:s}=e,u=(0,a.useRouter)(),{ref:p}=(0,l.g)(),h=(0,c.KT)(),y=(0,d.a)();(0,r.useEffect)(()=>{m.pe||u.push("/project/default")},[u]);let g=u.pathname.includes("billing")?u.pathname.split("/")[5]:u.pathname.split("/")[4],{projectAuthAll:j,projectEdgeFunctionAll:v,projectStorageAll:b,billingInvoices:w}=(0,o.x)(["project_auth:all","project_edge_function:all","project_storage:all","billing:invoices"]),N=(0,f.M)(p,h,y,{auth:j,edgeFunctions:v,storage:b,invoices:w});return(0,n.jsx)(x.A,{isBlocking:!1,title:t||"Settings",product:"Settings",productMenu:(0,n.jsx)(i.l,{page:g,menu:N}),"data-sentry-element":"ProjectLayout","data-sentry-component":"SettingsLayout","data-sentry-source-file":"SettingsLayout.tsx",children:s})})},21371:(e,t,s)=>{"use strict";s.d(t,{A:()=>S});var n=s(80263),a=s(60045),r=s(53434),l=s.n(r),i=s(67160),o=s(90354),d=s(8758),c=s.n(d),u=s(73969),m=s(86692),x=s(25481),f=s(9895),p=s(58595),h=s(83142),y=s(45628),g=s(94277),j=s(12523),v=s(96773),b=s(58173),w=s(37263),N=s(6017),C=s(81172);let S=e=>{var t,s,r,d,S;let{visible:k,loading:A,hideModal:P}=e,{ref:z}=(0,x.g)(),{project:R,isLoading:_}=(0,f.Om)(),{lastDatabaseResizeAt:M}=null!=R?R:{},I=(0,y.a)(),{data:D,isLoading:F}=(0,h.j5)({orgSlug:null==I?void 0:I.slug},{enabled:k}),B=null===M?0:360-l()().diff(M,"minutes"),E=B<=0,T=B<60?"".concat(B," minute(s)"):"".concat(Math.floor(B/60)," hours and ").concat(B%60," minute(s)"),{mutate:L,isLoading:G}=(0,p.F)({onSuccess:(e,t)=>{u.oR.success("Successfully updated disk size to ".concat(t.volumeSize," GB")),P(!1)}}),H=async e=>{if(!z)return console.error("Project ref is required");L({projectRef:z,volumeSize:e["new-disk-size"]})},V=null!=(S=null==R?void 0:R.volumeSizeGb)?S:0,Y=(0,m.object)({"new-disk-size":(0,m.number)().required("Please enter a GB amount you want to resize the disk up to.").min(Number(null!=V?V:0),"Must be more than ".concat(V," GB")).max(Number(200),"Must not be more than 200 GB")});return(0,n.jsx)(g.A,{header:"Increase Disk Storage Size",size:"medium",visible:k,loading:A,onCancel:()=>P(!1),hideFooter:!0,"data-sentry-element":"Modal","data-sentry-component":"DiskSizeConfigurationModal","data-sentry-source-file":"DiskSizeConfigurationModal.tsx",children:_||F?(0,n.jsxs)("div",{className:"flex flex-col gap-4 p-4",children:[(0,n.jsx)(C.A,{}),(0,n.jsx)(C.A,{})]}):(null==D?void 0:D.usage_billing_enabled)===!0?(0,n.jsx)(j.A,{name:"disk-resize-form",initialValues:{"new-disk-size":V},validationSchema:Y,onSubmit:H,children:()=>V>=200?(0,n.jsxs)(v.Fc,{variant:"warning",className:"rounded-t-none border-0",children:[(0,n.jsx)(b.id,{}),(0,n.jsx)(v.XL,{children:"Maximum manual disk size increase reached"}),(0,n.jsxs)(v.TN,{children:[(0,n.jsxs)("p",{children:["You cannot manually expand the disk size any more than ",200,"GB. If you need more than this, contact us via support for help."]}),(0,n.jsx)(w.$,{asChild:!0,type:"default",className:"mt-3",children:(0,n.jsx)(c(),{href:"/support/new?projectRef=".concat(z,"&category=").concat(a.S.PERFORMANCE_ISSUES,"&subject=Increase%20disk%20size%20beyond%20200GB"),children:"Contact support"})})]})]}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(g.A.Content,{className:"w-full space-y-4",children:[(0,n.jsxs)(v.Fc,{variant:E?"default":"warning",children:[(0,n.jsx)(i.A,{size:16}),(0,n.jsx)(v.XL,{children:"This operation is only possible every 6 hours"}),(0,n.jsxs)(v.TN,{children:[(0,n.jsx)("div",{className:"mb-4",children:E?"Upon updating your disk size, the next disk size update will only be available from ".concat(l()().format("DD MMM YYYY, HH:mm (ZZ)")):"Your database was last resized at ".concat(l()(M).format("DD MMM YYYY, HH:mm (ZZ)"),". You can resize your database again in approximately ").concat(T)}),(0,n.jsx)(w.$,{asChild:!0,type:"default",iconRight:(0,n.jsx)(o.A,{size:14}),children:(0,n.jsx)(c(),{href:"https://supabase.com/docs/guides/platform/database-size#disk-management",children:"Read more about disk management"})})]})]}),(0,n.jsx)(N.A,{required:!0,id:"new-disk-size",label:"New disk size",labelOptional:"GB",disabled:!E})]}),(0,n.jsx)(g.A.Separator,{}),(0,n.jsxs)(g.A.Content,{className:"flex space-x-2 justify-end",children:[(0,n.jsx)(w.$,{type:"default",onClick:()=>P(!1),children:"Cancel"}),(0,n.jsx)(w.$,{htmlType:"submit",type:"primary",disabled:!E||G,loading:G,children:"Update disk size"})]})]})}):(0,n.jsxs)(v.Fc,{className:"border-none",children:[(0,n.jsx)(b.mo,{}),(0,n.jsx)(v.XL,{children:(null==D||null==(t=D.plan)?void 0:t.id)==="free"?"Disk size configuration is not available for projects on the Free Plan":"Disk size configuration is only available when the spend cap has been disabled"}),(0,n.jsxs)(v.TN,{children:[(null==D||null==(s=D.plan)?void 0:s.id)==="free"?(0,n.jsx)("p",{children:"If you are intending to use more than 500MB of disk space, then you will need to upgrade to at least the Pro Plan."}):(0,n.jsx)("p",{children:"If you are intending to use more than 8GB of disk space, then you will need to disable your spend cap."}),(0,n.jsx)(w.$,{asChild:!0,type:"default",className:"mt-3",children:(0,n.jsx)(c(),{href:"/org/".concat(null==I?void 0:I.slug,"/billing?panel=").concat((null==D||null==(r=D.plan)?void 0:r.id)==="free"?"subscriptionPlan":"costControl"),target:"_blank",children:(null==D||null==(d=D.plan)?void 0:d.id)==="free"?"Upgrade subscription":"Disable spend cap"})})]})]})})}},22564:(e,t,s)=>{"use strict";s.d(t,{YX:()=>d,_4:()=>c,gI:()=>o,ge:()=>i,lB:()=>l});var n=s(80263),a=s(53239),r=s(82457);let l=e=>{let{children:t,header:s,footer:a}=e;return(0,n.jsxs)(i,{"data-sentry-element":"FormPanelContainer","data-sentry-component":"FormPanel","data-sentry-source-file":"FormPanel.tsx",children:[s&&(0,n.jsx)(o,{children:s}),(0,n.jsx)(d,{className:"divide-y","data-sentry-element":"FormPanelContent","data-sentry-source-file":"FormPanel.tsx",children:t}),a&&(0,n.jsx)(c,{children:a})]})},i=(0,a.forwardRef)((e,t)=>{let{children:s,...a}=e;return(0,n.jsx)("div",{ref:t,...a,className:(0,r.cn)("bg-surface-100 border overflow-hidden rounded-md shadow max-w-full",a.className),children:s})});i.displayName=i.displayName;let o=(0,a.forwardRef)((e,t)=>{let{children:s,...a}=e;return(0,n.jsx)("div",{ref:t,...a,className:(0,r.cn)("border-default border-b px-8 py-4",a.className),children:s})});o.displayName=o.displayName;let d=(0,a.forwardRef)((e,t)=>{let{children:s,...a}=e;return(0,n.jsx)("div",{ref:t,...a,className:(0,r.cn)("divide-border flex flex-col gap-0",a.className),children:s})});d.displayName=d.displayName;let c=(0,a.forwardRef)((e,t)=>{let{children:s,...a}=e;return(0,n.jsx)("div",{ref:t,...a,className:(0,r.cn)("border-t",a.className),children:s})});c.displayName=c.displayName},24717:(e,t,s)=>{"use strict";s.d(t,{BS:()=>i,Dm:()=>c,HJ:()=>j,Rf:()=>y,Uw:()=>d,Vw:()=>w,Xr:()=>b,aw:()=>p,bV:()=>l,cJ:()=>x,dX:()=>u,eh:()=>o,fh:()=>v,gu:()=>m,sZ:()=>f,tn:()=>g,xp:()=>h});var n=s(80263),a=s(53239),r=s(82457);let l="mx-auto w-full max-w-[1200px]",i="px-4 @lg:px-6 @xl:px-12 @2xl:px-20 @3xl:px-24",o=(0,a.forwardRef)((e,t)=>{let{className:s,bottomPadding:a,size:l="default",...o}=e;return(0,n.jsx)("div",{ref:t,...o,className:(0,r.cn)("mx-auto w-full",{small:"max-w-[768px]",default:"max-w-[1200px]",large:"max-w-[1600px]",full:"max-w-none"}[l],i,a&&"pb-16",s)})}),d=(0,a.forwardRef)((e,t)=>{let{className:s,...a}=e;return(0,n.jsx)("header",{...a,ref:t,className:(0,r.cn)("w-full","flex-col gap-3 py-6",s)})}),c=(0,a.forwardRef)((e,t)=>{let{className:s,...a}=e;return(0,n.jsx)("h1",{ref:t,...a,className:(0,r.cn)("text-2xl",s)})}),u=(0,a.forwardRef)((e,t)=>{let{className:s,...a}=e;return(0,n.jsx)("p",{ref:t,...a,className:(0,r.cn)("text-sm text-foreground-light",s)})}),m=(0,a.forwardRef)((e,t)=>{let{className:s,isFullWidth:a,topPadding:l,...i}=e;return(0,n.jsx)("div",{ref:t,...i,className:(0,r.cn)("flex flex-col first:pt-12 py-6",a?"w-full":"gap-3 lg:grid md:grid-cols-12",s)})}),x=(0,a.forwardRef)((e,t)=>{let{className:s,...a}=e;return(0,n.jsx)("div",{ref:t,...a,className:(0,r.cn)("w-full h-px bg-border",s)})}),f=(0,a.forwardRef)((e,t)=>{let{className:s,...a}=e;return(0,n.jsx)("h3",{ref:t,...a,className:(0,r.cn)("text-foreground text-xl",s)})}),p=(0,a.forwardRef)((e,t)=>{let{className:s,...a}=e;return(0,n.jsx)("p",{ref:t,...a,className:(0,r.cn)("text-sm text-foreground-light",s)})}),h=(0,a.forwardRef)((e,t)=>{let{className:s,children:a,title:l,...i}=e;return(0,n.jsxs)("div",{ref:t,...i,className:(0,r.cn)("col-span-4 xl:col-span-5 prose text-sm",s),children:[l&&(0,n.jsx)("h2",{children:l}),a]})}),y=(0,a.forwardRef)((e,t)=>{let{className:s,...a}=e;return(0,n.jsx)("div",{ref:t,...a,className:(0,r.cn)("col-span-8 xl:col-span-7","flex flex-col gap-6",s)})}),g=(0,a.forwardRef)((e,t)=>{let{className:s,...a}=e;return(0,n.jsx)("div",{ref:t,...a,className:(0,r.cn)("flex flex-col gap-3 items-center",s)})}),j=(0,a.forwardRef)((e,t)=>{let{className:s,...a}=e;return(0,n.jsx)("div",{ref:t,...a,className:(0,r.cn)("flex w-full items-center",s)})}),v=(0,a.forwardRef)((e,t)=>{let{className:s,...a}=e;return(0,n.jsx)("div",{ref:t,...a,className:(0,r.cn)("flex flex-row gap-3",s)})}),b=(0,a.forwardRef)((e,t)=>{let{className:s,...a}=e;return(0,n.jsx)("div",{ref:t,...a,className:(0,r.cn)("flex flex-col gap-3","min-w-[420px]",s)})}),w=(0,a.forwardRef)((e,t)=>{let{className:s,...a}=e;return(0,n.jsx)("div",{ref:t,...a,className:(0,r.cn)(l,i,"my-8 flex flex-col gap-8",s)})});d.displayName="ScaffoldHeader",c.displayName="ScaffoldTitle",u.displayName="ScaffoldDescription",o.displayName="ScaffoldContainer",x.displayName="ScaffoldDivider",m.displayName="ScaffoldSection",b.displayName="ScaffoldColumn",h.displayName="ScaffoldSectionDetail",y.displayName="ScaffoldSectionContent",g.displayName="ScaffoldFilterAndContent",j.displayName="ScaffoldActionsContainer",v.displayName="ScaffoldActionsGroup",w.displayName="ScaffoldContainerLegacy",f.displayName="ScaffoldSectionTitle",p.displayName="ScaffoldSectionDescription"},31817:(e,t,s)=>{"use strict";s.d(t,{F:()=>m});var n=s(80263),a=s(53239),r=s(5548),l=s(97164),i=s(53238),o=s(83207),d=s(67160),c=s(29260);let u={danger:(0,n.jsx)(l.A,{strokeWidth:1.5,size:18}),success:(0,n.jsx)(i.A,{strokeWidth:1.5,size:18}),warning:(0,n.jsx)(o.A,{strokeWidth:1.5,size:18}),info:(0,n.jsx)(d.A,{strokeWidth:1.5,size:18}),neutral:(0,n.jsx)(n.Fragment,{})};function m(e){let{variant:t="neutral",className:s,title:l,withIcon:i,closable:o,children:d,icon:m,actions:x}=e,f=(0,r.A)("alert"),[p,h]=(0,a.useState)(!0),y=[f.base];y.push(f.variant[t].base),s&&y.push(s);let g=[f.description,f.variant[t].description],j=[f.close];return(0,n.jsx)(n.Fragment,{children:p&&(0,n.jsxs)("div",{className:y.join(" "),children:[i?(0,n.jsx)("div",{className:f.variant[t].icon,children:i&&u[t]}):null,m&&m,(0,n.jsxs)("div",{className:"flex flex-1 items-center justify-between",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("h3",{className:[f.variant[t].header,f.header].join(" "),children:l}),(0,n.jsx)("div",{className:g.join(" "),children:d})]}),x]}),o&&(0,n.jsx)("button",{"aria-label":"Close alert",onClick:()=>h(!1),className:j.join(" "),children:(0,n.jsx)(c.A,{strokeWidth:2,size:16})})]})})}},32595:(e,t,s)=>{"use strict";s.d(t,{Y:()=>i});var n=s(80263),a=s(88712),r=s(37055),l=s(84161);function i(e){let{visible:t,description:s,actions:i,...o}=e;return(0,n.jsx)(a.N,{"data-sentry-element":"AnimatePresence","data-sentry-component":"NoticeBar","data-sentry-source-file":"NoticeBar.tsx",children:t&&(0,n.jsx)(r.P.div,{initial:{opacity:0,height:0,y:4},animate:{opacity:1,height:"auto",y:0},exit:{opacity:0,height:0,y:4},transition:{duration:.15},children:(0,n.jsxs)(l.Z,{...o,children:[s,(0,n.jsx)("div",{className:"flex flex-col gap-2",children:i&&(0,n.jsx)("div",{className:"mt-2",children:i})})]})})})}},39327:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});var n=s(80263),a=s(32211);let r=e=>{let{passwordStrengthScore:t=0,passwordStrengthMessage:s="",password:r="",generateStrongPassword:l}=e;return(0,n.jsxs)(n.Fragment,{children:[r&&(0,n.jsx)("div",{"aria-valuemax":100,"aria-valuemin":0,"aria-valuenow":a.Ny[t],"aria-valuetext":a.Ny[t],role:"progressbar",className:"mb-2 overflow-hidden transition-all border rounded bg-200 w-full",children:(0,n.jsx)("div",{style:{width:a.Ny[t]},className:"relative h-1 w-full ".concat(a.Yf[t]," transition-all duration-500 ease-out shadow-inner")})}),(0,n.jsxs)("p",{children:[s||"This is the password to your Postgres database, so it must be strong and hard to guess."," ",(0,n.jsx)("span",{className:"text-foreground opacity-50 underline hover:opacity-100 transition cursor-pointer",onClick:l,children:"Generate a password"})]})]})}},45205:(e,t,s)=>{"use strict";s.d(t,{l:()=>i});var n=s(80263),a=s(51555),r=s(72470),l=s(68084);let i=e=>{let{page:t,menu:s}=e;return(0,n.jsx)("div",{className:"flex flex-col space-y-8 overflow-y-auto","data-sentry-component":"ProductMenu","data-sentry-source-file":"ProductMenu.tsx",children:(0,n.jsx)(a.Ay,{type:"pills","data-sentry-element":"Menu","data-sentry-source-file":"ProductMenu.tsx",children:s.map((e,i)=>(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{className:"my-6 space-y-8",children:(0,n.jsxs)("div",{className:"mx-3",children:[(0,n.jsx)(a.Ay.Group,{title:e.title?(0,n.jsxs)("div",{className:"flex flex-col space-y-2 uppercase font-mono",children:[(0,n.jsx)("span",{children:e.title}),e.isPreview&&(0,n.jsx)(r.E,{variant:"warning",children:"Not production ready"})]}):null}),(0,n.jsx)("div",{children:e.items.map(e=>{let s=e.pages?e.pages.includes(null!=t?t:""):t===e.key;return(0,n.jsx)(l.A,{url:e.url,name:e.name,icon:e.icon,rightIcon:e.rightIcon,isActive:s,isExternal:e.isExternal,target:e.isExternal?"_blank":"_self",label:e.label},e.key)})})]})}),i!==s.length-1&&(0,n.jsx)("div",{className:"h-px w-full bg-border-overlay"})]},e.key||e.title))})})}},49695:(e,t,s)=>{"use strict";s.d(t,{u:()=>r});var n=s(92357),a=s.n(n);let r=()=>a().generate({length:16,numbers:!0,uppercase:!0})},51555:(e,t,s)=>{"use strict";s.d(t,{Ay:()=>m});var n=s(80263),a=s(53239),r=s(5548),l=s(82457);function i(e){let{children:t,className:s,tag:a="div",style:r}=e;return(0,n.jsx)("".concat(a),{style:r,"data-sentry-element":"CustomTag","data-sentry-component":"Typography","data-sentry-source-file":"Typography.tsx",children:t})}i.Title=function(e){let{className:t,level:s=1,children:a,style:r}=e;return(0,n.jsx)("h".concat(s),{style:r,"data-sentry-element":"CustomTag","data-sentry-component":"Title","data-sentry-source-file":"Title.tsx",children:a})},i.Text=function(e){let{className:t,children:s,style:a,type:r,disabled:l,mark:i,code:o,keyboard:d,underline:c,strikethrough:u,strong:m,small:x}=e;return o?(0,n.jsx)("code",{style:a,children:s}):i?(0,n.jsx)("mark",{style:a,children:s}):d?(0,n.jsx)("kbd",{style:a,children:s}):m?(0,n.jsx)("strong",{style:a,children:s}):(0,n.jsx)("span",{style:a,"data-sentry-component":"Text","data-sentry-source-file":"Text.tsx",children:s})},i.Link=function(e){let{children:t,target:s="_blank",href:a,className:r,onClick:l,style:i}=e;return(0,n.jsx)("a",{onClick:l,href:a,target:s,rel:"noopener noreferrer",style:i,"data-sentry-component":"Link","data-sentry-source-file":"Link.tsx",children:t})};let o=(0,a.createContext)({type:"text"}),d=e=>{let{type:t}=e;return(0,n.jsx)(o.Provider,{value:{type:t},"data-sentry-element":"unknown","data-sentry-component":"MenuContextProvider","data-sentry-source-file":"MenuContext.tsx",children:e.children})},c=()=>{let e=(0,a.useContext)(o);if(void 0===e)throw Error("MenuContext must be used within a MenuContextProvider.");return e};function u(e){let{children:t,className:s,ulClassName:a,style:r,type:l="text"}=e;return(0,n.jsx)("nav",{role:"menu","aria-label":"Sidebar","aria-orientation":"vertical","aria-labelledby":"options-menu",className:s,style:r,"data-sentry-component":"Menu","data-sentry-source-file":"Menu.tsx",children:(0,n.jsx)(d,{type:l,"data-sentry-element":"MenuContextProvider","data-sentry-source-file":"Menu.tsx",children:(0,n.jsx)("ul",{className:a,children:t})})})}u.Item=function(e){let{children:t,icon:s,active:a,rounded:i,onClick:o,doNotCloseOverlay:d=!1,showActiveBar:u=!1,style:m}=e,x=(0,r.A)("menu"),{type:f}=c(),p=[x.item.base];p.push(x.item.variants[f].base),a?p.push(x.item.variants[f].active):p.push(x.item.variants[f].normal);let h=[x.item.content.base];a?h.push(x.item.content.active):h.push(x.item.content.normal);let y=[x.item.icon.base];return a?y.push(x.item.icon.active):y.push(x.item.icon.normal),(0,n.jsxs)("li",{role:"menuitem",className:(0,l.cn)("outline-none",p),style:m,onClick:o,"aria-current":a?"page":void 0,"data-sentry-component":"Item","data-sentry-source-file":"Menu.tsx",children:[s&&(0,n.jsx)("div",{className:"".concat(y.join(" ")," min-w-fit"),children:s}),(0,n.jsx)("span",{className:h.join(" "),children:t})]})},u.Group=function(e){let{children:t,icon:s,title:a}=e,l=(0,r.A)("menu"),{type:i}=c();return(0,n.jsxs)("div",{className:[l.group.base,l.group.variants[i]].join(" "),"data-sentry-component":"Group","data-sentry-source-file":"Menu.tsx",children:[s&&(0,n.jsx)("span",{className:l.group.icon,children:s}),(0,n.jsx)("span",{className:l.group.content,children:a}),t]})},u.Misc=function(e){let{children:t}=e;return(0,n.jsx)("div",{"data-sentry-component":"Misc","data-sentry-source-file":"Menu.tsx",children:(0,n.jsx)(i.Text,{"data-sentry-element":"unknown","data-sentry-source-file":"Menu.tsx",children:(0,n.jsx)("span",{children:t})})})};let m=u},53070:(e,t,s)=>{"use strict";s.d(t,{Gw:()=>o});var n=s(56947),a=s(18232),r=s(67394);let l=()=>"\nselect sum(pg_database_size(pg_database.datname))::bigint as db_size from pg_database;\n".trim();async function i(e,t){var s;let{projectRef:n,connectionString:r}=e,i=l(),{result:o}=await (0,a.E)({projectRef:n,connectionString:r,sql:i,queryKey:["database-size"]},t),d=null==o||null==(s=o[0])?void 0:s.db_size;if("number"!=typeof d)throw Error("Error fetching dbSize");return d}let o=function(e){let{projectRef:t,connectionString:s}=e,{enabled:a=!0,...l}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,n.I)(r.c.databaseSize(t),e=>{let{signal:n}=e;return i({projectRef:t,connectionString:s},n)},{enabled:a&&void 0!==t,...l})}},54876:(e,t,s)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/project/[ref]/settings/database",function(){return s(76070)}])},58595:(e,t,s)=>{"use strict";s.d(t,{F:()=>d});var n=s(32144),a=s(80251),r=s(73969),l=s(48678),i=s(46224);async function o(e){let{projectRef:t,volumeSize:s}=e;if(!t)throw Error("projectRef is required");let{data:n,error:a}=await (0,l.bE)("/platform/projects/{ref}/resize",{params:{path:{ref:t}},body:{volume_size_gb:s}});return a&&(0,l.H4)(a),n}let d=function(){let{onSuccess:e,onError:t,...s}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},l=(0,n.jE)();return(0,a.n)(e=>o(e),{async onSuccess(t,s,n){let{projectRef:a}=s;l.setQueriesData(i.E.usage(a),e=>e?{...e,disk_volume_size_gb:s.volumeSize}:e),await (null==e?void 0:e(t,s,n))},async onError(e,s,n){void 0===t?r.oR.error("Failed to resize project disk: ".concat(e.message)):t(e,s,n)},...s})}},64477:(e,t,s)=>{"use strict";s.d(t,{d:()=>c});var n=s(80263),a=s(44893),r=s(79279),l=s(53239),i=s(82457);let o=(0,r.F)("peer inline-flex shrink-0 cursor-pointer items-center rounded-full border transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-brand data-[state=checked]:hover:bg-brand-600/90 data-[state=unchecked]:bg-control data-[state=unchecked]:hover:bg-border",{variants:{size:{small:"h-[16px] w-[28px]",medium:"h-[20px] w-[34px]",large:"h-[24px] w-[44px]"}},defaultVariants:{size:"medium"}}),d=(0,r.F)("pointer-events-none block rounded-full bg-foreground-lighter data-[state=checked]:bg-white shadow-lg ring-0 transition-transform",{variants:{size:{small:"h-[12px] w-[12px] data-[state=checked]:translate-x-[13px] data-[state=unchecked]:translate-x-[1px]",medium:"h-[16px] w-[16px] data-[state=checked]:translate-x-[15px] data-[state=unchecked]:translate-x-[1px]",large:"h-[18px] w-[18px] data-[state=checked]:translate-x-[22px] data-[state=unchecked]:translate-x-[3px]"}},defaultVariants:{size:"medium"}}),c=l.forwardRef((e,t)=>{let{className:s,size:r,...l}=e;return(0,n.jsx)(a.bL,{className:(0,i.cn)(o({size:r}),s),...l,ref:t,children:(0,n.jsx)(a.zi,{className:(0,i.cn)(d({size:r}))})})});c.displayName=a.bL.displayName},67843:(e,t,s)=>{"use strict";s.d(t,{DE:()=>o,sj:()=>l,y9:()=>r});var n=s(80263),a=s(53239);let r=e=>{let{children:t,id:s,header:a,disabled:r,className:l}=e;return(0,n.jsxs)("div",{id:s,className:["grid grid-cols-12 gap-6 px-4 md:px-8 py-4 md:py-8","".concat(r?" opacity-30":" opacity-100"),"".concat(l)].join(" "),"data-sentry-component":"FormSection","data-sentry-source-file":"FormSection.tsx",children:[a,t]})},l=e=>{let{children:t,className:s="",description:a}=e;return void 0!==a?(0,n.jsxs)("div",{className:"flex flex-col space-y-2 col-span-12 lg:col-span-5 ".concat(s),children:[(0,n.jsx)("label",{className:"text-foreground text-sm",children:t}),a]}):(0,n.jsx)("label",{className:"text-foreground col-span-12 text-sm lg:col-span-5 ".concat(s),children:t})},i=()=>(0,n.jsxs)("div",{className:"flex w-full flex-col gap-2","data-sentry-component":"Shimmer","data-sentry-source-file":"FormSection.tsx",children:[(0,n.jsx)("div",{className:"shimmering-loader h-2 w-1/3 rounded"}),(0,n.jsx)("div",{className:"flex flex-col justify-between space-y-2",children:(0,n.jsx)("div",{className:"shimmering-loader h-[34px] w-2/3 rounded"})})]}),o=e=>{let{children:t,loading:s=!0,fullWidth:r,className:l}=e;return(0,n.jsx)("div",{className:"\n        relative col-span-12 flex flex-col gap-6 lg:col-span-7\n        ".concat(r&&"!col-span-12","\n        ").concat(l,"\n      "),"data-sentry-component":"FormSectionContent","data-sentry-source-file":"FormSection.tsx",children:s?a.Children.map(t,()=>(0,n.jsx)(i,{})):t})}},68084:(e,t,s)=>{"use strict";s.d(t,{A:()=>d});var n=s(80263),a=s(8758),r=s.n(a),l=s(51555),i=s(72470),o=s(37263);let d=e=>{let{name:t="",isActive:s,isExternal:a,icon:d,rightIcon:c,url:u="",target:m="_self",onClick:x,textClassName:f="",hoverText:p="",label:h}=e,y=(0,n.jsx)(l.Ay.Item,{icon:d,rounded:!0,active:s,onClick:x,children:(0,n.jsxs)("div",{className:"flex w-full items-center justify-between gap-1",children:[(0,n.jsxs)("div",{title:p||("string"==typeof t?t:""),className:"flex items-center gap-2 truncate w-full "+f,children:[(0,n.jsxs)("span",{className:"truncate",children:[t," "]}),void 0!==h&&(0,n.jsx)(i.E,{variant:"warning",className:"py-0 px-1.5 capitalize",children:h})]}),c&&(0,n.jsx)("div",{children:c})]})});return u?a?(0,n.jsx)(o.$,{asChild:!0,block:!0,className:"!justify-start",type:"text",size:"small",icon:d,children:(0,n.jsx)(r(),{href:u,target:"_blank",rel:"noreferrer",children:t})}):(0,n.jsx)(r(),{href:u,className:"block",target:m,children:y}):y}},75607:(e,t,s)=>{"use strict";s.d(t,{I:()=>r});var n=s(80263),a=s(37263);let r=e=>{let{form:t,hasChanges:s,handleReset:r,helper:l,disabled:i=!1,isSubmitting:o,submitText:d="Save"}=e,c=o||i||!s&&void 0!==s;return(0,n.jsxs)("div",{className:["flex w-full items-center gap-2",l?"justify-between":"justify-end"].join(" "),"data-sentry-component":"FormActions","data-sentry-source-file":"FormActions.tsx",children:[l&&(0,n.jsx)("span",{className:"text-sm text-foreground-lighter",children:l}),(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)(a.$,{disabled:c,type:"default",htmlType:"reset",onClick:()=>r(),"data-sentry-element":"Button","data-sentry-source-file":"FormActions.tsx",children:"Cancel"}),(0,n.jsx)(a.$,{form:t,type:"primary",htmlType:"submit",disabled:c,loading:o,"data-sentry-element":"Button","data-sentry-source-file":"FormActions.tsx",children:d})]})]})}},76070:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>tF});var n=s(80263),a=s(8758),r=s.n(a),l=s(25481),i=s(92633),o=s(37263),d=s(32595);function c(){let{ref:e}=(0,l.g)();return(0,n.jsxs)("div",{id:"disk-management","data-sentry-component":"DiskManagementPanelForm","data-sentry-source-file":"DiskManagementPanelForm.tsx",children:[(0,n.jsx)(i.M,{title:"Disk Management",docsUrl:"https://supabase.com/docs/guides/platform/database-size#disk-management","data-sentry-element":"FormHeader","data-sentry-source-file":"DiskManagementPanelForm.tsx"}),(0,n.jsx)(d.Y,{visible:!0,type:"default",title:"Disk Management has moved",description:"Disk configuration is now managed alongside Project Compute on the new Compute and Disk page.",actions:(0,n.jsx)(o.$,{type:"default",asChild:!0,children:(0,n.jsx)(r(),{href:"/project/".concat(e,"/settings/compute-and-disk"),className:"!no-underline",children:"Go to Compute and Disk"})}),"data-sentry-element":"NoticeBar","data-sentry-source-file":"DiskManagementPanelForm.tsx"})]})}var u=s(32981),m=s(60045),x=s(77341),f=s.n(x),p=s(53239),h=s(87494),y=s(73969),g=s(39353),j=s(9895),v=s(80948),b=s(86165),w=s(81698),N=s(75607),C=s(26455),S=s(41422),k=s(5825),A=s(73893),P=s(32144),z=s(80251),R=s(48678),_=s(67394);async function M(e){let{ref:t,default_pool_size:s,max_client_conn:n,ignore_startup_parameters:a}=e;if(!t)return console.error("Project ref is required");let{data:r,error:l}=await (0,R.F6)("/platform/projects/{ref}/config/pgbouncer",{params:{path:{ref:t}},body:{default_pool_size:s,max_client_conn:n,ignore_startup_parameters:a}});return l&&(0,R.H4)(l),r}let I=function(){let{onSuccess:e,onError:t,...s}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=(0,P.jE)();return(0,z.n)(e=>M(e),{async onSuccess(t,s,a){let{ref:r}=s;await n.invalidateQueries(_.c.pgbouncerConfig(r)),await (null==e?void 0:e(t,s,a))},async onError(e,s,n){void 0===t?y.oR.error("Failed to update PgBouncer configuration: ".concat(e.message)):t(e,s,n)},...s})};var D=s(2349),F=s(19070),B=s(45628),E=s(56028),T=s(12532);let L=(0,p.createContext)(function(){let e=(0,E.BX)({usePoolerConnection:!0,setUsePoolerConnection:t=>{e.usePoolerConnection=t},showPoolingModeHelper:!1,setShowPoolingModeHelper:t=>{e.showPoolingModeHelper=t}});return e}());function G(e){let t=(0,p.useContext)(L);return(0,T.s)(t,e)}var H=s(72470),V=s(17082),Y=s(67963),$=s(93263),O=s(96773),U=s(84161),q=s(87916),W=s(81172);let X={ci_nano:{maxClientConn:200,poolSize:15},ci_micro:{maxClientConn:200,poolSize:15},ci_small:{maxClientConn:400,poolSize:15},ci_medium:{maxClientConn:600,poolSize:15},ci_large:{maxClientConn:800,poolSize:20},ci_xlarge:{maxClientConn:1e3,poolSize:20},ci_2xlarge:{maxClientConn:1500,poolSize:25},ci_4xlarge:{maxClientConn:3e3,poolSize:32},ci_8xlarge:{maxClientConn:6e3,poolSize:64},ci_12xlarge:{maxClientConn:9e3,poolSize:96},ci_16xlarge:{maxClientConn:12e3,poolSize:128},ci_24xlarge:{maxClientConn:18e3,poolSize:192},ci_24xlarge_optimized_cpu:{maxClientConn:18e3,poolSize:192},ci_24xlarge_optimized_memory:{maxClientConn:18e3,poolSize:192},ci_24xlarge_high_memory:{maxClientConn:18e3,poolSize:192},ci_48xlarge:{maxClientConn:36e3,poolSize:384},ci_48xlarge_optimized_cpu:{maxClientConn:36e3,poolSize:384},ci_48xlarge_optimized_memory:{maxClientConn:36e3,poolSize:384},ci_48xlarge_high_memory:{maxClientConn:36e3,poolSize:384}},Z="pooling-configuration-form",Q=g.Ay.object({default_pool_size:g.Ay.number().nullable(),max_client_conn:g.Ay.number().nullable()}),J=()=>{var e,t,s,a,r;let{ref:i}=(0,l.g)(),{project:o}=(0,j.Om)(),d=(0,B.a)();G();let c=(0,F.SE)(m.aG.UPDATE,"projects",{resource:{project_id:null==o?void 0:o.id}}),{data:x,error:g,isLoading:P,isError:z,isSuccess:R}=(0,A.N)({projectRef:i}),_=(0,p.useMemo)(()=>{var e;return(null==d||null==(e=d.plan)?void 0:e.id)==="free"},[d]),{data:M}=(0,k.Dt)({projectRef:null==o?void 0:o.ref,connectionString:null==o?void 0:o.connectionString}),{data:E,isSuccess:T}=(0,D.Q)({projectRef:i}),{mutate:L,isLoading:J}=I(),K=(0,h.mN)({resolver:(0,u.u)(Q),defaultValues:{default_pool_size:void 0,max_client_conn:null}}),{default_pool_size:ee}=K.watch(),et=!!(null==E?void 0:E.selected_addons.find(e=>"ipv4"===e.type)),es=null==E?void 0:E.selected_addons.find(e=>"compute_instance"===e.type),en=null!=(t=null!=(e=null==es?void 0:es.variant.name)?e:f()(null==o?void 0:o.infra_compute_size))?t:"Nano",ea=X[null!=(s=null==es?void 0:es.variant.identifier)?s:(null==o?void 0:o.infra_compute_size)==="nano"?"ci_nano":"ci_micro"],er=null!=(a=ea.poolSize)?a:15,el=null!=(r=ea.maxClientConn)?r:200,ei=(null==x?void 0:x.pool_mode)===null,eo=null==x?void 0:x.ignore_startup_parameters,ed=async e=>{let{default_pool_size:t}=e;if(!i)return console.error("Project ref is required");L({ref:i,default_pool_size:null===t?void 0:t,ignore_startup_parameters:null!=eo?eo:""},{onSuccess:e=>{y.oR.success("Successfully updated pooler configuration"),e&&K.reset({default_pool_size:e.default_pool_size})}})},ec=()=>{K.reset({default_pool_size:null==x?void 0:x.default_pool_size})};return(0,p.useEffect)(()=>{R&&ec()},[R]),(0,n.jsx)("section",{id:"connection-pooler","data-sentry-component":"ConnectionPooling","data-sentry-source-file":"ConnectionPooling.tsx",children:(0,n.jsxs)(S.A,{className:"!mb-0",title:(0,n.jsxs)("div",{className:"w-full flex items-center justify-between",children:[(0,n.jsxs)("div",{className:"flex items-center gap-x-2",children:[(0,n.jsx)("p",{children:"Connection pooling configuration"}),_?(0,n.jsx)(H.E,{children:"Shared Pooler"}):(0,n.jsx)(H.E,{children:"Shared/Dedicated Pooler"})]}),(0,n.jsx)(b.A,{href:"https://supabase.com/docs/guides/database/connecting-to-postgres#connection-pooler"})]}),footer:(0,n.jsx)(N.I,{form:Z,isSubmitting:J,hasChanges:K.formState.isDirty,handleReset:()=>ec(),helper:c?void 0:"You need additional permissions to update connection pooling settings"}),"data-sentry-element":"Panel","data-sentry-source-file":"ConnectionPooling.tsx",children:[T&&!_&&!et&&(0,n.jsx)(U.Z,{className:"border-x-0 border-t-0 rounded-none",type:"default",title:"Dedicated Pooler is not IPv4 compatible",children:(0,n.jsxs)("p",{className:"!m-0",children:["If your network only supports IPv4, consider purchasing the"," ",(0,n.jsx)(C.g,{href:"/project/".concat(i,"/settings/addons?panel=ipv4"),children:"IPv4 add-on"})]})}),(0,n.jsxs)(S.A.Content,{"data-sentry-element":"unknown","data-sentry-source-file":"ConnectionPooling.tsx",children:[P&&(0,n.jsxs)("div",{className:"flex flex-col gap-y-4",children:[Array.from({length:4}).map((e,t)=>(0,n.jsxs)(p.Fragment,{children:[(0,n.jsxs)("div",{className:"grid gap-2 items-center md:grid md:grid-cols-12 md:gap-x-4 w-full",children:[(0,n.jsx)(W.A,{className:"h-4 w-1/3 col-span-4",delayIndex:t}),(0,n.jsx)(W.A,{className:"h-8 w-full col-span-8",delayIndex:t})]}),(0,n.jsx)(V.w,{})]},"loader-".concat(t))),(0,n.jsx)(W.A,{className:"h-8 w-full"})]}),z&&(0,n.jsx)(v.A,{error:g,subject:"Failed to retrieve connection pooler configuration"}),ei&&(0,n.jsx)(U.Z,{type:"default",title:"Unable to retrieve pooling configuration",description:"Please start a new project to enable this feature"}),R&&(0,n.jsx)(Y.lV,{...K,children:(0,n.jsxs)("form",{id:Z,className:"flex flex-col gap-y-6 w-full",onSubmit:K.handleSubmit(ed),children:[(0,n.jsx)(Y.zB,{control:K.control,name:"default_pool_size",render:e=>{let{field:t}=e;return(0,n.jsxs)(q.M,{layout:"horizontal",label:"Pool Size",description:(0,n.jsxs)("p",{children:["The maximum number of connections made to the underlying Postgres cluster, per user+db combination. Pool size has a default of ",er," ","based on your compute size of ",en,"."]}),children:[(0,n.jsx)(Y.MJ,{children:(0,n.jsx)($.p,{...t,type:"number",className:"w-full",value:t.value||void 0,placeholder:t.value?"":"".concat(er),...K.register("default_pool_size",{setValueAs:w.y})})}),!!M&&(null!=ee?ee:15)>.8*M.maxConnections&&(0,n.jsxs)(O.Fc,{variant:"warning",className:"mt-2",children:[(0,n.jsxs)(O.XL,{className:"text-foreground",children:["Pool size is greater than 80% of the max connections (",M.maxConnections,") on your database"]}),(0,n.jsx)(O.TN,{children:"This may result in instability and unreliability with your database connections."})]})]})}}),(0,n.jsx)(Y.zB,{control:K.control,name:"max_client_conn",render:e=>{let{field:t}=e;return(0,n.jsx)(q.M,{layout:"horizontal",label:"Max Client Connections",description:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("p",{children:["The maximum number of concurrent client connections allowed. This value is fixed at ",el," based on your compute size of"," ",en," and cannot be changed."]}),(0,n.jsxs)("p",{className:"mt-2",children:["Please refer to our"," ",(0,n.jsx)(C.g,{href:"https://supabase.com/docs/guides/database/connection-management#configuring-supavisors-pool-size",children:"documentation"})," ","to find out more."]})]}),children:(0,n.jsx)(Y.MJ,{children:(0,n.jsx)($.p,{...t,type:"number",className:"w-full",value:(null==x?void 0:x.max_client_conn)||"",disabled:!0,placeholder:t.value?"":"".concat(el),...K.register("max_client_conn",{setValueAs:w.y})})})})}})]})})]})]})})};var K=s(47330),ee=s(263),et=s(71147),es=s(94525),en=s(13933),ea=s(22564),er=s(56259),el=s(56947);let ei={list:e=>["projects",e,"network-restrictions"]};async function eo(e,t){let{projectRef:s}=e;if(!s)throw Error("projectRef is required");let{data:n,error:a}=await (0,R.Jt)("/v1/projects/{ref}/network-restrictions",{params:{path:{ref:s}},signal:t});if(a){var r;if((null==a?void 0:a.code)===400&&(null==a||null==(r=a.message)?void 0:r.includes("not allowed to set up network restrictions")))return{entitlement:"disallowed",config:{dbAllowedCidrs:[]},status:""};(0,R.H4)(a)}return n}let ed=function(e){let{projectRef:t}=e,{enabled:s=!0,...n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,el.I)(ei.list(t),e=>{let{signal:s}=e;return eo({projectRef:t},s)},{enabled:s&&void 0!==t,...n})};var ec=s(85462),eu=s(42206),em=s(94277),ex=s(12523),ef=s(93057),ep=s(82153);async function eh(e){let{projectRef:t,dbAllowedCidrs:s,dbAllowedCidrsV6:n}=e;if(!t)throw Error("projectRef is required");let{data:a,error:r}=await (0,R.bE)("/v1/projects/{ref}/network-restrictions/apply",{params:{path:{ref:t}},body:{dbAllowedCidrs:s,dbAllowedCidrsV6:n}});return r&&(0,R.H4)(r),a}let ey=function(){let{onSuccess:e,onError:t,...s}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=(0,P.jE)();return(0,z.n)(e=>eh(e),{async onSuccess(t,s,a){let{projectRef:r}=s;await n.invalidateQueries(ei.list(r)),await (null==e?void 0:e(t,s,a))},async onError(e,s,n){void 0===t?y.oR.error("Failed to apply network restrictions: ".concat(e.message)):t(e,s,n)},...s})};var eg=s(71275),ej=s(13211);let ev=[ej.IPv4CidrRange.fromCidr("10.0.0.0/8"),ej.IPv4CidrRange.fromCidr("172.16.0.0/12"),ej.IPv4CidrRange.fromCidr("192.168.0.0/16")],eb=[ej.IPv6CidrRange.fromCidr("fc00::/7")],ew=e=>{if(e.includes("/"))return!1;let[t]=ej.Validator.isValidIPv4String(e),[s]=ej.Validator.isValidIPv6String(e);return t||s},eN=(e,t)=>{try{if("IPv4"===e){let e=ej.IPv4CidrRange.fromCidr("".concat(t,"/32"));return ev.map(t=>e.inside(t)).includes(!0)}{let e=ej.IPv6CidrRange.fromCidr("".concat(t,"/128"));return eb.map(t=>e.inside(t)).includes(!0)}}catch(e){return!1}},eC=e=>"".concat("0".repeat(4-e.length)).concat(e),eS=(e,t)=>{if("IPv4"===e)try{let e=ej.IPv4CidrRange.fromCidr(t),s=e.getFirst().octets.join("."),n=e.getLast().octets.join(".");return{start:s,end:n}}catch(e){return}try{let e=ej.IPv6CidrRange.fromCidr(t),s=e.getFirst().hexadecatet.toString().split(",").map(eC).join(":"),n=e.getLast().hexadecatet.toString().split(",").map(eC).join(":");return{start:s,end:n}}catch(e){return}},ek=e=>{let[t]=ej.Validator.isValidIPv4String(e.split("/")[0]);if(t){let t=ej.IPv4CidrRange.fromCidr(e),s=t.getFirst().toString(),n=t.getPrefix().toString();return"".concat(s,"/").concat(n)}{let t=ej.IPv6CidrRange.fromCidr(e),s=(0,ej.collapseIPv6Number)(t.getFirst().toString()),n=t.getPrefix().toString();return"".concat(s,"/").concat(n)}},eA=e=>{var t,s,a,r;let{type:i,hasOverachingRestriction:d,onClose:c}=e,{ref:u}=(0,l.g)(),{data:m}=ed({projectRef:u},{enabled:void 0!==i}),x=null!=(a=null==m||null==(t=m.config)?void 0:t.dbAllowedCidrs)?a:[],f=null!=(r=null==m||null==(s=m.config)?void 0:s.dbAllowedCidrsV6)?r:[],p=x.concat(f),{mutate:h,isLoading:g}=ey({onSuccess:()=>{y.oR.success("Successfully added restriction"),c()}}),j=async e=>{if(!u)return console.error("Project ref is required");let t="".concat(e.ipAddress,"/").concat(e.cidrBlockSize),s=ek(t);if(p.includes(t)||p.includes(s))return(0,y.oR)("The address ".concat(t," is already restricted"));d?h({projectRef:u,dbAllowedCidrs:"IPv4"===i?[s]:[],dbAllowedCidrsV6:"IPv6"===i?[s]:[]}):h({projectRef:u,dbAllowedCidrs:"IPv4"===i?[...x,s]:x,dbAllowedCidrsV6:"IPv6"===i?[...f,s]:f})};return(0,n.jsx)(em.A,{hideFooter:!0,size:"medium",visible:void 0!==i,onCancel:c,header:"Add a new ".concat(i," restriction"),"data-sentry-element":"Modal","data-sentry-component":"AddRestrictionModal","data-sentry-source-file":"AddRestrictionModal.tsx",children:(0,n.jsx)(ex.A,{validateOnBlur:!0,id:"add-restriction-form",className:"!border-t-0",initialValues:{ipAddress:"",cidrBlockSize:"IPv4"===i?"32":"128"},validate:e=>{let t={};if(void 0===i)return t;let{ipAddress:s,cidrBlockSize:n}=e,a="IPv4"===i?n<0||n>32:n<0||n>128;if((0===n.length||a)&&(t.cidrBlockSize="Size has to be between 0 to ".concat("IPv4"===i?32:128)),!ew(s))return t.ipAddress="Please enter a valid IP address",t;try{eN(i,s)&&(t.ipAddress="Private IP addresses are not supported")}catch(e){t.ipAddress=e.message}return t},onSubmit:j,"data-sentry-element":"Form","data-sentry-source-file":"AddRestrictionModal.tsx",children:e=>{var t,s;let{values:a}=e,r=!!(void 0!==i&&ew(a.ipAddress))&&eN(i,a.ipAddress),l=""!==a.cidrBlockSize&&("IPv4"===i&&a.cidrBlockSize>=0&&a.cidrBlockSize<=32||"IPv6"===i&&a.cidrBlockSize>=0&&a.cidrBlockSize<=128),d="IPv4"===i?Math.pow(2,32-(null!=(t=null==a?void 0:a.cidrBlockSize)?t:0)):Math.pow(2,128-(null!=(s=null==a?void 0:a.cidrBlockSize)?s:0)),u=void 0!==i?eS(i,"".concat(a.ipAddress,"/").concat(a.cidrBlockSize)):void 0,m=l&&!r&&void 0!==u,x=m?ek("".concat(a.ipAddress,"/").concat(a.cidrBlockSize)):"".concat(a.ipAddress,"/").concat(a.cidrBlockSize);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(em.A.Content,{className:"space-y-4",children:[(0,n.jsx)("p",{className:"text-sm text-foreground-light",children:"This will add an IP address range to a list of allowed ranges that can access your database."}),(0,n.jsx)(ep.A,{title:"Note: Restrictions only apply to direct connections to your database and connection pooler",description:"They do not currently apply to APIs offered over HTTPS, such as PostgREST, Storage, or Authentication.",urlLabel:"Learn more",url:"https://supabase.com/docs/guides/platform/network-restrictions#limitations"}),(0,n.jsxs)("div",{className:"flex space-x-4",children:[(0,n.jsx)("div",{className:"w-[55%]",children:(0,n.jsx)(ef.A,{label:"".concat(i," address"),id:"ipAddress",name:"ipAddress",placeholder:"IPv4"===i?"0.0.0.0":"::0"})}),(0,n.jsx)("div",{className:"flex-grow",children:(0,n.jsx)(ef.A,{label:(0,n.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,n.jsx)("p",{children:"CIDR Block Size"}),(0,n.jsxs)(ec.m_,{children:[(0,n.jsx)(ec.k$,{children:(0,n.jsx)(eg.A,{size:"14",strokeWidth:2})}),(0,n.jsxs)(ec.ZI,{side:"bottom",className:"w-80",children:["Classless inter-domain routing (CIDR) notation is the notation used to identify networks and hosts in the networks. The block size tells us how many bits we need to take for the network prefix, and is a value between 0 to"," ","IPv4"===i?32:128,"."]})]})]}),id:"cidrBlockSize",name:"cidrBlockSize",type:"number",placeholder:"IPv4"===i?"32":"128",min:0,max:"IPv4"===i?32:128})})]})]}),(0,n.jsx)(em.A.Separator,{}),m?(0,n.jsxs)(em.A.Content,{className:"space-y-1",children:[(0,n.jsxs)("p",{className:"text-sm",children:["The address range ",(0,n.jsx)("code",{className:"text-xs",children:x})," will be restricted"]}),(0,n.jsxs)("p",{className:"text-sm text-foreground-light",children:["Selected address space: ",(0,n.jsx)("code",{className:"text-xs",children:u.start})," to"," ",(0,n.jsx)("code",{className:"text-xs",children:u.end})," "]}),(0,n.jsxs)("p",{className:"text-sm text-foreground-light",children:["Number of addresses: ",d]})]}):(0,n.jsx)(em.A.Content,{children:(0,n.jsx)("div",{className:"h-[68px] flex items-center",children:(0,n.jsx)("p",{className:"text-sm text-foreground-light",children:"A summary of your restriction will be shown here after entering a valid IP address and CIDR block size. IP addresses will also be normalized."})})}),(0,n.jsx)(em.A.Separator,{}),(0,n.jsxs)(em.A.Content,{className:"flex items-center justify-end space-x-2",children:[(0,n.jsx)(o.$,{type:"default",disabled:g,onClick:()=>c(),children:"Cancel"}),(0,n.jsx)(o.$,{htmlType:"submit",loading:g,disabled:g,children:"Save restriction"})]})]})}})})};var eP=s(83543);let ez=e=>{let{visible:t,onClose:s}=e,{ref:a}=(0,eP.g)(),{mutate:r,isLoading:l}=ey({onSuccess:()=>s()}),i=async()=>{if(!a)return console.error("Project ref is required");r({projectRef:a,dbAllowedCidrs:["0.0.0.0/0"],dbAllowedCidrsV6:["::/0"]})};return(0,n.jsxs)(em.A,{hideFooter:!0,size:"small",visible:t,onCancel:s,header:"Allow access from all IP addresses","data-sentry-element":"Modal","data-sentry-component":"AllowAllModal","data-sentry-source-file":"AllowAllModal.tsx",children:[(0,n.jsx)(em.A.Content,{className:"space-y-4","data-sentry-element":"unknown","data-sentry-source-file":"AllowAllModal.tsx",children:(0,n.jsx)("p",{className:"text-sm text-foreground-light",children:"This will allow any IP address to access your project's database. Are you sure?"})}),(0,n.jsx)(em.A.Separator,{"data-sentry-element":"unknown","data-sentry-source-file":"AllowAllModal.tsx"}),(0,n.jsxs)(em.A.Content,{className:"flex items-center justify-end space-x-2","data-sentry-element":"unknown","data-sentry-source-file":"AllowAllModal.tsx",children:[(0,n.jsx)(o.$,{type:"default",disabled:l,onClick:()=>s(),"data-sentry-element":"Button","data-sentry-source-file":"AllowAllModal.tsx",children:"Cancel"}),(0,n.jsx)(o.$,{loading:l,disabled:l,onClick:()=>i(),"data-sentry-element":"Button","data-sentry-source-file":"AllowAllModal.tsx",children:"Confirm"})]})]})},eR=e=>{let{visible:t,onClose:s}=e,{ref:a}=(0,l.g)(),{mutate:r,isLoading:i}=ey({onSuccess:()=>s()}),d=async()=>{if(!a)return console.error("Project ref is required");await r({projectRef:a,dbAllowedCidrs:[],dbAllowedCidrsV6:[]})};return(0,n.jsxs)(em.A,{hideFooter:!0,size:"medium",visible:t,onCancel:s,header:"Restrict access from all IP addresses","data-sentry-element":"Modal","data-sentry-component":"DisallowAllModal","data-sentry-source-file":"DisallowAllModal.tsx",children:[(0,n.jsxs)(em.A.Content,{className:"space-y-4","data-sentry-element":"unknown","data-sentry-source-file":"DisallowAllModal.tsx",children:[(0,n.jsx)("p",{className:"text-sm text-foreground-light",children:"This will prevent any external IP addresses from accessing your project's database. Are you sure?"}),(0,n.jsx)(ep.A,{defaultVisibility:!0,hideCollapse:!0,title:"Note: Restrictions only apply to direct connections to your database and connection pooler",description:"They do not currently apply to APIs offered over HTTPS, such as PostgREST, Storage, or Authentication.","data-sentry-element":"InformationBox","data-sentry-source-file":"DisallowAllModal.tsx"})]}),(0,n.jsx)(em.A.Separator,{"data-sentry-element":"unknown","data-sentry-source-file":"DisallowAllModal.tsx"}),(0,n.jsxs)(em.A.Content,{className:"flex items-center justify-end space-x-2","data-sentry-element":"unknown","data-sentry-source-file":"DisallowAllModal.tsx",children:[(0,n.jsx)(o.$,{type:"default",disabled:i,onClick:()=>s(),"data-sentry-element":"Button","data-sentry-source-file":"DisallowAllModal.tsx",children:"Cancel"}),(0,n.jsx)(o.$,{loading:i,disabled:i,onClick:()=>d(),"data-sentry-element":"Button","data-sentry-source-file":"DisallowAllModal.tsx",children:"Confirm"})]})]})},e_=e=>{var t,s,a,r;let{visible:i,selectedRestriction:d,onClose:c}=e,{ref:u}=(0,l.g)(),{data:m}=ed({projectRef:u},{enabled:i}),x=null!=(a=null==m||null==(t=m.config)?void 0:t.dbAllowedCidrs)?a:[],f=null!=(r=null==m||null==(s=m.config)?void 0:s.dbAllowedCidrsV6)?r:[],p=x.concat(f),{mutate:h,isLoading:g}=ey({onSuccess:()=>c(),onError:e=>{y.oR.error("Failed to remove restriction: ".concat(e.message))}}),j=1===p.length&&p[0]===d,v=async()=>{if(!u)return console.error("Project ref is required");if(!d)return console.error("Missing selected restriction");let e=x.includes(d)?x.filter(e=>e!==d):x,t=f.includes(d)?f.filter(e=>e!==d):f;0===e.length&&0===t.length?h({projectRef:u,dbAllowedCidrs:["0.0.0.0/0"],dbAllowedCidrsV6:["::/0"]}):h({projectRef:u,dbAllowedCidrs:e,dbAllowedCidrsV6:t})};return(0,n.jsxs)(em.A,{hideFooter:!0,size:"medium",visible:i,onCancel:c,header:"Confirm to remove restriction","data-sentry-element":"Modal","data-sentry-component":"RemoveRestrictionModal","data-sentry-source-file":"RemoveRestrictionModal.tsx",children:[(0,n.jsxs)(em.A.Content,{className:"space-y-4","data-sentry-element":"unknown","data-sentry-source-file":"RemoveRestrictionModal.tsx",children:[(0,n.jsxs)("p",{className:"text-sm text-foreground-light",children:["The IPv4 address ",(0,n.jsx)("code",{className:"text-xs",children:d})," will be removed from your list of network restrictions",j?".":", and no longer have access to your project's database."]}),j&&(0,n.jsx)(U.Z,{type:"warning",title:"Database access will no longer be restricted",description:"Removing all network restrictions will default to your database being accessible from all IP addresses."})]}),(0,n.jsxs)(em.A.Content,{className:"flex items-center justify-end space-x-2","data-sentry-element":"unknown","data-sentry-source-file":"RemoveRestrictionModal.tsx",children:[(0,n.jsx)(o.$,{type:"default",disabled:g,onClick:()=>c(),"data-sentry-element":"Button","data-sentry-source-file":"RemoveRestrictionModal.tsx",children:"Cancel"}),(0,n.jsx)(o.$,{loading:g,disabled:g,onClick:()=>v(),"data-sentry-element":"Button","data-sentry-source-file":"RemoveRestrictionModal.tsx",children:"Remove restriction"})]})]})},eM=e=>{let{disabled:t,onClick:s}=e;return(0,n.jsxs)(ec.m_,{"data-sentry-element":"Tooltip","data-sentry-component":"AllowAllAccessButton","data-sentry-source-file":"NetworkRestrictions.tsx",children:[(0,n.jsx)(ec.k$,{asChild:!0,"data-sentry-element":"TooltipTrigger","data-sentry-source-file":"NetworkRestrictions.tsx",children:(0,n.jsx)(o.$,{type:"default",disabled:t,onClick:()=>s(!0),"data-sentry-element":"Button","data-sentry-source-file":"NetworkRestrictions.tsx",children:"Allow all access"})}),t&&(0,n.jsx)(ec.ZI,{side:"bottom",children:"You need additional permissions to update network restrictions"})]})},eI=e=>{let{disabled:t,onClick:s}=e;return(0,n.jsx)(en.G,{disabled:t,type:"default",onClick:()=>s(!0),tooltip:{content:{side:"bottom",text:t?"You need additional permissions to update network restrictions":void 0}},"data-sentry-element":"ButtonTooltip","data-sentry-component":"DisallowAllAccessButton","data-sentry-source-file":"NetworkRestrictions.tsx",children:"Restrict all access"})},eD=()=>{var e,t,s,a,r;let{ref:d}=(0,l.g)(),{project:c}=(0,j.Om)(),[u,x]=(0,p.useState)(),[f,h]=(0,p.useState)(!1),[y,g]=(0,p.useState)(!1),[v,w]=(0,p.useState)(),{data:N,isLoading:C}=ed({projectRef:d}),k=(0,F.SE)(m.aG.UPDATE,"projects",{resource:{project_id:null==c?void 0:c.id}}),A=(null==N?void 0:N.entitlement)==="allowed",P=null!=(s=null==N||null==(e=N.config)?void 0:e.dbAllowedCidrs)?s:[],z=null!=(a=null==N||null==(t=N.config)?void 0:t.dbAllowedCidrsV6)?a:[],R=P.concat(z),_=null!=(r=null==N?void 0:N.status)?r:"",M="stored"===_,I=0===R.length&&0===_.length,D=R.includes("0.0.0.0/0")&&R.includes("::/0"),B=0===R.length;return A?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("section",{id:"network-restrictions",children:[(0,n.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,n.jsx)(i.M,{className:"mb-0",title:"Network Restrictions",description:"Allow specific IP ranges to have access to your database.","data-sentry-element":"FormHeader","data-sentry-source-file":"NetworkRestrictions.tsx"}),(0,n.jsxs)("div",{className:"flex items-center gap-x-2",children:[(0,n.jsx)(b.A,{href:"https://supabase.com/docs/guides/platform/network-restrictions","data-sentry-element":"DocsButton","data-sentry-source-file":"NetworkRestrictions.tsx"}),k?(0,n.jsxs)(eu.rI,{children:[(0,n.jsx)(eu.ty,{asChild:!0,children:(0,n.jsx)(o.$,{type:"primary",disabled:!k,iconRight:(0,n.jsx)(K.A,{size:14}),children:"Add restriction"})}),(0,n.jsxs)(eu.SQ,{align:"end",side:"bottom",className:"w-48",children:[(0,n.jsx)(eu._2,{disabled:C,onClick:()=>x("IPv4"),children:(0,n.jsx)("p",{className:"block text-foreground",children:"Add IPv4 restriction"})},"IPv4"),(0,n.jsx)(eu._2,{disabled:C,onClick:()=>x("IPv6"),children:(0,n.jsx)("p",{className:"block text-foreground",children:"Add IPv6 restriction"})},"IPv6")]})]}):(0,n.jsx)(en.G,{disabled:!0,type:"primary",tooltip:{content:{side:"bottom",text:"You need additional permissions to update network restrictions"}},children:"Add restriction"})]})]}),C?(0,n.jsx)(S.A,{children:(0,n.jsx)(S.A.Content,{children:(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)(er.A,{}),(0,n.jsx)(er.A,{className:"w-[70%]"}),(0,n.jsx)(er.A,{className:"w-[50%]"})]})})}):M?(0,n.jsx)(S.A,{children:(0,n.jsx)(S.A.Content,{children:(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,n.jsx)(ee.A,{size:20,strokeWidth:1.5,className:"text-foreground-light"}),(0,n.jsx)("p",{className:"text-sm",children:"Your network restrictions were not applied correctly"})]}),(0,n.jsx)("p",{className:"text-sm text-foreground-light",children:"Please try to add your network restrictions again"})]}),(0,n.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,n.jsx)(eM,{disabled:!k,onClick:h}),(0,n.jsx)(eI,{disabled:!k,onClick:g})]})]})})}):(0,n.jsx)(ea.lB,{children:I||D?(0,n.jsxs)("div",{className:"px-8 py-8 flex items-center justify-between",children:[(0,n.jsx)("div",{className:"flex items-start space-x-4",children:(0,n.jsxs)("div",{className:"space-y-1",children:[(0,n.jsx)("p",{className:"text-foreground-light text-sm",children:"Your database can be accessed by all IP addresses"}),(0,n.jsx)("p",{className:"text-foreground-light text-sm",children:"You may start limiting access to your database by adding a network restriction."})]})}),(0,n.jsx)("div",{children:(0,n.jsx)(eI,{disabled:!k,onClick:g})})]}):B?(0,n.jsxs)("div",{className:"px-8 py-8 flex items-center justify-between",children:[(0,n.jsxs)("div",{className:"flex items-start space-x-4",children:[(0,n.jsx)(et.A,{size:20,className:"text-foreground-light",strokeWidth:1.5}),(0,n.jsxs)("div",{className:"space-y-1",children:[(0,n.jsxs)("p",{className:"text-foreground-light text-sm",children:["Your database ",(0,n.jsx)("span",{className:"text-amber-900 opacity-80",children:"cannot"})," be accessed externally"]}),(0,n.jsx)("p",{className:"text-foreground-light text-sm",children:"All external IP addresses have been disallowed from accessing your project's database."}),(0,n.jsx)("p",{className:"text-foreground-light text-sm",children:"Note: Restrictions only apply to your database, and not to Supabase services"})]})]}),(0,n.jsx)("div",{children:(0,n.jsx)(eM,{disabled:!k,onClick:h})})]}):(0,n.jsxs)("div",{className:"divide-y",children:[(0,n.jsxs)("div",{className:"px-8 py-3 flex items-center justify-between",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("p",{className:"text-foreground-light text-sm",children:"Only the following IP addresses have access to your database"}),(0,n.jsx)("p",{className:"text-foreground-light text-sm",children:"You may remove all of them to allow all IP addresses to have access to your database"}),(0,n.jsx)("p",{className:"text-foreground-light text-sm",children:"Note: Restrictions only apply to your database, and not to Supabase services"})]}),(0,n.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,n.jsx)(eM,{disabled:!k,onClick:h}),(0,n.jsx)(eI,{disabled:!k,onClick:g})]})]}),R.map(e=>(0,n.jsxs)("div",{className:"px-8 py-4 flex items-center justify-between",children:[(0,n.jsxs)("div",{className:"flex items-center space-x-5",children:[(0,n.jsx)(es.A,{size:16,className:"text-foreground-light"}),(0,n.jsx)(H.E,{children:P.includes(e)?"IPv4":"IPv6"}),(0,n.jsx)("p",{className:"text-sm font-mono",children:e})]}),(0,n.jsx)(o.$,{type:"default",onClick:()=>w(e),children:"Remove"})]},e))]})})]}),(0,n.jsx)(ez,{visible:f,onClose:()=>h(!1),"data-sentry-element":"AllowAllModal","data-sentry-source-file":"NetworkRestrictions.tsx"}),(0,n.jsx)(eR,{visible:y,onClose:()=>g(!1),"data-sentry-element":"DisallowAllModal","data-sentry-source-file":"NetworkRestrictions.tsx"}),(0,n.jsx)(eA,{type:u,hasOverachingRestriction:D||B,onClose:()=>x(void 0),"data-sentry-element":"AddRestrictionModal","data-sentry-source-file":"NetworkRestrictions.tsx"}),(0,n.jsx)(e_,{visible:void 0!==v,selectedRestriction:v,onClose:()=>w(void 0),"data-sentry-element":"RemoveRestrictionModal","data-sentry-source-file":"NetworkRestrictions.tsx"})]}):null},eF={list:e=>["projects",e,"banned-ips"]};async function eB(e){let{projectRef:t,ips:s}=e,{data:n,error:a}=await (0,R.yH)("/v1/projects/{ref}/network-bans",{params:{path:{ref:t}},body:{ipv4_addresses:s}});return a&&(0,R.H4)(a),n}let eE=function(){let{onSuccess:e,onError:t,...s}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=(0,P.jE)();return(0,z.n)(e=>eB(e),{async onSuccess(t,s,a){let{projectRef:r}=s;await n.invalidateQueries(eF.list(r)),await (null==e?void 0:e(t,s,a))},async onError(e,s,n){void 0===t?y.oR.error("Failed to unban ips: ".concat(e.message)):t(e,s,n)},...s})};async function eT(e,t){let{projectRef:s}=e;if(!s)throw Error("projectRef is required");let{data:n,error:a}=await (0,R.bE)("/v1/projects/{ref}/network-bans/retrieve",{params:{path:{ref:s}},signal:t});return a&&(0,R.H4)(a),n}let eL=function(e){let{projectRef:t}=e,{enabled:s=!0,...n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,el.I)(eF.list(t),e=>{let{signal:s}=e;return eT({projectRef:t},s)},{enabled:s&&void 0!==t,...n})};var eG=s(32211),eH=s(7189);async function eV(){try{return(await (0,R.x8)("".concat(eG.o2,"/api/get-ip-address")).then(e=>e.json())).ipAddress}catch(e){throw e}}let eY=function(){let{enabled:e=!0,...t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,el.I)(eH.d.ipAddress(),()=>eV(),{enabled:e&&!eG.pe,...t})};var e$=s(35644),eO=s(54097);let eU=()=>{let{ref:e}=(0,l.g)(),{project:t}=(0,j.Om)(),[s,a]=(0,p.useState)(null),{isLoading:r,isFetching:o,data:d,error:c}=eL({projectRef:e}),{data:u}=eY(),[x,f]=(0,p.useState)(!1),[h,g]=(0,p.useState)(null),w=(0,F.SE)(m.aG.UPDATE,"projects",{resource:{project_id:null==t?void 0:t.id}}),{mutate:N,isLoading:C}=eE({onSuccess:()=>{y.oR.success("IP address successfully unbanned"),a(null),f(!1)},onError:e=>{y.oR.error("Failed to unban IP: ".concat(null==e?void 0:e.message))}}),S=e=>{a(e),g(e),f(!0)};return(0,n.jsxs)("div",{id:"banned-ips","data-sentry-component":"BannedIPs","data-sentry-source-file":"BannedIPs.tsx",children:[(0,n.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,n.jsx)(i.M,{className:"mb-0",title:"Network Bans",description:"List of IP addresses that are temporarily blocked if their traffic pattern looks abusive","data-sentry-element":"FormHeader","data-sentry-source-file":"BannedIPs.tsx"}),(0,n.jsx)(b.A,{href:"https://supabase.com/docs/reference/cli/supabase-network-bans","data-sentry-element":"DocsButton","data-sentry-source-file":"BannedIPs.tsx"})]}),(0,n.jsx)(ea.lB,{"data-sentry-element":"FormPanel","data-sentry-source-file":"BannedIPs.tsx",children:r||o?(0,n.jsxs)("div",{className:"px-8 py-4 space-y-4",children:[(0,n.jsx)(e$.E,{className:"h-4 w-full"}),(0,n.jsx)(e$.E,{className:"h-4 w-full"})]}):c?(0,n.jsx)(v.A,{className:"border-0 rounded-none",error:c,subject:"Failed to retrieve banned IP addresses"}):d&&d.banned_ipv4_addresses.length>0?d.banned_ipv4_addresses.map(e=>(0,n.jsxs)("div",{className:"px-8 py-4 flex items-center justify-between",children:[(0,n.jsxs)("div",{className:"flex items-center space-x-5",children:[(0,n.jsx)(es.A,{size:16,className:"text-foreground-lighter"}),(0,n.jsx)("p",{className:"text-sm font-mono",children:e}),e===u&&(0,n.jsx)(H.E,{children:"Your IP address"})]}),(0,n.jsx)("div",{children:(0,n.jsx)(en.G,{type:"default",disabled:!w,onClick:()=>S(e),tooltip:{content:{side:"bottom",text:w?void 0:"You need additional permissions to unban networks"}},children:"Unban IP"})})]},e)):(0,n.jsx)("p",{className:"text-foreground-light text-sm px-8 py-4",children:"There are no banned IP addresses for your project."})}),(0,n.jsx)(eO.A,{variant:"destructive",size:"medium",loading:C,visible:x,title:"Confirm Unban IP",confirmLabel:"Confirm Unban",confirmLabelLoading:"Unbanning...",onCancel:()=>f(!1),onConfirm:()=>{null!=h&&e&&N({projectRef:e,ips:[h]})},alert:{title:"This action cannot be undone",description:"Are you sure you want to unban this IP address ".concat(s,"?")},"data-sentry-element":"ConfirmationModal","data-sentry-source-file":"BannedIPs.tsx"})]})};var eq=s(45969),eW=s(64928),eX=s(73451),eZ=s(71425);let eQ=()=>(0,n.jsxs)("div",{className:"w-full flex flex-col xl:flex-row border py-10 pl-10 rounded-md","data-sentry-component":"ConnectionStringMoved","data-sentry-source-file":"ConnectionStringMoved.tsx",children:[(0,n.jsxs)("div",{className:"flex flex-col gap-0 z-[2]",children:[(0,n.jsx)("p",{className:"text-sm text-foreground",children:"Connection string has moved"}),(0,n.jsx)("p",{className:"text-sm text-foreground-lighter",children:"You can find Project connect details by clicking 'Connect' in the top bar"})]}),(0,n.jsxs)("div",{className:"relative grow flex flex-col -space-y-px",children:[(0,n.jsx)("div",{className:"w-full h-3",children:(0,n.jsx)("div",{className:"bg-gradient-to-t from-background-surface-300 via-[25%] to-background-200 to-[100%] h-full w-full"})}),(0,n.jsxs)("div",{className:"flex justify-end relative",children:[(0,n.jsxs)("div",{className:"bg-dash-sidebar border-b border-t border-t-border-muted py-2 px-10 flex gap-3 relative overflow-hidden",children:[(0,n.jsx)(o.$,{type:"text",size:"tiny",className:"rounded-full pointer-events-none opacity-50",iconRight:(0,n.jsx)(eq.A,{size:12,strokeWidth:1.5}),"data-sentry-element":"Button","data-sentry-source-file":"ConnectionStringMoved.tsx",children:"Project name"}),(0,n.jsx)(o.$,{type:"default",size:"tiny",className:"rounded-full pointer-events-none ring-1 ring-foreground-muted/20",icon:(0,n.jsx)(eW.A,{size:12,className:"rotate-90"}),"data-sentry-element":"Button","data-sentry-source-file":"ConnectionStringMoved.tsx",children:"Connect"}),(0,n.jsx)(o.$,{type:"text",size:"tiny",className:"rounded-full pointer-events-none -mr-20 opacity-50",icon:(0,n.jsx)(eX.A,{size:12}),"data-sentry-element":"Button","data-sentry-source-file":"ConnectionStringMoved.tsx",children:"Enable Branching"})]}),(0,n.jsx)(eZ.A,{className:" absolute top-7 right-[110px] text-foreground-light fill-background",strokeWidth:1,"data-sentry-element":"Pointer","data-sentry-source-file":"ConnectionStringMoved.tsx"})]}),(0,n.jsx)("div",{className:"absolute -inset-2 bg-gradient-to-l from-transparent via-background-200 via-[95%] to-background-200 to-[100%] z-[1]"})]})]});var eJ=s(83207),eK=s(90354),e0=s(21679),e2=s(46224);async function e1(e){let{projectRef:t}=e,{data:s,error:n}=await (0,R.bE)("/v1/projects/{ref}/readonly/temporary-disable",{params:{path:{ref:t}}});return n&&(0,R.H4)(n),s}let e4=function(){let{onSuccess:e,onError:t,...s}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=(0,P.jE)();return(0,z.n)(e=>e1(e),{async onSuccess(t,s,a){setTimeout(()=>n.invalidateQueries(e2.E.resourceWarnings()),2e3),await (null==e?void 0:e(t,s,a))},async onError(e,s,n){void 0===t?y.oR.error("Failed to disable read only mode: ".concat(e.message)):t(e,s,n)},...s})},e3=e=>{let{visible:t,onClose:s}=e,{ref:a}=(0,l.g)(),{mutate:r,isLoading:i}=e4({onSuccess:()=>{y.oR.success("Successfully disabled read-only mode for 15 minutes"),s()}});return(0,n.jsx)(em.A,{alignFooter:"right",visible:t,onCancel:s,loading:i,confirmText:"Disable read-only mode",header:"Confirm to temporarily disable read-only mode",onConfirm:()=>{if(!a)return console.error("Project ref is required");r({projectRef:a})},"data-sentry-element":"Modal","data-sentry-component":"ConfirmDisableReadOnlyModeModal","data-sentry-source-file":"ConfirmDisableReadOnlyModal.tsx",children:(0,n.jsxs)(em.A.Content,{className:"space-y-2","data-sentry-element":"unknown","data-sentry-source-file":"ConfirmDisableReadOnlyModal.tsx",children:[(0,n.jsxs)("p",{className:"text-sm",children:["This will temporarily allow writes to your database for the"," ",(0,n.jsx)("span",{className:"text-amber-900",children:"next 15 minutes"}),", during which you can reduce your database size. After deleting data, you should run a vacuum to reclaim as much space as possible."]}),(0,n.jsx)("p",{className:"text-sm",children:"If your database size has not been sufficiently reduced after 15 minutes, read-only mode will be toggled back on. Otherwise, it will stay disabled."})]})})},e5=()=>{var e,t,s;let{ref:a}=(0,l.g)(),i=(0,B.a)(),[d,c]=(0,p.useState)(!1),{data:u}=(0,e0.p)(),m=null!=(s=null==(t=null!=u?u:[])||null==(e=t.find(e=>e.project===a))?void 0:e.is_readonly_mode_enabled)&&s;return(0,n.jsxs)(n.Fragment,{children:[m&&(0,n.jsxs)(O.Fc,{variant:"destructive",children:[(0,n.jsx)(eJ.A,{}),(0,n.jsx)(O.XL,{children:"Project is in read-only mode and database is no longer accepting write requests"}),(0,n.jsxs)(O.TN,{children:["You have reached 95% of your project's disk space, and read-only mode has been enabled to preserve your database's stability and prevent your project from exceeding its current billing plan. To resolve this, you may:",(0,n.jsxs)("ul",{className:"list-disc pl-6 mt-1",children:[(0,n.jsx)("li",{children:"Temporarily disable read-only mode to free up space and reduce your database size"}),(null==i?void 0:i.plan.id)==="free"?(0,n.jsxs)("li",{children:[(0,n.jsx)(r(),{href:"/org/".concat(null==i?void 0:i.slug,"/billing?panel=subscriptionPlan&source=databaseReadOnlyAlertUpgradePlan"),children:(0,n.jsx)("a",{className:"text underline",children:"Upgrade to the Pro Plan"})})," ","to increase your database size limit to 8GB."]}):(null==i?void 0:i.plan.id)==="pro"&&(null==i?void 0:i.usage_billing_enabled)?(0,n.jsxs)("li",{children:[(0,n.jsx)(r(),{href:"/org/".concat(null==i?void 0:i.slug,"/billing?panel=subscriptionPlan&source=databaseReadOnlyAlertSpendCap"),children:(0,n.jsx)("a",{className:"text-foreground underline",children:"Disable your Spend Cap"})})," ","to allow your project to auto-scale and expand beyond the 8GB database size limit"]}):null]})]}),(0,n.jsxs)("div",{className:"mt-4 flex items-center space-x-2",children:[(0,n.jsx)(o.$,{type:"default",onClick:()=>c(!0),children:"Disable read-only mode"}),(0,n.jsx)(o.$,{asChild:!0,type:"default",icon:(0,n.jsx)(eK.A,{}),children:(0,n.jsx)("a",{href:"https://supabase.com/docs/guides/platform/database-size#disabling-read-only-mode",target:"_blank",rel:"noreferrer",children:"Learn more"})})]})]}),(0,n.jsx)(e3,{visible:d,onClose:()=>c(!1),"data-sentry-element":"ConfirmDisableReadOnlyModeModal","data-sentry-source-file":"DatabaseReadOnlyAlert.tsx"})]})};var e8=s(77796),e6=s.n(e8),e7=s(39327),e9=s(70699);async function te(e){let{ref:t,password:s}=e;if(!t)return console.error("Project ref is required");let{data:n,error:a}=await (0,R.F6)("/platform/projects/{ref}/db-password",{params:{path:{ref:t}},body:{password:s}});return a&&(0,R.H4)(a),n}let tt=function(){let{onSuccess:e,onError:t,...s}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=(0,P.jE)();return(0,z.n)(e=>te(e),{async onSuccess(t,s,a){await n.invalidateQueries(e9.g.detail(s.ref)),await (null==e?void 0:e(t,s,a))},async onError(e,s,n){void 0===t?y.oR.error("Failed to reset database password: ".concat(e.message)):t(e,s,n)},...s})};var ts=s(97468),tn=s(49695);let ta=e=>{let{disabled:t=!1}=e,{ref:s}=(0,l.g)(),a=(0,j.f2)(),{project:r}=(0,j.Om)(),i=(0,F.SE)(m.aG.UPDATE,"projects",{resource:{project_id:null==r?void 0:r.id}}),[d,c]=(0,p.useState)(!1),[u,x]=(0,p.useState)(""),[f,h]=(0,p.useState)(""),[g,v]=(0,p.useState)(""),[b,w]=(0,p.useState)(0),{mutate:N,isLoading:C}=tt({onSuccess:async()=>{y.oR.success("Successfully updated database password"),c(!1)}});async function k(e){let{message:t,warning:s,strength:n}=await (0,ts.A)(e);w(n),v(s),h(t)}(0,p.useEffect)(()=>{d&&(x(""),h(""),v(""),w(0))},[d]);let A=(0,p.useRef)(e6()(e=>k(e),300)).current,P=async()=>{if(!s)return console.error("Project ref is required");b>=eG.p8&&N({ref:s,password:u})};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(S.A,{className:"!m-0","data-sentry-element":"Panel","data-sentry-source-file":"ResetDbPassword.tsx",children:(0,n.jsx)(S.A.Content,{"data-sentry-element":"unknown","data-sentry-source-file":"ResetDbPassword.tsx",children:(0,n.jsxs)("div",{className:"grid grid-cols-1 items-center lg:grid-cols-3 scroll-mt-6",id:"database-password",children:[(0,n.jsxs)("div",{className:"col-span-2 space-y-1",children:[(0,n.jsx)("p",{className:"block",children:"Database password"}),(0,n.jsx)("p",{className:"text-sm opacity-50",children:"You can use this password to connect directly to your Postgres database."})]}),(0,n.jsx)("div",{className:"flex items-end justify-end",children:(0,n.jsx)(en.G,{type:"default",disabled:!i||!a||t,onClick:()=>c(!0),tooltip:{content:{side:"bottom",text:i?a?void 0:"Unable to reset database password as project is not active":"You need additional permissions to reset the database password"}},"data-sentry-element":"ButtonTooltip","data-sentry-source-file":"ResetDbPassword.tsx",children:"Reset database password"})})]})})}),(0,n.jsxs)(em.A,{hideFooter:!0,header:(0,n.jsx)("h5",{className:"text-sm text-foreground",children:"Reset database password"}),confirmText:"Reset password",size:"medium",visible:d,loading:C,onCancel:()=>c(!1),"data-sentry-element":"Modal","data-sentry-source-file":"ResetDbPassword.tsx",children:[(0,n.jsx)(em.A.Content,{className:"w-full space-y-8","data-sentry-element":"unknown","data-sentry-source-file":"ResetDbPassword.tsx",children:(0,n.jsx)(ef.A,{type:"password",value:u,copy:u.length>0,onChange:e=>{let t=e.target.value;x(t),""==t?(w(-1),h("")):A(t)},error:g,descriptionText:(0,n.jsx)(e7.A,{passwordStrengthScore:b,passwordStrengthMessage:f,password:u,generateStrongPassword:function(){let e=(0,tn.u)();x(e),A(e)}}),"data-sentry-element":"Input","data-sentry-source-file":"ResetDbPassword.tsx"})}),(0,n.jsx)(em.A.Separator,{"data-sentry-element":"unknown","data-sentry-source-file":"ResetDbPassword.tsx"}),(0,n.jsxs)(em.A.Content,{className:"flex items-center justify-end space-x-2","data-sentry-element":"unknown","data-sentry-source-file":"ResetDbPassword.tsx",children:[(0,n.jsx)(o.$,{type:"default",disabled:C,onClick:()=>c(!1),"data-sentry-element":"Button","data-sentry-source-file":"ResetDbPassword.tsx",children:"Cancel"}),(0,n.jsx)(o.$,{type:"primary",loading:C,disabled:C,onClick:()=>P(),"data-sentry-element":"Button","data-sentry-source-file":"ResetDbPassword.tsx",children:"Reset password"})]})]})]})};var tr=s(67160),tl=s(63809),ti=s(21371),to=s(58595),td=s(53070),tc=s(69938),tu=s(35416),tm=s(58173);let tx=e=>{var t,s,a,d,c;let{disabled:u=!1}=e,{ref:x}=(0,l.g)(),{project:f}=(0,j.Om)(),p=(0,B.a)(),[{show_increase_disk_size_modal:h},g]=(0,tc.W)(),v="true"===h,b=e=>{g({show_increase_disk_size_modal:("function"==typeof e?e(v):e)?"true":void 0})},w=(0,F.SE)(m.aG.UPDATE,"projects",{resource:{project_id:null==f?void 0:f.id}}),{isLoading:N}=(0,to.F)({onSuccess:(e,t)=>{y.oR.success("Successfully updated disk size to ".concat(t.volumeSize," GB")),b(!1)}}),C=null!=(c=null==f?void 0:f.volumeSizeGb)?c:0,{data:k}=(0,td.Gw)({projectRef:null==f?void 0:f.ref,connectionString:null==f?void 0:f.connectionString});return(0,n.jsxs)("div",{id:"diskManagement","data-sentry-component":"DiskSizeConfiguration","data-sentry-source-file":"DiskSizeConfiguration.tsx",children:[(0,n.jsx)(i.M,{title:"Disk Management","data-sentry-element":"FormHeader","data-sentry-source-file":"DiskSizeConfiguration.tsx"}),(null==p?void 0:p.usage_billing_enabled)===!0?(0,n.jsx)("div",{className:"flex flex-col gap-3",children:(0,n.jsx)(S.A,{className:"!m-0",children:(0,n.jsx)(S.A.Content,{children:(0,n.jsx)("div",{children:(0,n.jsxs)("div",{children:[C&&(0,n.jsx)("span",{className:"text-foreground-light flex gap-2 items-baseline",children:(0,n.jsx)("h4",{className:"text-foreground",children:"Current Disk Storage"})}),(0,n.jsxs)("div",{className:"grid grid-cols-2 items-center",children:[(0,n.jsx)("p",{className:"text-sm text-lighter max-w-lg",children:"Supabase employs auto-scaling storage and allows for manual disk size adjustments when necessary"}),(0,n.jsx)("div",{className:"flex items-end justify-end",children:(0,n.jsx)(en.G,{type:"default",disabled:!w||u,onClick:()=>b(!0),tooltip:{content:{side:"bottom",text:w?void 0:"You need additional permissions to increase the disk size"}},children:"Increase disk size"})})]}),(0,n.jsxs)("div",{className:"grid grid-cols-12 gap-2 mt-12 items-start",children:[(0,n.jsxs)("div",{className:"col-span-4 grid grid-cols-2 gap-x-12 gap-y-4 items-start",children:[(0,n.jsxs)("div",{className:"grid gap-2 col-span-1",children:[(0,n.jsx)("h5",{className:"text-sm",children:"Space used"}),(0,n.jsx)("span",{className:"text-lg",children:(0,tu.z3)(null!=k?k:0,2,"GB")})]}),(0,n.jsxs)("div",{className:"grid gap-2 col-span-1",children:[(0,n.jsx)("h5",{className:"text-sm",children:"Total size"}),(0,n.jsxs)("span",{className:"text-lg",children:[C," GB"]})]}),(0,n.jsx)("div",{className:"col-span-2 mt-4",children:(0,n.jsx)(o.$,{asChild:!0,type:"default",iconRight:(0,n.jsx)(eK.A,{size:14}),children:(0,n.jsx)(r(),{href:"/project/".concat(x,"/reports/database#database-size-report"),children:"View detailed summary"})})})]}),(0,n.jsx)("div",{className:"col-span-8",children:(0,n.jsxs)(O.Fc,{children:[(0,n.jsx)(tr.A,{size:16}),(0,n.jsx)(O.XL,{children:"Importing a lot of data?"}),(0,n.jsx)(O.TN,{children:(0,n.jsx)(tl.o,{className:"max-w-full",content:"\nWe auto-scale your disk as you need more storage, but can only do this once every 6 hours.\nIf you upload more than 1.5x the current size of your storage, your database will go\ninto read-only mode. If you know how big your database is going to be, you can\nmanually increase the size here.\n\nRead more about [disk management](https://supabase.com/docs/guides/platform/database-size#disk-management) and how to [free up storage space](https://supabase.com/docs/guides/platform/database-size#vacuum-operations).\n"})})]})})]})]})})})})}):(0,n.jsxs)(O.Fc,{children:[(0,n.jsx)(tm.mo,{}),(0,n.jsx)(O.XL,{children:(null==p||null==(t=p.plan)?void 0:t.id)==="free"?"Disk size configuration is not available for projects on the Free Plan":"Disk size configuration is only available when the spend cap has been disabled"}),(0,n.jsxs)(O.TN,{children:[(null==p||null==(s=p.plan)?void 0:s.id)==="free"?(0,n.jsx)("p",{children:"If you are intending to use more than 500MB of disk space, then you will need to upgrade to at least the Pro Plan."}):(0,n.jsx)("p",{children:"If you are intending to use more than 8GB of disk space, then you will need to disable your spend cap."}),(0,n.jsx)(o.$,{asChild:!0,type:"default",className:"mt-3",children:(0,n.jsx)(r(),{href:"/org/".concat(null==p?void 0:p.slug,"/billing?panel=").concat((null==p||null==(a=p.plan)?void 0:a.id)==="free"?"subscriptionPlan":"costControl"),target:"_blank",children:(null==p||null==(d=p.plan)?void 0:d.id)==="free"?"Upgrade subscription":"Disable spend cap"})})]})]}),(0,n.jsx)(ti.A,{visible:v,loading:N,hideModal:b,"data-sentry-element":"DiskSizeConfigurationModal","data-sentry-source-file":"DiskSizeConfiguration.tsx"})]})};var tf=s(12862),tp=s(37785),th=s(73957);let ty=()=>{let{ref:e}=(0,l.g)(),t=G(),s=(0,tp.RE)(),{data:a}=(0,tf.A)({projectRef:e}),r=null==a?void 0:a.find(e=>e.identifier===s.selectedDatabaseId),i=()=>{let e=document.getElementById("connection-pooler");e&&e.scrollIntoView({behavior:"smooth",block:"center"})};return(0,n.jsx)(th.lG,{open:t.showPoolingModeHelper,onOpenChange:t.setShowPoolingModeHelper,"data-sentry-element":"Dialog","data-sentry-component":"PoolingModesModal","data-sentry-source-file":"PoolingModesModal.tsx",children:(0,n.jsxs)(th.Cf,{hideClose:!0,className:"sm:max-w-4xl","data-sentry-element":"DialogContent","data-sentry-source-file":"PoolingModesModal.tsx",children:[(0,n.jsxs)(th.c7,{"data-sentry-element":"DialogHeader","data-sentry-source-file":"PoolingModesModal.tsx",children:[(0,n.jsx)(th.L3,{"data-sentry-element":"DialogTitle","data-sentry-source-file":"PoolingModesModal.tsx",children:(0,n.jsxs)("div",{className:"w-full flex items-center justify-between",children:[(0,n.jsx)("p",{className:"max-w-2xl",children:"Which pooling mode should I use?"}),(0,n.jsx)(b.A,{href:"https://supabase.com/docs/guides/database/connecting-to-postgres#how-connection-pooling-works","data-sentry-element":"DocsButton","data-sentry-source-file":"PoolingModesModal.tsx"})]})}),(0,n.jsx)(th.rr,{className:"max-w-2xl","data-sentry-element":"DialogDescription","data-sentry-source-file":"PoolingModesModal.tsx",children:"A connection pooler is a system (external to Postgres) which manages Postgres connections by allocating connections whenever clients make requests."})]}),(0,n.jsx)(th.pf,{"data-sentry-element":"DialogSectionSeparator","data-sentry-source-file":"PoolingModesModal.tsx"}),(0,n.jsx)(th.OO,{"data-sentry-element":"DialogSection","data-sentry-source-file":"PoolingModesModal.tsx",children:(0,n.jsx)(tl.o,{className:"max-w-full [&>h3]:text-sm",content:"\nEach pooling mode handles connections differently.\n\n### Transaction mode\nThis mode is recommended if you are connecting from *serverless environments*. A connection is assigned to the client for the duration of a transaction. Two consecutive transactions from the same client could be executed over two different connections. Some session-based Postgres features such as prepared statements are *not available* with this option.\n\n### Session mode\nThis mode is similar to connecting to your database directly. There is full support for prepared statements in this mode. When a new client connects, a connection is assigned to the client until it disconnects. You *might run into pooler connection limits* since the connection is held till the client disconnects.\n\n### Using session and transaction modes at the same time\n ".concat((null==r?void 0:r.pool_mode)==="transaction"?"You can use the session mode connection string (port 5432) and transaction mode connection string (port 6543) in your application.":"To get the best of both worlds, as a starting point, we recommend using session mode just when you need support for prepared statements and transaction mode in other cases.","\n"),"data-sentry-element":"Markdown","data-sentry-source-file":"PoolingModesModal.tsx"})}),(null==r?void 0:r.pool_mode)==="session"&&(0,n.jsx)("div",{className:"px-6",children:(0,n.jsxs)(O.Fc,{variant:"warning",children:[(0,n.jsx)(eJ.A,{strokeWidth:2}),(0,n.jsx)(O.XL,{children:"Pooling mode is currently configured to use session mode"}),(0,n.jsxs)(O.TN,{children:["To use transaction mode concurrently with session mode, change the pooling mode to transaction first in the"," ",(0,n.jsx)("span",{tabIndex:0,className:"text-foreground cursor-pointer underline underline-offset-2",onClick:()=>{t.setShowPoolingModeHelper(!1),i()},children:"connection pooling settings"}),". After this, you can use transaction mode on port 6543 and session mode on port 5432."]})]})}),(0,n.jsx)(th.Es,{"data-sentry-element":"DialogFooter","data-sentry-source-file":"PoolingModesModal.tsx",children:(0,n.jsx)(th.HM,{onClick:()=>t.setShowPoolingModeHelper(!1),"data-sentry-element":"DialogClose","data-sentry-source-file":"PoolingModesModal.tsx",children:(0,n.jsx)(o.$,{type:"default","data-sentry-element":"Button","data-sentry-source-file":"PoolingModesModal.tsx",children:"Close"})})})]})})};var tg=s(58394),tj=s(432),tv=s(67843),tb=s(41804);let tw={list:e=>["projects",e,"ssl-enforcement"]};async function tN(e,t){let{projectRef:s}=e;if(!s)throw Error("projectRef is required");let{data:n,error:a}=await (0,R.Jt)("/v1/projects/{ref}/ssl-enforcement",{params:{path:{ref:s}},signal:t});if(a){var r;if((null==a?void 0:a.code)===400&&(null==a||null==(r=a.message)?void 0:r.includes("not allowed to configure SSL enforcements")))return{appliedSuccessfully:!1,currentConfig:{database:!1},isNotAllowed:!0};(0,R.H4)(a)}return n}let tC=function(e){let{projectRef:t}=e,{enabled:s=!0,...n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,el.I)(tw.list(t),e=>{let{signal:s}=e;return tN({projectRef:t},s)},{enabled:s&&void 0!==t,...n})};async function tS(e){let{projectRef:t,requestedConfig:s}=e;if(!t)throw Error("projectRef is required");let{data:n,error:a}=await (0,R.yJ)("/v1/projects/{ref}/ssl-enforcement",{params:{path:{ref:t}},body:{requestedConfig:s}});return a&&(0,R.H4)(a),n}let tk=function(){let{onSuccess:e,onError:t,...s}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=(0,P.jE)();return(0,z.n)(e=>tS(e),{async onSuccess(t,s,a){let{projectRef:r}=s;await n.invalidateQueries(tw.list(r)),await (null==e?void 0:e(t,s,a))},async onError(e,s,n){void 0===t?y.oR.error("Failed to update SSL enforcement: ".concat(e.message)):t(e,s,n)},...s})};var tA=s(31817),tP=s(64477);let tz=()=>{let{ref:e}=(0,l.g)(),[t,s]=(0,p.useState)(!1),{data:a}=(0,tb.Gm)({projectRef:e}),{data:d,isLoading:c,isSuccess:u}=tC({projectRef:e}),{mutate:x,isLoading:f}=tk({onSuccess:()=>{y.oR.success("Successfully updated SSL configuration")},onError:e=>{s(v),y.oR.error("Failed to update SSL enforcement: ".concat(e.message))}}),{project:h}=(0,j.Om)(),g=(0,F.SE)(m.aG.UPDATE,"projects",{resource:{project_id:null==h?void 0:h.id}}),v=!!u&&d.appliedSuccessfully&&d.currentConfig.database,w=!(void 0!==d&&"isNotAllowed"in d&&d.isNotAllowed),N="prod",C=(null==a?void 0:a.inserted_at)!==void 0&&new Date(a.inserted_at)>=new Date("2021-04-30");(0,p.useEffect)(()=>{!c&&d&&s(v)},[c]);let S=async()=>{if(!e)return console.error("Project ref is required");s(!t),x({projectRef:e,requestedConfig:{database:!t}})};return(0,n.jsxs)("div",{id:"ssl-configuration","data-sentry-component":"SSLConfiguration","data-sentry-source-file":"SSLConfiguration.tsx",children:[(0,n.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,n.jsx)(i.M,{className:"mb-0",title:"SSL Configuration",description:"","data-sentry-element":"FormHeader","data-sentry-source-file":"SSLConfiguration.tsx"}),(0,n.jsx)(b.A,{href:"https://supabase.com/docs/guides/platform/ssl-enforcement","data-sentry-element":"DocsButton","data-sentry-source-file":"SSLConfiguration.tsx"})]}),(0,n.jsxs)(ea.lB,{"data-sentry-element":"FormPanel","data-sentry-source-file":"SSLConfiguration.tsx",children:[(0,n.jsx)(tv.y9,{header:(0,n.jsx)(tv.sj,{className:"lg:col-span-7",description:(0,n.jsxs)("div",{className:"space-y-4",children:[(0,n.jsx)("p",{className:"text-sm text-foreground-light",children:"Reject non-SSL connections to your database"}),u&&!(null==d?void 0:d.appliedSuccessfully)&&(0,n.jsxs)(tA.F,{withIcon:!0,variant:"warning",title:"SSL enforcement was not updated successfully",children:["Please try updating again, or contact"," ",(0,n.jsx)(r(),{href:"/support/new",target:"_blank",rel:"noreferrer",className:"underline",children:"support"})," ","if this error persists"]})]}),children:"Enforce SSL on incoming connections"}),"data-sentry-element":"FormSection","data-sentry-source-file":"SSLConfiguration.tsx",children:(0,n.jsx)(tv.DE,{loading:!1,className:"lg:!col-span-5","data-sentry-element":"FormSectionContent","data-sentry-source-file":"SSLConfiguration.tsx",children:(0,n.jsxs)("div",{className:"flex items-center justify-end mt-2.5 space-x-2",children:[(c||f)&&(0,n.jsx)(tg.A,{className:"animate-spin",strokeWidth:1.5,size:16}),u&&(0,n.jsxs)(ec.m_,{children:[(0,n.jsx)(ec.k$,{asChild:!0,children:(0,n.jsx)("div",{children:(0,n.jsx)(tP.d,{size:"large",checked:t,disabled:c||f||!g||!w,onCheckedChange:S})})}),(!g||!w)&&(0,n.jsx)(ec.ZI,{side:"bottom",className:"w-64 text-center",children:g?w?"":"Your project does not have access to SSL enforcement":"You need additional permissions to update SSL enforcement for your project"})]})]})})}),(0,n.jsxs)("div",{className:"grid grid-cols-1 items-center lg:grid-cols-2 p-8",children:[(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)("p",{className:"block text-sm",children:"SSL Certificate"}),(0,n.jsx)("div",{style:{maxWidth:"420px"},children:(0,n.jsx)("p",{className:"text-sm opacity-50",children:"Use this certificate when connecting to your database to prevent snooping and man-in-the-middle attacks."})})]}),(0,n.jsx)("div",{className:"flex items-end justify-end",children:C?(0,n.jsx)(o.$,{type:"default",icon:(0,n.jsx)(tj.A,{}),children:(0,n.jsx)("a",{href:"https://supabase-downloads.s3-ap-southeast-1.amazonaws.com/".concat(N,"/ssl/").concat(N,"-ca-2021.crt"),children:"Download certificate"})}):(0,n.jsx)(en.G,{disabled:!0,type:"default",icon:(0,n.jsx)(tj.A,{}),tooltip:{content:{side:"bottom",text:"Projects before 15:08 (GMT+08), 29th April 2021 do not have SSL certificates installed"}},children:"Download certificate"})})]})]})]})};var tR=s(4649),t_=s(17835),tM=s(24717),tI=s(97008);let tD=()=>{let e=(0,tI.lh)(),t=(0,tI.BA)();return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(tM.eh,{"data-sentry-element":"ScaffoldContainer","data-sentry-source-file":"database.tsx",children:(0,n.jsx)(tM.Uw,{"data-sentry-element":"ScaffoldHeader","data-sentry-source-file":"database.tsx",children:(0,n.jsx)(tM.Dm,{"data-sentry-element":"ScaffoldTitle","data-sentry-source-file":"database.tsx",children:"Database Settings"})})}),(0,n.jsx)(tM.eh,{bottomPadding:!0,"data-sentry-element":"ScaffoldContainer","data-sentry-source-file":"database.tsx",children:(0,n.jsxs)("div",{className:"space-y-10",children:[(0,n.jsxs)("div",{className:"flex flex-col gap-y-10",children:[(0,n.jsx)(e5,{"data-sentry-element":"DatabaseReadOnlyAlert","data-sentry-source-file":"database.tsx"}),(0,n.jsx)(eQ,{"data-sentry-element":"ConnectionStringMoved","data-sentry-source-file":"database.tsx"}),(0,n.jsx)(ta,{"data-sentry-element":"ResetDbPassword","data-sentry-source-file":"database.tsx"}),(0,n.jsx)(J,{"data-sentry-element":"ConnectionPooling","data-sentry-source-file":"database.tsx"})]}),(0,n.jsx)(tz,{"data-sentry-element":"SSLConfiguration","data-sentry-source-file":"database.tsx"}),e||t?(0,n.jsx)(c,{}):(0,n.jsx)(tx,{}),(0,n.jsx)(eD,{"data-sentry-element":"NetworkRestrictions","data-sentry-source-file":"database.tsx"}),(0,n.jsx)(eU,{"data-sentry-element":"BannedIPs","data-sentry-source-file":"database.tsx"})]})}),(0,n.jsx)(ty,{"data-sentry-element":"PoolingModesModal","data-sentry-source-file":"database.tsx"})]})};tD.getLayout=e=>(0,n.jsx)(tR.A,{children:(0,n.jsx)(t_.A,{title:"Database",children:e})});let tF=tD},81698:(e,t,s)=>{"use strict";s.d(t,{H:()=>n,y:()=>a});let n=s(39353).Yj().transform(e=>""===e?null:e).nullable().refine(e=>null===e||!isNaN(Number(e)),{message:"Invalid number"}).transform(e=>null===e?null:Number(e)),a=e=>""===e||null===e?null:parseInt(e)},82153:(e,t,s)=>{"use strict";s.d(t,{A:()=>m});var n=s(80263),a=s(57019),r=s(33221),l=s(90354),i=s(8758),o=s.n(i),d=s(53239),c=s(37263);let u=(0,d.forwardRef)((e,t)=>{let{icon:s,title:i,description:u,url:m,urlLabel:x="Read more",defaultVisibility:f=!1,hideCollapse:p=!1,button:h,className:y="",block:g=!1}=e,[j,v]=(0,d.useState)(f);return(0,n.jsx)("div",{ref:t,role:"alert",className:"".concat(g?"block w-full":"","\n      block w-full rounded-md border bg-surface-300/25 py-3 ").concat(y),children:(0,n.jsxs)("div",{className:"flex flex-col px-4",children:[(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsxs)("div",{className:"flex w-full space-x-3 items-center",children:[s&&(0,n.jsx)("span",{className:"text-foreground-lighter",children:s}),(0,n.jsx)("div",{className:"flex-grow",children:(0,n.jsx)("h5",{className:"text-sm text-foreground",children:i})})]}),u&&!p?(0,n.jsx)("div",{className:"cursor-pointer text-foreground-lighter",onClick:()=>v(!j),children:j?(0,n.jsx)(a.A,{size:14,strokeWidth:1.5}):(0,n.jsx)(r.A,{size:14,strokeWidth:1.5})}):null]}),(u||m||h)&&(0,n.jsxs)("div",{className:"flex flex-col space-y-3 overflow-hidden transition-all ".concat(j?"mt-3":""),style:{maxHeight:500*!!j},children:[(0,n.jsx)("div",{className:"text-foreground-light text-sm",children:u}),m&&(0,n.jsx)("div",{children:(0,n.jsx)(c.$,{asChild:!0,type:"default",icon:(0,n.jsx)(l.A,{}),children:(0,n.jsx)(o(),{href:m,target:"_blank",rel:"noreferrer",children:x})})}),h&&(0,n.jsx)("div",{children:h})]})]})})});u.displayName="InformationBox";let m=u},92633:(e,t,s)=>{"use strict";s.d(t,{M:()=>l});var n=s(80263),a=s(82457),r=s(86165);let l=e=>{let{title:t,description:s,docsUrl:l,actions:i,className:o}=e;return(0,n.jsxs)("div",{className:(0,a.cn)("w-full mb-6 flex flex-col sm:flex-row md:items-center justify-between gap-4 ".concat(o)),"data-sentry-component":"FormHeader","data-sentry-source-file":"FormHeader.tsx",children:[(0,n.jsxs)("div",{className:"space-y-1",children:[(0,n.jsx)("h3",{className:"text-foreground text-xl prose",children:t}),s&&(0,n.jsx)("div",{className:"prose text-sm max-w-2xl",children:s})]}),(0,n.jsxs)("div",{className:"flex flex-col sm:flex-row md:items-center gap-x-2",children:[void 0!==l&&(0,n.jsx)(r.A,{href:l}),i]})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[89,8345,2491,3730,5982,6110,1185,5599,2041,1018,2409,4297,236,4515,1674,4942,2981,9480,4711,6137,4560,7795,3895,4109,2667,9377,6692,6646,9846,2156,5500,4649,7104,3133,2865,6593,636,8792],()=>t(54876)),_N_E=e.O()}]);