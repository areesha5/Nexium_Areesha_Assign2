!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="0698854f-0fc9-479d-b07b-cb89db03d2e8",e._sentryDebugIdIdentifier="sentry-dbid-0698854f-0fc9-479d-b07b-cb89db03d2e8")}catch(e){}}(),(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[936,4598,6841],{17835:(e,t,a)=>{"use strict";a.d(t,{A:()=>h});var r=a(80263),n=a(87355),s=a(53239),l=a(25481),o=a(45205),i=a(11789),d=a(45628),c=a(97008),u=a(92226),m=a(32211),x=a(72865),p=a(42125);let h=(0,u.r)(e=>{let{title:t,children:a}=e,u=(0,n.useRouter)(),{ref:h}=(0,l.g)(),f=(0,c.KT)(),g=(0,d.a)();(0,s.useEffect)(()=>{m.pe||u.push("/project/default")},[u]);let y=u.pathname.includes("billing")?u.pathname.split("/")[5]:u.pathname.split("/")[4],{projectAuthAll:j,projectEdgeFunctionAll:v,projectStorageAll:b,billingInvoices:w}=(0,i.x)(["project_auth:all","project_edge_function:all","project_storage:all","billing:invoices"]),N=(0,p.M)(h,f,g,{auth:j,edgeFunctions:v,storage:b,invoices:w});return(0,r.jsx)(x.A,{isBlocking:!1,title:t||"Settings",product:"Settings",productMenu:(0,r.jsx)(o.l,{page:y,menu:N}),"data-sentry-element":"ProjectLayout","data-sentry-component":"SettingsLayout","data-sentry-source-file":"SettingsLayout.tsx",children:a})})},18325:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=(0,a(84497).A)("Pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]])},21808:(e,t,a)=>{"use strict";a.d(t,{c:()=>n});var r=a(45628);function n(){let e=(0,r.a)();return e?{plan:null==e?void 0:e.plan,usageBillingEnabled:null==e?void 0:e.usage_billing_enabled,isLoading:!1,isSuccess:!0}:{plan:null,usageBillingEnabled:null,isLoading:!0,isSuccess:!1}}},24250:(e,t,a)=>{"use strict";a.d(t,{A:()=>c});var r=a(80263),n=a(219),s=a(57728),l=a(8758),o=a.n(l),i=a(53239),d=a(82457);let c=e=>{let t,{title:a,description:l,children:c,footer:u,url:m="",linkHref:x="",imgUrl:p,imgAlt:h,icon:f,className:g,loading:y=!1,fixedHeight:j=!0,hideChevron:v=!1,titleClass:b="",containerElement:w,...N}=e,k=m||x||N.onClick,S={},D=w&&i.isValidElement(w)?e=>(0,i.cloneElement)(w,{...e}):void 0;N.onClick?(t=null!=D?D:"button",S=N):x?(t=null!=D?D:o(),S={href:x,...N}):m?(t=null!=D?D:"a",S={href:m,...N}):(t=null!=D?D:"div",S=N);let C=["group relative text-left","bg-surface-100","border border-surface","rounded-md p-5 flex flex-row","transition ease-in-out duration-150"];k&&(C=[...C,"cursor-pointer","hover:bg-surface-200","hover:border-control"]),j&&(C=[...C,"min-h-32 md:min-h-44"]);let A=e=>{let{children:t}=e;return(0,r.jsx)("div",{className:"mr-4 flex flex-col","data-sentry-component":"ImageContainer","data-sentry-source-file":"CardButton.tsx",children:t})},z=(0,r.jsxs)(r.Fragment,{children:[p&&(0,r.jsx)(A,{children:(0,r.jsx)("img",{className:" transition-all group-hover:scale-110 ",src:"".concat(p),alt:"".concat(h),width:"26"})}),f&&(0,r.jsx)(A,{children:f}),(0,r.jsxs)("div",{className:"flex h-full w-full flex-col space-y-2",children:["string"==typeof a?(0,r.jsx)("h5",{className:"text-foreground pr-5 ".concat(b),children:a}):a,(c||l)&&(0,r.jsxs)("div",{className:"flex w-full flex-1 flex-col",children:[(0,r.jsx)("p",{className:"text-sm text-foreground-light",children:l}),(0,r.jsx)("div",{className:"w-full",children:c&&c})]}),u&&(0,r.jsx)("div",{className:"w-full !mt-auto",children:u})]}),k&&(0,r.jsx)("div",{className:" absolute right-4 top-4 text-foreground-lighter transition-all duration-200 group-hover:right-3 group-hover:text-foreground ",children:y?(0,r.jsx)(n.A,{className:"animate-spin"}):v?(0,r.jsx)(r.Fragment,{}):(0,r.jsx)(s.A,{})})]});return(0,r.jsx)(t,{...S,className:(0,d.cn)(C,g),"data-sentry-element":"Container","data-sentry-component":"CardButton","data-sentry-source-file":"CardButton.tsx",children:z})}},24717:(e,t,a)=>{"use strict";a.d(t,{BS:()=>o,Dm:()=>c,HJ:()=>j,Rf:()=>g,Uw:()=>d,Vw:()=>w,Xr:()=>b,aw:()=>h,bV:()=>l,cJ:()=>x,dX:()=>u,eh:()=>i,fh:()=>v,gu:()=>m,sZ:()=>p,tn:()=>y,xp:()=>f});var r=a(80263),n=a(53239),s=a(82457);let l="mx-auto w-full max-w-[1200px]",o="px-4 @lg:px-6 @xl:px-12 @2xl:px-20 @3xl:px-24",i=(0,n.forwardRef)((e,t)=>{let{className:a,bottomPadding:n,size:l="default",...i}=e;return(0,r.jsx)("div",{ref:t,...i,className:(0,s.cn)("mx-auto w-full",{small:"max-w-[768px]",default:"max-w-[1200px]",large:"max-w-[1600px]",full:"max-w-none"}[l],o,n&&"pb-16",a)})}),d=(0,n.forwardRef)((e,t)=>{let{className:a,...n}=e;return(0,r.jsx)("header",{...n,ref:t,className:(0,s.cn)("w-full","flex-col gap-3 py-6",a)})}),c=(0,n.forwardRef)((e,t)=>{let{className:a,...n}=e;return(0,r.jsx)("h1",{ref:t,...n,className:(0,s.cn)("text-2xl",a)})}),u=(0,n.forwardRef)((e,t)=>{let{className:a,...n}=e;return(0,r.jsx)("p",{ref:t,...n,className:(0,s.cn)("text-sm text-foreground-light",a)})}),m=(0,n.forwardRef)((e,t)=>{let{className:a,isFullWidth:n,topPadding:l,...o}=e;return(0,r.jsx)("div",{ref:t,...o,className:(0,s.cn)("flex flex-col first:pt-12 py-6",n?"w-full":"gap-3 lg:grid md:grid-cols-12",a)})}),x=(0,n.forwardRef)((e,t)=>{let{className:a,...n}=e;return(0,r.jsx)("div",{ref:t,...n,className:(0,s.cn)("w-full h-px bg-border",a)})}),p=(0,n.forwardRef)((e,t)=>{let{className:a,...n}=e;return(0,r.jsx)("h3",{ref:t,...n,className:(0,s.cn)("text-foreground text-xl",a)})}),h=(0,n.forwardRef)((e,t)=>{let{className:a,...n}=e;return(0,r.jsx)("p",{ref:t,...n,className:(0,s.cn)("text-sm text-foreground-light",a)})}),f=(0,n.forwardRef)((e,t)=>{let{className:a,children:n,title:l,...o}=e;return(0,r.jsxs)("div",{ref:t,...o,className:(0,s.cn)("col-span-4 xl:col-span-5 prose text-sm",a),children:[l&&(0,r.jsx)("h2",{children:l}),n]})}),g=(0,n.forwardRef)((e,t)=>{let{className:a,...n}=e;return(0,r.jsx)("div",{ref:t,...n,className:(0,s.cn)("col-span-8 xl:col-span-7","flex flex-col gap-6",a)})}),y=(0,n.forwardRef)((e,t)=>{let{className:a,...n}=e;return(0,r.jsx)("div",{ref:t,...n,className:(0,s.cn)("flex flex-col gap-3 items-center",a)})}),j=(0,n.forwardRef)((e,t)=>{let{className:a,...n}=e;return(0,r.jsx)("div",{ref:t,...n,className:(0,s.cn)("flex w-full items-center",a)})}),v=(0,n.forwardRef)((e,t)=>{let{className:a,...n}=e;return(0,r.jsx)("div",{ref:t,...n,className:(0,s.cn)("flex flex-row gap-3",a)})}),b=(0,n.forwardRef)((e,t)=>{let{className:a,...n}=e;return(0,r.jsx)("div",{ref:t,...n,className:(0,s.cn)("flex flex-col gap-3","min-w-[420px]",a)})}),w=(0,n.forwardRef)((e,t)=>{let{className:a,...n}=e;return(0,r.jsx)("div",{ref:t,...n,className:(0,s.cn)(l,o,"my-8 flex flex-col gap-8",a)})});d.displayName="ScaffoldHeader",c.displayName="ScaffoldTitle",u.displayName="ScaffoldDescription",i.displayName="ScaffoldContainer",x.displayName="ScaffoldDivider",m.displayName="ScaffoldSection",b.displayName="ScaffoldColumn",f.displayName="ScaffoldSectionDetail",g.displayName="ScaffoldSectionContent",y.displayName="ScaffoldFilterAndContent",j.displayName="ScaffoldActionsContainer",v.displayName="ScaffoldActionsGroup",w.displayName="ScaffoldContainerLegacy",p.displayName="ScaffoldSectionTitle",h.displayName="ScaffoldSectionDescription"},34053:(e,t,a)=>{"use strict";a.d(t,{I:()=>o});var r=a(80263),n=a(53239),s=a(85462);let l=(0,n.forwardRef)((e,t)=>(0,r.jsx)("svg",{ref:t,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",fill:"currentColor",...e,children:(0,r.jsx)("path",{d:"M15 8A7 7 0 1 1 1 8a7 7 0 0 1 14 0ZM9 5a1 1 0 1 1-2 0 1 1 0 0 1 2 0ZM6.75 8a.75.75 0 0 0 0 1.5h.75v1.75a.75.75 0 0 0 1.5 0v-2.5A.75.75 0 0 0 8.25 8h-1.5Z",fillRule:"evenodd",clipRule:"evenodd"})})),o=(0,n.forwardRef)((e,t)=>{let{...a}=e;return(0,r.jsxs)(s.m_,{children:[(0,r.jsx)(s.k$,{type:"button",role:"button",className:"flex [&_svg]:data-[state=delayed-open]:fill-foreground-lighter [&_svg]:data-[state=instant-open]:fill-foreground-lighter",children:(0,r.jsx)(l,{strokeWidth:2,className:"transition-colors fill-foreground-muted w-4 h-4"})}),(0,r.jsx)(s.ZI,{...a})]})})},44893:(e,t,a)=>{"use strict";a.d(t,{bL:()=>b,zi:()=>w});var r=a(54993),n=a(53239),s=a(91968),l=a(63774),o=a(68436),i=a(87990),d=a(15630),c=a(89422),u=a(70297);let m="Switch",[x,p]=(0,o.A)(m),[h,f]=x(m),g=(0,n.forwardRef)((e,t)=>{let{__scopeSwitch:a,name:o,checked:d,defaultChecked:c,required:m,disabled:x,value:p="on",onCheckedChange:f,...g}=e,[y,b]=(0,n.useState)(null),w=(0,l.s)(t,e=>b(e)),N=(0,n.useRef)(!1),k=!y||!!y.closest("form"),[S=!1,D]=(0,i.i)({prop:d,defaultProp:c,onChange:f});return(0,n.createElement)(h,{scope:a,checked:S,disabled:x},(0,n.createElement)(u.sG.button,(0,r.A)({type:"button",role:"switch","aria-checked":S,"aria-required":m,"data-state":v(S),"data-disabled":x?"":void 0,disabled:x,value:p},g,{ref:w,onClick:(0,s.m)(e.onClick,e=>{D(e=>!e),k&&(N.current=e.isPropagationStopped(),N.current||e.stopPropagation())})})),k&&(0,n.createElement)(j,{control:y,bubbles:!N.current,name:o,value:p,checked:S,required:m,disabled:x,style:{transform:"translateX(-100%)"}}))}),y=(0,n.forwardRef)((e,t)=>{let{__scopeSwitch:a,...s}=e,l=f("SwitchThumb",a);return(0,n.createElement)(u.sG.span,(0,r.A)({"data-state":v(l.checked),"data-disabled":l.disabled?"":void 0},s,{ref:t}))}),j=e=>{let{control:t,checked:a,bubbles:s=!0,...l}=e,o=(0,n.useRef)(null),i=(0,d.Z)(a),u=(0,c.X)(t);return(0,n.useEffect)(()=>{let e=o.current,t=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"checked").set;if(i!==a&&t){let r=new Event("click",{bubbles:s});t.call(e,a),e.dispatchEvent(r)}},[i,a,s]),(0,n.createElement)("input",(0,r.A)({type:"checkbox","aria-hidden":!0,defaultChecked:a},l,{tabIndex:-1,ref:o,style:{...e.style,...u,position:"absolute",pointerEvents:"none",opacity:0,margin:0}}))};function v(e){return e?"checked":"unchecked"}let b=g,w=y},45205:(e,t,a)=>{"use strict";a.d(t,{l:()=>o});var r=a(80263),n=a(51555),s=a(72470),l=a(68084);let o=e=>{let{page:t,menu:a}=e;return(0,r.jsx)("div",{className:"flex flex-col space-y-8 overflow-y-auto","data-sentry-component":"ProductMenu","data-sentry-source-file":"ProductMenu.tsx",children:(0,r.jsx)(n.Ay,{type:"pills","data-sentry-element":"Menu","data-sentry-source-file":"ProductMenu.tsx",children:a.map((e,o)=>(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"my-6 space-y-8",children:(0,r.jsxs)("div",{className:"mx-3",children:[(0,r.jsx)(n.Ay.Group,{title:e.title?(0,r.jsxs)("div",{className:"flex flex-col space-y-2 uppercase font-mono",children:[(0,r.jsx)("span",{children:e.title}),e.isPreview&&(0,r.jsx)(s.E,{variant:"warning",children:"Not production ready"})]}):null}),(0,r.jsx)("div",{children:e.items.map(e=>{let a=e.pages?e.pages.includes(null!=t?t:""):t===e.key;return(0,r.jsx)(l.A,{url:e.url,name:e.name,icon:e.icon,rightIcon:e.rightIcon,isActive:a,isExternal:e.isExternal,target:e.isExternal?"_blank":"_self",label:e.label},e.key)})})]})}),o!==a.length-1&&(0,r.jsx)("div",{className:"h-px w-full bg-border-overlay"})]},e.key||e.title))})})}},48041:(e,t,a)=>{"use strict";a.d(t,{F:()=>c,r:()=>d});let r=/^((ftp|http|https):\/\/)?(www.)?(?!.*(ftp|http|https|www.))[a-zA-Z0-9_*-]+(\.[a-zA-Z0-9_*-]+)+((\/)[\w#]+)*(\/\w+\?[a-zA-Z0-9_]+=\w+(&[a-zA-Z0-9_]+=\w+)*)+(?:\.[a-z]+)*(?::\d+)?(?![^<]*(?:<\/\w+>|\/?>))(.*)?\/?(.)*?$/gm,n=/^[a-z0-9-]+([.][a-z0-9]+)*:\/(\/[-a-z0-9._~!$&'()*+,;=:@%]+)+(?:\.[a-z]+)*(?::\d+)?(?![^<]*(?:<\/\w+>|\/?>))(.*)?\/?(.)*?$/i,s=/^(?:^|\s)((https?:\/\/)?(?:localhost|[\w-]+(?:\.[\w-]+)+)(:\d+)?(\/\S*)?)/i,l=/chrome-extension:\/\/([a-zA-Z]*)/gm,o=/^([a-zA-Z][a-zA-Z0-9+.-]*):(?:\/{1,3})?([a-zA-Z0-9_.-]*)$/,i=/^[a-zA-Z0-9-]+\.[a-zA-Z]{2,}$/;function d(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{excludeSimpleDomains:!0},{excludeSimpleDomains:t}=e,a=t?"(?!".concat(i.source,")"):"";return RegExp("".concat(a,"((").concat(r.source,")|(").concat(s.source,")|(").concat(n.source,")|(").concat(l.source,")|(").concat(o.source,"))"),"i")}let c="NO_REQUIRED_CHARS"},51555:(e,t,a)=>{"use strict";a.d(t,{Ay:()=>m});var r=a(80263),n=a(53239),s=a(5548),l=a(82457);function o(e){let{children:t,className:a,tag:n="div",style:s}=e;return(0,r.jsx)("".concat(n),{style:s,"data-sentry-element":"CustomTag","data-sentry-component":"Typography","data-sentry-source-file":"Typography.tsx",children:t})}o.Title=function(e){let{className:t,level:a=1,children:n,style:s}=e;return(0,r.jsx)("h".concat(a),{style:s,"data-sentry-element":"CustomTag","data-sentry-component":"Title","data-sentry-source-file":"Title.tsx",children:n})},o.Text=function(e){let{className:t,children:a,style:n,type:s,disabled:l,mark:o,code:i,keyboard:d,underline:c,strikethrough:u,strong:m,small:x}=e;return i?(0,r.jsx)("code",{style:n,children:a}):o?(0,r.jsx)("mark",{style:n,children:a}):d?(0,r.jsx)("kbd",{style:n,children:a}):m?(0,r.jsx)("strong",{style:n,children:a}):(0,r.jsx)("span",{style:n,"data-sentry-component":"Text","data-sentry-source-file":"Text.tsx",children:a})},o.Link=function(e){let{children:t,target:a="_blank",href:n,className:s,onClick:l,style:o}=e;return(0,r.jsx)("a",{onClick:l,href:n,target:a,rel:"noopener noreferrer",style:o,"data-sentry-component":"Link","data-sentry-source-file":"Link.tsx",children:t})};let i=(0,n.createContext)({type:"text"}),d=e=>{let{type:t}=e;return(0,r.jsx)(i.Provider,{value:{type:t},"data-sentry-element":"unknown","data-sentry-component":"MenuContextProvider","data-sentry-source-file":"MenuContext.tsx",children:e.children})},c=()=>{let e=(0,n.useContext)(i);if(void 0===e)throw Error("MenuContext must be used within a MenuContextProvider.");return e};function u(e){let{children:t,className:a,ulClassName:n,style:s,type:l="text"}=e;return(0,r.jsx)("nav",{role:"menu","aria-label":"Sidebar","aria-orientation":"vertical","aria-labelledby":"options-menu",className:a,style:s,"data-sentry-component":"Menu","data-sentry-source-file":"Menu.tsx",children:(0,r.jsx)(d,{type:l,"data-sentry-element":"MenuContextProvider","data-sentry-source-file":"Menu.tsx",children:(0,r.jsx)("ul",{className:n,children:t})})})}u.Item=function(e){let{children:t,icon:a,active:n,rounded:o,onClick:i,doNotCloseOverlay:d=!1,showActiveBar:u=!1,style:m}=e,x=(0,s.A)("menu"),{type:p}=c(),h=[x.item.base];h.push(x.item.variants[p].base),n?h.push(x.item.variants[p].active):h.push(x.item.variants[p].normal);let f=[x.item.content.base];n?f.push(x.item.content.active):f.push(x.item.content.normal);let g=[x.item.icon.base];return n?g.push(x.item.icon.active):g.push(x.item.icon.normal),(0,r.jsxs)("li",{role:"menuitem",className:(0,l.cn)("outline-none",h),style:m,onClick:i,"aria-current":n?"page":void 0,"data-sentry-component":"Item","data-sentry-source-file":"Menu.tsx",children:[a&&(0,r.jsx)("div",{className:"".concat(g.join(" ")," min-w-fit"),children:a}),(0,r.jsx)("span",{className:f.join(" "),children:t})]})},u.Group=function(e){let{children:t,icon:a,title:n}=e,l=(0,s.A)("menu"),{type:o}=c();return(0,r.jsxs)("div",{className:[l.group.base,l.group.variants[o]].join(" "),"data-sentry-component":"Group","data-sentry-source-file":"Menu.tsx",children:[a&&(0,r.jsx)("span",{className:l.group.icon,children:a}),(0,r.jsx)("span",{className:l.group.content,children:n}),t]})},u.Misc=function(e){let{children:t}=e;return(0,r.jsx)("div",{"data-sentry-component":"Misc","data-sentry-source-file":"Menu.tsx",children:(0,r.jsx)(o.Text,{"data-sentry-element":"unknown","data-sentry-source-file":"Menu.tsx",children:(0,r.jsx)("span",{children:t})})})};let m=u},58422:(e,t,a)=>{"use strict";a.d(t,{e:()=>d,p:()=>i});var r=a(80263),n=a(72342),s=a(38088),l=a(53239),o=a(82457);let i=l.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(n.bL,{className:(0,o.cn)("grid gap-2",a),...s,ref:t})});i.displayName=n.bL.displayName;let d=l.forwardRef((e,t)=>{let{image:a,label:l,showIndicator:i=!0,...d}=e;return(0,r.jsxs)(n.q7,{ref:t,...d,className:(0,o.cn)("flex flex-col gap-2","w-48","bg-overlay","rounded-md","border","p-2","hover:border-foreground-muted","hover:z-[1] focus-visible:z-[1]","data-[state=checked]:z-[1]","data-[state=checked]:ring-2 data-[state=checked]:ring-border","data-[state=checked]:bg-surface-200 dark:data-[state=checked]:bg-surface-300","data-[state=checked]:border-foreground/50","transition-colors","group",d.className),children:[d.children,(0,r.jsxs)("label",{className:"flex gap-2 w-full",id:d.id,htmlFor:d.value,children:[i&&(0,r.jsx)("div",{className:" aspect-square h-4 w-4  rounded-full border group-data-[state=checked]:border-foreground-muted group-focus:border-foreground-muted group-hover:border-foreground-muted ring-offset-background  group-focus:outline-none  group-focus-visible:ring-2 group-focus-visible:ring-ring group-focus-visible:ring-offset-2  group-disabled:cursor-not-allowed group-disabled:opacity-50 flex items-center justify-center transition ",children:(0,r.jsx)(n.C1,{className:"flex items-center justify-center",children:(0,r.jsx)(s.A,{className:"h-2.5 w-2.5 fill-current text-current"})})}),(0,r.jsx)("div",{className:(0,o.cn)("w-full","text-xs transition-colors text-left","text-light","group-hover:text-foreground group-data-[state=checked]:text-foreground",d.disabled?"cursor-not-allowed":"cursor-pointer"),children:l})]})]})});d.displayName=n.q7.displayName},58667:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=(0,a(84497).A)("Ellipsis",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]])},64477:(e,t,a)=>{"use strict";a.d(t,{d:()=>c});var r=a(80263),n=a(44893),s=a(79279),l=a(53239),o=a(82457);let i=(0,s.F)("peer inline-flex shrink-0 cursor-pointer items-center rounded-full border transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-brand data-[state=checked]:hover:bg-brand-600/90 data-[state=unchecked]:bg-control data-[state=unchecked]:hover:bg-border",{variants:{size:{small:"h-[16px] w-[28px]",medium:"h-[20px] w-[34px]",large:"h-[24px] w-[44px]"}},defaultVariants:{size:"medium"}}),d=(0,s.F)("pointer-events-none block rounded-full bg-foreground-lighter data-[state=checked]:bg-white shadow-lg ring-0 transition-transform",{variants:{size:{small:"h-[12px] w-[12px] data-[state=checked]:translate-x-[13px] data-[state=unchecked]:translate-x-[1px]",medium:"h-[16px] w-[16px] data-[state=checked]:translate-x-[15px] data-[state=unchecked]:translate-x-[1px]",large:"h-[18px] w-[18px] data-[state=checked]:translate-x-[22px] data-[state=unchecked]:translate-x-[3px]"}},defaultVariants:{size:"medium"}}),c=l.forwardRef((e,t)=>{let{className:a,size:s,...l}=e;return(0,r.jsx)(n.bL,{className:(0,o.cn)(i({size:s}),a),...l,ref:t,children:(0,r.jsx)(n.zi,{className:(0,o.cn)(d({size:s}))})})});c.displayName=n.bL.displayName},67992:(e,t,a)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/project/[ref]/settings/log-drains",function(){return a(86823)}])},68084:(e,t,a)=>{"use strict";a.d(t,{A:()=>d});var r=a(80263),n=a(8758),s=a.n(n),l=a(51555),o=a(72470),i=a(37263);let d=e=>{let{name:t="",isActive:a,isExternal:n,icon:d,rightIcon:c,url:u="",target:m="_self",onClick:x,textClassName:p="",hoverText:h="",label:f}=e,g=(0,r.jsx)(l.Ay.Item,{icon:d,rounded:!0,active:a,onClick:x,children:(0,r.jsxs)("div",{className:"flex w-full items-center justify-between gap-1",children:[(0,r.jsxs)("div",{title:h||("string"==typeof t?t:""),className:"flex items-center gap-2 truncate w-full "+p,children:[(0,r.jsxs)("span",{className:"truncate",children:[t," "]}),void 0!==f&&(0,r.jsx)(o.E,{variant:"warning",className:"py-0 px-1.5 capitalize",children:f})]}),c&&(0,r.jsx)("div",{children:c})]})});return u?n?(0,r.jsx)(i.$,{asChild:!0,block:!0,className:"!justify-start",type:"text",size:"small",icon:d,children:(0,r.jsx)(s(),{href:u,target:"_blank",rel:"noreferrer",children:t})}):(0,r.jsx)(s(),{href:u,className:"block",target:m,children:g}):g}},78131:(e,t,a)=>{"use strict";a.d(t,{A0:()=>o,BF:()=>i,Gg:()=>d,Hj:()=>c,XI:()=>l,nA:()=>m,nd:()=>u,r6:()=>x});var r=a(80263),n=a(53239),s=a(82457);let l=n.forwardRef((e,t)=>{let{className:a,containerProps:n,...l}=e;return(0,r.jsx)("div",{className:(0,s.cn)("w-full overflow-auto"),...n,children:(0,r.jsx)("table",{ref:t,className:(0,s.cn)("w-full caption-bottom text-sm",a),...l})})});l.displayName="Table";let o=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,r.jsx)("thead",{ref:t,className:(0,s.cn)("[&_tr]:border-b",a),...n})});o.displayName="TableHeader";let i=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,r.jsx)("tbody",{ref:t,className:(0,s.cn)("[&_tr:last-child]:border-0",a),...n})});i.displayName="TableBody";let d=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,r.jsx)("tfoot",{ref:t,className:(0,s.cn)("bg-primary font-medium text-primary-foreground",a),...n})});d.displayName="TableFooter";let c=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,r.jsx)("tr",{ref:t,className:(0,s.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",a),...n})});c.displayName="TableRow";let u=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,r.jsx)("th",{ref:t,className:(0,s.cn)("h-12 px-4 text-left align-middle font-medium text-foreground-muted [&:has([role=checkbox])]:pr-0",a),...n})});u.displayName="TableHead";let m=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,r.jsx)("td",{ref:t,className:(0,s.cn)("p-4 align-middle [&:has([role=checkbox])]:pr-0",a),...n})});m.displayName="TableCell";let x=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,r.jsx)("caption",{ref:t,className:(0,s.cn)("mt-4 text-sm text-foreground-muted",a),...n})});x.displayName="TableCaption"},86823:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>em});var r=a(80263),n=a(60045),s=a(53239),l=a(73969),o=a(25481),i=a(32981),d=a(98990),c=a(87494),u=a(39353),m=a(56947),x=a(48678);let p={list:e=>["projects",e,"log-drains"]};async function h(e,t){let{ref:a}=e;if(!a)throw Error("ref is required");let{data:r,error:n}=await (0,x.Jt)("/platform/projects/{ref}/analytics/log-drains",{params:{path:{ref:a}},signal:t});return n&&(0,x.H4)(n),r}let f=function(e){let{ref:t}=e,{enabled:a=!0,...r}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,m.I)(p.list(t),e=>{let{signal:a}=e;return h({ref:t},a)},{enabled:a&&!!t,refetchOnMount:!1,...r})};var g=a(67963),y=a(93263),j=a(4806),v=a(96457),b=a(58422),w=a(64477),N=a(37263),k=a(87916),S=a(34053),D=a(48041);let C=(0,a(84497).A)("Braces",[["path",{d:"M8 3H7a2 2 0 0 0-2 2v5a2 2 0 0 1-2 2 2 2 0 0 1 2 2v5c0 1.1.9 2 2 2h1",key:"ezmyqa"}],["path",{d:"M16 21h1a2 2 0 0 0 2-2v-5c0-1.1.9-2 2-2a2 2 0 0 1-2-2V5a2 2 0 0 0-2-2h-1",key:"e1hn23"}]]);var A=a(97096);let z={height:24,width:24,className:"text-foreground-light"},L=[{value:"webhook",name:"HTTP Endpoint",description:"Forward logs as a POST request to a custom HTTP endpoint",icon:(0,r.jsx)(C,{...z})},{value:"datadog",name:"Datadog",description:"Datadog is a monitoring service for cloud-scale applications",icon:(0,r.jsx)(A.Zm,{...z,fill:"currentColor",strokeWidth:0})},{value:"loki",name:"Loki",description:"Loki is an open-source log aggregation system designed to store and query logs from multiple sources",icon:(0,r.jsx)(A.Dg,{...z,fill:"currentColor",strokeWidth:0})}];L.map(e=>e.value);let R=[{label:"AP1",value:"AP1"},{label:"EU",value:"EU"},{label:"US1",value:"US1"},{label:"US1-FED",value:"US1-FED"},{label:"US3",value:"US3"},{label:"US5",value:"US5"}];var T=a(86165);let _="log-drain-destination-form",E=u.z.discriminatedUnion("type",[u.z.object({type:u.z.literal("webhook"),url:u.z.string().regex((0,D.r)(),"Endpoint URL is required and must be a valid URL"),http:u.z.enum(["http1","http2"]),gzip:u.z.boolean(),headers:u.z.record(u.z.string(),u.z.string()).optional()}),u.z.object({type:u.z.literal("datadog"),api_key:u.z.string().min(1,{message:"API key is required"}),region:u.z.string().min(1,{message:"Region is required"})}),u.z.object({type:u.z.literal("elastic")}),u.z.object({type:u.z.literal("postgres")}),u.z.object({type:u.z.literal("bigquery")}),u.z.object({type:u.z.literal("loki"),url:u.z.string().min(1,{message:"Loki URL is required"}),headers:u.z.record(u.z.string(),u.z.string()),username:u.z.string().optional(),password:u.z.string().optional()})]),F=u.z.object({name:u.z.string().min(1,{message:"Destination name is required"}),description:u.z.string().optional()}).and(E);function M(e){let{value:t,label:a,description:n,formControl:s,placeholder:l,type:o,defaultValue:i}=e;return(0,r.jsx)(g.zB,{name:t,control:s,render:e=>{let{field:t}=e;return(0,r.jsx)(k.M,{layout:"horizontal",label:a,description:n||"",children:(0,r.jsx)(g.MJ,{children:(0,r.jsx)(y.p,{defaultValue:i,type:o||"text",placeholder:l,...t})})})},"data-sentry-element":"FormField_Shadcn_","data-sentry-component":"LogDrainFormItem","data-sentry-source-file":"LogDrainDestinationSheetForm.tsx"})}function I(e){var t,a,n,u;let{open:m,onOpenChange:x,defaultValues:p,onSubmit:h,isLoading:D,mode:C}=e,A=(null==p?void 0:p.config)||{},z="create"===C?{"Content-Type":"application/json"}:(null==A?void 0:A.headers)||{},{ref:E}=(0,o.g)(),{data:I}=f({ref:E}),H=(null==p?void 0:p.type)||"webhook",[P,U]=(0,s.useState)({name:"",value:""}),q=(0,c.mN)({resolver:(0,i.u)(F),values:{name:(null==p?void 0:p.name)||"",description:(null==p?void 0:p.description)||"",type:H,http:(null==A?void 0:A.http)||"http2",gzip:"create"===C||(null==A?void 0:A.gzip)||!1,headers:z,url:(null==A?void 0:A.url)||"",api_key:(null==A?void 0:A.api_key)||"",region:(null==A?void 0:A.region)||"",username:(null==A?void 0:A.username)||"",password:(null==A?void 0:A.password)||""}}),B=q.watch("headers"),V=q.watch("type"),Z=(null==(t=Object.keys(B||{}))?void 0:t.length)>0;return(0,s.useEffect)(()=>{"create"!==C||m||q.reset()},[C,m,q]),(0,r.jsx)(j.cj,{open:m,onOpenChange:e=>{U({name:"",value:""}),x(e)},"data-sentry-element":"Sheet","data-sentry-component":"LogDrainDestinationSheetForm","data-sentry-source-file":"LogDrainDestinationSheetForm.tsx",children:(0,r.jsxs)(j.h,{tabIndex:void 0,showClose:!1,size:"lg",className:"overflow-y-auto flex flex-col","data-sentry-element":"SheetContent","data-sentry-source-file":"LogDrainDestinationSheetForm.tsx",children:[(0,r.jsx)(j.Fm,{"data-sentry-element":"SheetHeader","data-sentry-source-file":"LogDrainDestinationSheetForm.tsx",children:(0,r.jsx)(j.qp,{"data-sentry-element":"SheetTitle","data-sentry-source-file":"LogDrainDestinationSheetForm.tsx",children:"Add destination"})}),(0,r.jsxs)(j.Xc,{className:"!px-0 !pb-0","data-sentry-element":"SheetSection","data-sentry-source-file":"LogDrainDestinationSheetForm.tsx",children:[(0,r.jsx)(g.lV,{...q,"data-sentry-element":"Form_Shadcn_","data-sentry-source-file":"LogDrainDestinationSheetForm.tsx",children:(0,r.jsxs)("form",{id:_,onSubmit:e=>{e.preventDefault();let t=q.getValues("name");if((null==I?void 0:I.find(e=>e.name===t))&&"create"===C)return void l.oR.error("Log drain name already exists");q.handleSubmit(h)(e)},children:[(0,r.jsxs)("div",{className:"space-y-8 px-content",children:[(0,r.jsx)(M,{value:"name",placeholder:"My Destination",label:"Name",formControl:q.control,"data-sentry-element":"LogDrainFormItem","data-sentry-source-file":"LogDrainDestinationSheetForm.tsx"}),(0,r.jsx)(M,{value:"description",placeholder:"My Destination",label:"Description",formControl:q.control,"data-sentry-element":"LogDrainFormItem","data-sentry-source-file":"LogDrainDestinationSheetForm.tsx"}),"create"===C&&(0,r.jsx)(k.M,{layout:"horizontal",label:"Type",description:(null==(a=L.find(e=>e.value===V))?void 0:a.description)||"",children:(0,r.jsxs)(v.l6,{defaultValue:H,value:q.getValues("type"),onValueChange:e=>q.setValue("type",e),children:[(0,r.jsx)(v.bq,{children:null==(n=L.find(e=>e.value===V))?void 0:n.name}),(0,r.jsx)(v.gC,{children:L.map(e=>(0,r.jsx)(v.eb,{value:e.value,id:e.value,className:"text-left",children:e.name},e.value))})]})})]}),(0,r.jsxs)("div",{className:"space-y-8 mt-4",children:["webhook"===V&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"px-content space-y-8",children:[(0,r.jsx)(M,{value:"url",label:"Endpoint URL",formControl:q.control,placeholder:"https://example.com/log-drain"}),(0,r.jsx)(g.zB,{control:q.control,name:"http",render:e=>{let{field:t}=e;return(0,r.jsx)(k.M,{layout:"horizontal",label:"HTTP Version",children:(0,r.jsx)(g.MJ,{children:(0,r.jsxs)(b.p,{className:"flex gap-2",onValueChange:t.onChange,value:t.value,children:[(0,r.jsx)(g.eI,{asChild:!0,children:(0,r.jsx)(g.MJ,{children:(0,r.jsx)(b.e,{value:"http1",label:"HTTP/1"})})}),(0,r.jsx)(g.eI,{asChild:!0,children:(0,r.jsx)(g.MJ,{children:(0,r.jsx)(b.e,{value:"http2",label:"HTTP/2"})})})]})})})}})]}),(0,r.jsx)(g.zB,{control:q.control,name:"gzip",render:e=>{let{field:t}=e;return(0,r.jsx)(g.eI,{className:"space-y-2 px-4",children:(0,r.jsxs)("div",{className:"flex gap-2 items-center",children:[(0,r.jsx)(g.MJ,{children:(0,r.jsx)(w.d,{checked:t.value,onCheckedChange:t.onChange})}),(0,r.jsx)(g.lR,{className:"text-base",children:"Gzip"}),(0,r.jsx)(S.I,{align:"start",children:"Gzip compresses logs before sending it to the destination."})]})})}})]}),"datadog"===V&&(0,r.jsxs)("div",{className:"grid gap-4 px-content",children:[(0,r.jsx)(M,{type:"password",value:"api_key",label:"API Key",formControl:q.control,description:(0,r.jsxs)(r.Fragment,{children:["The API Key obtained from the Datadog dashboard"," ",(0,r.jsx)("a",{target:"_blank",rel:"noopener noreferrer",className:"text-sm underline transition hover:text-foreground",href:"https://app.datadoghq.com/organization-settings/api-keys",children:"here"})]})}),(0,r.jsx)(g.zB,{name:"region",control:q.control,render:e=>{let{field:t}=e;return(0,r.jsx)(k.M,{layout:"horizontal",label:"Region",description:(0,r.jsxs)("p",{children:["The Datadog region to send logs to. Read more about Datadog regions"," ",(0,r.jsx)("a",{target:"_blank",rel:"noopener noreferrer",className:"underline hover:text-foreground transition",href:"https://docs.datadoghq.com/getting_started/site/#access-the-datadog-site",children:"here"}),"."]}),children:(0,r.jsx)(g.MJ,{children:(0,r.jsxs)(v.l6,{value:t.value,onValueChange:t.onChange,children:[(0,r.jsx)(v.bq,{className:"col-span-3",children:(0,r.jsx)(v.yv,{placeholder:"Select a region"})}),(0,r.jsx)(v.gC,{children:(0,r.jsxs)(v.s3,{children:[(0,r.jsx)(v.TR,{children:"Region"}),R.map(e=>(0,r.jsx)(v.eb,{value:e.value,children:e.label},e.value))]})})]})})})}})]}),"loki"===V&&(0,r.jsxs)("div",{className:"grid gap-4 px-content",children:[(0,r.jsx)(M,{type:"url",value:"url",placeholder:"https://my-logs-endpoint.grafana.net/loki/api/v1/push",label:"Loki URL",formControl:q.control,description:"The Loki HTTP(S) endpoint to send events."}),(0,r.jsx)(M,{value:"username",label:"Username",placeholder:"123456789",formControl:q.control}),(0,r.jsx)(M,{type:"password",value:"password",label:"Password",placeholder:"glc_ABCD1234567890",formControl:q.control})]}),(0,r.jsx)(g.C5,{"data-sentry-element":"FormMessage_Shadcn_","data-sentry-source-file":"LogDrainDestinationSheetForm.tsx"})]})]})}),("webhook"===V||"loki"===V)&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"border-t mt-4",children:[(0,r.jsxs)("div",{className:"px-content pt-2 pb-3 border-b bg-background-alternative-200",children:[(0,r.jsx)("h2",{className:"text-sm text-foreground",children:"Custom Headers"}),(0,r.jsx)("p",{className:"text-xs text-foreground-lighter",children:"webhook"===V?"Set custom headers when draining logs to the Endpoint URL":"loki"===V?"Set custom headers when draining logs to the Loki HTTP(S) endpoint":""})]}),(0,r.jsx)("div",{className:"divide-y",children:Z&&(null==(u=Object.keys(B||{}))?void 0:u.map(e=>(0,r.jsxs)("div",{className:"flex text-sm px-content text-foreground items-center font-mono py-1.5 group",children:[(0,r.jsx)("div",{className:"w-full",children:e}),(0,r.jsx)("div",{className:"w-full truncate",title:null==B?void 0:B[e],children:null==B?void 0:B[e]}),(0,r.jsx)(N.$,{className:"justify-self-end opacity-0 group-hover:opacity-100 w-7",type:"text",title:"Remove",icon:(0,r.jsx)(d.A,{}),onClick:()=>(function(e){let t={...B};delete t[e],q.setValue("headers",t)})(e)})]},e)))})]}),(0,r.jsxs)("form",{onSubmit:e=>{e.preventDefault(),e.stopPropagation(),function(){let e=q.getValues("headers");if(!e)return;let t=Object.keys(e);(null==t?void 0:t.length)===20?l.oR.error("You can only have 20 custom headers"):(null==t?void 0:t.includes(P.name))?l.oR.error("Header name already exists"):P.name&&P.value?(q.setValue("headers",{...e,[P.name]:P.value}),U({name:"",value:""})):l.oR.error("Header name and value are required")}()},className:"flex border-t py-4 gap-4 items-center px-content",children:[(0,r.jsx)("label",{className:"sr-only",htmlFor:"header-name",children:"Header name"}),(0,r.jsx)(y.p,{id:"header-name",type:"text",placeholder:"x-header-name",value:P.name,onChange:e=>U({...P,name:e.target.value})}),(0,r.jsx)("label",{className:"sr-only",htmlFor:"header-value",children:"Header value"}),(0,r.jsx)(y.p,{id:"header-value",type:"text",placeholder:"Header value",value:P.value,onChange:e=>U({...P,value:e.target.value})}),(0,r.jsx)(N.$,{htmlType:"submit",type:"outline",children:"Add"})]})]})]}),(0,r.jsxs)("div",{className:"mt-auto",children:[(0,r.jsx)(j.Xc,{className:"border-t bg-background-alternative-200 mt-auto","data-sentry-element":"SheetSection","data-sentry-source-file":"LogDrainDestinationSheetForm.tsx",children:(0,r.jsx)(k.M,{isReactForm:!1,layout:"horizontal",label:(0,r.jsxs)("div",{className:"flex flex-col gap-y-2 text-foreground-light",children:["Additional drain cost",(0,r.jsx)(T.A,{abbrev:!1,className:"w-min",href:"https://supabase.com/docs/guides/platform/log-drains"})]}),"data-sentry-element":"FormItemLayout","data-sentry-source-file":"LogDrainDestinationSheetForm.tsx",children:(0,r.jsxs)("ul",{className:"text-right text-foreground-light",children:[(0,r.jsx)("li",{className:"text-brand-link text-base",translate:"no",children:"$60 per drain per month"}),(0,r.jsx)("li",{translate:"no",children:"+ $0.20 per million events"}),(0,r.jsx)("li",{translate:"no",children:"+ $0.09 per GB egress"})]})})}),(0,r.jsx)(j.XW,{className:"p-content !mt-0","data-sentry-element":"SheetFooter","data-sentry-source-file":"LogDrainDestinationSheetForm.tsx",children:(0,r.jsx)(N.$,{form:_,loading:D,htmlType:"submit",type:"primary","data-sentry-element":"Button","data-sentry-source-file":"LogDrainDestinationSheetForm.tsx",children:"Save destination"})})]})]})})}var H=a(58667),P=a(18325),U=a(8758),q=a.n(U),B=a(80948),V=a(24250),Z=a(41422),$=a(32144),O=a(80251);async function X(e){let{projectRef:t,token:a}=e,{data:r,error:n}=await (0,x.yH)("/platform/projects/{ref}/analytics/log-drains/{token}",{params:{path:{ref:t,token:a}}});return n&&(0,x.H4)(n),r}let G=function(){let{onSuccess:e,onError:t,...a}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=(0,$.jE)();return(0,O.n)(e=>X(e),{async onSuccess(t,a,n){let{projectRef:s}=a;await r.invalidateQueries(p.list(s)),await (null==e?void 0:e(t,a,n))},async onError(e,a,r){void 0===t?l.oR.error("Failed to mutate: ".concat(e.message)):t(e,a,r)},...a})};var J=a(21808),Q=a(45628),W=a(78131),K=a(42206),Y=a(54097),ee=a(81172);function et(e){let{onNewDrainClick:t,onUpdateDrainClick:a}=e,n=(0,Q.a)(),{isLoading:i,plan:c}=(0,J.c)(),u=!i&&((null==c?void 0:c.id)==="team"||(null==c?void 0:c.id)==="enterprise"),[m,x]=(0,s.useState)(!1),[p,h]=(0,s.useState)(null),{ref:g}=(0,o.g)(),{data:y,isLoading:j,refetch:v,error:b,isError:w}=f({ref:g},{enabled:u}),{mutate:k}=G({onSuccess:()=>{x(!1),h(null)},onError:()=>{x(!1),h(null),l.oR.error("Failed to delete log drain")}});return i||u?j||i?(0,r.jsx)("div",{children:(0,r.jsx)(ee.y,{})}):j||(null==y?void 0:y.length)!==0?w?(0,r.jsx)(B.A,{error:b}):(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(Z.A,{className:"","data-sentry-element":"Panel","data-sentry-source-file":"LogDrains.tsx",children:(0,r.jsxs)(W.XI,{"data-sentry-element":"Table","data-sentry-source-file":"LogDrains.tsx",children:[(0,r.jsx)(W.A0,{"data-sentry-element":"TableHeader","data-sentry-source-file":"LogDrains.tsx",children:(0,r.jsxs)(W.Hj,{"data-sentry-element":"TableRow","data-sentry-source-file":"LogDrains.tsx",children:[(0,r.jsx)(W.nd,{className:"max-w-[200px]","data-sentry-element":"TableHead","data-sentry-source-file":"LogDrains.tsx",children:"Name"}),(0,r.jsx)(W.nd,{"data-sentry-element":"TableHead","data-sentry-source-file":"LogDrains.tsx",children:"Description"}),(0,r.jsx)(W.nd,{className:"text-right","data-sentry-element":"TableHead","data-sentry-source-file":"LogDrains.tsx",children:"Destination"}),(0,r.jsx)(W.nd,{className:"text-right","data-sentry-element":"TableHead","data-sentry-source-file":"LogDrains.tsx",children:(0,r.jsx)("div",{className:"sr-only",children:"Actions"})})]})}),(0,r.jsx)(W.BF,{"data-sentry-element":"TableBody","data-sentry-source-file":"LogDrains.tsx",children:null==y?void 0:y.map(e=>(0,r.jsxs)(W.Hj,{children:[(0,r.jsx)(W.nA,{className:"font-medium truncate max-w-72",title:e.name,children:e.name}),(0,r.jsx)(W.nA,{className:"text-foreground-light truncate max-w-72",title:e.description,children:e.description}),(0,r.jsx)(W.nA,{className:"text-right font-mono",children:e.type}),(0,r.jsx)(W.nA,{className:"text-right",children:(0,r.jsxs)(K.rI,{children:[(0,r.jsx)(K.ty,{asChild:!0,children:(0,r.jsx)(N.$,{type:"text",className:"px-1 opacity-50 hover:opacity-100 !bg-transparent",icon:(0,r.jsx)(H.A,{})})}),(0,r.jsxs)(K.SQ,{className:"max-w-[140px]",align:"end",children:[(0,r.jsxs)(K._2,{onClick:()=>{a(e)},children:[(0,r.jsx)(P.A,{className:"h-4 w-4 mr-2"}),"Update"]}),(0,r.jsxs)(K._2,{onClick:()=>{h(e),x(!0)},children:[(0,r.jsx)(d.A,{className:"h-4 w-4 mr-2"}),"Delete"]})]})]})})]},e.id))}),(0,r.jsx)(Y.A,{confirmLabel:"Delete",variant:"destructive",title:"Delete Log Drain",visible:m,onConfirm:()=>{p&&g&&k({token:p.token,projectRef:g})},onCancel:()=>x(!1),"data-sentry-element":"ConfirmationModal","data-sentry-source-file":"LogDrains.tsx",children:(0,r.jsxs)("div",{className:"text-foreground-light text-sm",children:[(0,r.jsxs)("p",{children:["Are you sure you want to delete"," ",(0,r.jsx)("span",{className:"text-foreground",children:null==p?void 0:p.name}),"?"]}),(0,r.jsx)("p",{children:"This action cannot be undone."})]})})]})})}):(0,r.jsx)("div",{className:"grid lg:grid-cols-2 gap-3",children:L.map(e=>(0,r.jsx)(V.A,{title:e.name,description:e.description,icon:e.icon,onClick:()=>{t(e.value)}},e.value))}):(0,r.jsx)(V.A,{title:"Upgrade to a Team Plan",description:"Upgrade to a Team or Enterprise Plan to use Log Drains",children:(0,r.jsx)(N.$,{className:"mt-2",asChild:!0,children:(0,r.jsx)(q(),{href:"/org/".concat(null==n?void 0:n.slug,"/billing"),children:"Upgrade to Team"})})})}var ea=a(17835),er=a(24717);async function en(e){let{data:t,error:a}=await (0,x.bE)("/platform/projects/{ref}/analytics/log-drains",{params:{path:{ref:e.projectRef}},body:{name:e.name,description:e.description,type:e.type,config:e.config}});return a&&(0,x.H4)(a),t}let es=function(){let{onSuccess:e,onError:t,...a}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=(0,$.jE)();return(0,O.n)(e=>en(e),{async onSuccess(t,a,n){let{projectRef:s}=a;await r.invalidateQueries(p.list(s)),await (null==e?void 0:e(t,a,n))},async onError(e,a,r){void 0===t?l.oR.error("Failed to mutate: ".concat(e.message)):t(e,a,r)},...a})};async function el(e){if(!e.token)throw Error("Token is required");let{data:t,error:a}=await (0,x.yJ)("/platform/projects/{ref}/analytics/log-drains/{token}",{params:{path:{ref:e.projectRef,token:e.token}},body:{name:e.name,description:e.description,type:e.type,config:e.config}});return a&&(0,x.H4)(a),t}let eo=function(){let{onSuccess:e,onError:t,...a}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=(0,$.jE)();return(0,O.n)(e=>el(e),{async onSuccess(t,a,n){let{projectRef:s}=a;await r.invalidateQueries(p.list(s)),await (null==e?void 0:e(t,a,n))},async onError(e,a,r){void 0===t?l.oR.error("Failed to mutate: ".concat(e.message)):t(e,a,r)},...a})};var ei=a(19070),ed=a(96773),ec=a(4649);let eu=()=>{let e=(0,ei.SE)(n.aG.ANALYTICS_ADMIN_WRITE,"logflare"),[t,a]=(0,s.useState)(!1),{ref:i}=(0,o.g)(),[d,c]=(0,s.useState)(null),[u,m]=(0,s.useState)("create"),{plan:x,isLoading:p}=(0,J.c)(),h=!p&&((null==x?void 0:x.id)==="team"||(null==x?void 0:x.id)==="enterprise"),{data:g}=f({ref:i},{enabled:h}),{mutate:y,isLoading:j}=es({onSuccess:()=>{l.oR.success("Log drain destination created"),a(!1)},onError:()=>{l.oR.error("Failed to create log drain"),a(!1)}}),{mutate:v,isLoading:b}=eo({onSuccess:()=>{l.oR.success("Log drain updated"),a(!1)},onError:()=>{a(!1),l.oR.error("Failed to update log drain")}});return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(er.eh,{"data-sentry-element":"ScaffoldContainer","data-sentry-source-file":"log-drains.tsx",children:(0,r.jsxs)(er.Uw,{className:"flex flex-row justify-between","data-sentry-element":"ScaffoldHeader","data-sentry-source-file":"log-drains.tsx",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(er.Dm,{"data-sentry-element":"ScaffoldTitle","data-sentry-source-file":"log-drains.tsx",children:"Log Drains"}),(0,r.jsx)(er.dX,{"data-sentry-element":"ScaffoldDescription","data-sentry-source-file":"log-drains.tsx",children:"Send your project logs to third party destinations"})]}),(0,r.jsxs)("div",{className:"flex items-center justify-end gap-2",children:[(0,r.jsx)(T.A,{href:"https://supabase.com/docs/guides/platform/log-drains","data-sentry-element":"DocsButton","data-sentry-source-file":"log-drains.tsx"}),(null==g?void 0:g.length)!==0&&(0,r.jsx)(N.$,{disabled:!h||!e,onClick:()=>{c(null),m("create"),a(!0)},type:"primary",children:"Add destination"})]})]})}),(0,r.jsxs)(er.eh,{className:"flex flex-col gap-10",bottomPadding:!0,"data-sentry-element":"ScaffoldContainer","data-sentry-source-file":"log-drains.tsx",children:[(0,r.jsx)(I,{mode:u,open:t,onOpenChange:e=>{e||c(null),a(e)},defaultValues:{type:(null==d?void 0:d.type)||"webhook",...d},isLoading:j||b,onSubmit:e=>{let{name:t,description:a,type:r,...n}=e,s={name:t,description:a||"",type:r,config:n,id:null==d?void 0:d.id,projectRef:i,token:null==d?void 0:d.token};if("create"===u)y(s);else if(s.id&&(null==d?void 0:d.token))v(s);else throw Error("Log drain ID and token is required")},"data-sentry-element":"LogDrainDestinationSheetForm","data-sentry-source-file":"log-drains.tsx"}),e?(0,r.jsx)(et,{onUpdateDrainClick:function(e){c(e),m("update"),a(!0)},onNewDrainClick:function(e){c({type:e}),m("create"),a(!0)}}):(0,r.jsx)(ed.Fc,{variant:"default",children:"You do not have permission to manage log drains"})]})]})};eu.getLayout=e=>(0,r.jsx)(ec.A,{children:(0,r.jsx)(ea.A,{title:"Log Drains",children:e})});let em=eu}},e=>{var t=t=>e(e.s=t);e.O(0,[89,8345,2491,3730,5982,6110,1185,5599,2041,1018,2409,4297,236,4515,1674,4942,2981,9480,4711,6137,4560,7795,3895,4109,2667,9846,2156,5500,4649,7104,3133,2865,6593,636,8792],()=>t(67992)),_N_E=e.O()}]);